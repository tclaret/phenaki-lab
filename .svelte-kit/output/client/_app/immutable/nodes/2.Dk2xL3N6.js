import{f as he,a as A,c as ht,t as xe}from"../chunks/DidSmI2s.js";import"../chunks/BfDn8e9k.js";import{G as Ba,v as Ne,w as Va,g as t,av as Ja,I as Za,J as Ka,K as xa,L as Ma,M as ta,D as En,a3 as Qa,aq as ei,aa as ti,x as vt,C as la,B as La,F as ni,Q as se,a1 as ka,ao as qa,aI as va,aJ as ai,y as Fa,A as ii,aK as si,aL as ri,aM as na,ak as oi,aN as li,aO as ci,an as fi,z as di,aP as ma,N as ui,R as pi,aQ as hi,aR as vi,aS as Oa,aT as mi,aU as gi,aV as _i,P as wi,aW as bi,aX as yi,b as ot,O as Ra,aG as xi,p as _n,j as wn,s as y,k as L,l as q,aY as $e,aZ as ga,i as Ke,U as P,t as De,a_ as ce,ab as Ln,a$ as Ha}from"../chunks/CkcJ_p-v.js";import{e as R,s as We}from"../chunks/EstrOUTn.js";import{i as On}from"../chunks/BeJGQpUk.js";import{w as de,o as _a,a as Mi,g as Gt}from"../chunks/BzLubvRb.js";import{i as le,s as Rn,a as G,b as Sa,d as aa}from"../chunks/CgM4jgzu.js";function ki(n,i,a){for(var l=[],p=i.length,s=0;s<p;s++)li(i[s].e,l,!0);ci(l,()=>{var f=l.length===0&&a!==null;if(f){var m=a,x=m.parentNode;fi(x),x.append(m),n.items.clear(),Qe(n,i[0].prev,i[p-1].next)}for(var h=0;h<p;h++){var c=i[h];f||(n.items.delete(c.k),Qe(n,c.prev,c.next)),di(c.e,!f)}n.first===i[0]&&(n.first=i[0].prev)})}function Si(n,i,a,l,p,s=null){var f=n,m=new Map,x=null;Ne&&Va();var h=null,c=Ja(()=>{var r=a();return va(r)?r:r==null?[]:qa(r)}),w,_=!0;function k(){Ci(g,w,f,i,l),h!==null&&(w.length===0?(h.fragment?(f.before(h.fragment),h.fragment=null):Fa(h.effect),S.first=h.effect):ii(h.effect,()=>{h=null}))}var S=Ba(()=>{w=t(c);var r=w.length;let v=!1;if(Ne){var u=Za(f)===Ka;u!==(r===0)&&(f=xa(),Ma(f),ta(!1),v=!0)}for(var D=new Set,H=vt,$=null,U=ni(),b=0;b<r;b+=1){Ne&&En.nodeType===Qa&&En.data===ei&&(f=En,v=!0,ta(!1));var I=w[b],e=l(I,b),ne=_?null:m.get(e);ne?(ti(ne.v,I),ne.i=b,U&&H.skipped_effects.delete(ne.e)):(ne=Pi(_?f:null,$,I,e,b,p,i,a),_&&(ne.o=!0,$===null?x=ne:$.next=ne,$=ne),m.set(e,ne)),D.add(e)}if(r===0&&s&&!h)if(_)h={fragment:null,effect:la(()=>s(f))};else{var z=document.createDocumentFragment(),Me=La();z.append(Me),h={fragment:z,effect:la(()=>s(Me))}}if(Ne&&r>0&&Ma(xa()),!_)if(U){for(const[j,B]of m)D.has(j)||H.skipped_effects.add(B.e);H.oncommit(k),H.ondiscard(()=>{})}else k();v&&ta(!0),t(c)}),g={effect:S,items:m,first:x};_=!1,Ne&&(f=En)}function Ci(n,i,a,l,p){var s=i.length,f=n.items,m=n.first,x,h=null,c=[],w=[],_,k,S,g;for(g=0;g<s;g+=1){if(_=i[g],k=p(_,g),S=f.get(k),n.first??=S,!S.o){S.o=!0;var r=h?h.next:m;Qe(n,h,S),Qe(n,S,r),ia(S,r,a),h=S,c=[],w=[],m=h.next;continue}if((S.e.f&na)!==0&&Fa(S.e),S!==m){if(x!==void 0&&x.has(S)){if(c.length<w.length){var v=w[0],u;h=v.prev;var D=c[0],H=c[c.length-1];for(u=0;u<c.length;u+=1)ia(c[u],v,a);for(u=0;u<w.length;u+=1)x.delete(w[u]);Qe(n,D.prev,H.next),Qe(n,h,D),Qe(n,H,v),m=v,h=H,g-=1,c=[],w=[]}else x.delete(S),ia(S,m,a),Qe(n,S.prev,S.next),Qe(n,S,h===null?n.first:h.next),Qe(n,h,S),h=S;continue}for(c=[],w=[];m!==null&&m.k!==k;)(m.e.f&na)===0&&(x??=new Set).add(m),w.push(m),m=m.next;if(m===null)continue;S=m}c.push(S),h=S,m=S.next}let $=f.size>s;if(m!==null||x!==void 0){for(var U=x===void 0?[]:qa(x);m!==null;)(m.e.f&na)===0&&U.push(m),m=m.next;var b=U.length;if($=f.size-b>s,b>0){var I=null;ki(n,U,I)}}if($)for(const e of f.values())e.o||(Qe(n,h,e),h=e);n.effect.last=h&&h.e}function Pi(n,i,a,l,p,s,f,m){var x=(f&si)!==0,h=(f&ri)===0,c=x?h?se(a,!1,!1):ka(a):a,w=(f&ai)===0?p:ka(p),_={i:w,v:c,k:l,a:null,e:null,o:!1,prev:i,next:null};try{if(n===null){var k=document.createDocumentFragment();k.append(n=La())}return _.e=la(()=>s(n,c,w,m)),i!==null&&(i.next=_),_}finally{}}function ia(n,i,a){for(var l=n.next?n.next.e.nodes_start:a,p=i?i.e.nodes_start:a,s=n.e.nodes_start;s!==null&&s!==l;){var f=oi(s);p.before(s),s=f}}function Qe(n,i,a){i===null?(n.first=a,n.effect.first=a&&a.e):(i.e.next&&(i.e.next.prev=null),i.next=a,i.e.next=a&&a.e),a!==null&&(a.e.prev&&(a.e.prev.next=null),a.prev=i,a.e.prev=i&&i.e)}function za(n){var i,a,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var p=n.length;for(i=0;i<p;i++)n[i]&&(a=za(n[i]))&&(l&&(l+=" "),l+=a)}else for(a in n)n[a]&&(l&&(l+=" "),l+=a);return l}function Ii(){for(var n,i,a=0,l="",p=arguments.length;a<p;a++)(n=arguments[a])&&(i=za(n))&&(l&&(l+=" "),l+=i);return l}function Ca(n){return typeof n=="object"?Ii(n):n??""}const Pa=[...` 	
\r\fÂ \v\uFEFF`];function Ti(n,i,a){var l=n==null?"":""+n;if(i&&(l=l?l+" "+i:i),a){for(var p in a)if(a[p])l=l?l+" "+p:p;else if(l.length)for(var s=p.length,f=0;(f=l.indexOf(p,f))>=0;){var m=f+s;(f===0||Pa.includes(l[f-1]))&&(m===l.length||Pa.includes(l[m]))?l=(f===0?"":l.substring(0,f))+l.substring(m+1):f=m}}return l===""?null:l}function $i(n,i){return n==null?null:String(n)}function qn(n,i,a,l,p,s){var f=n.__className;if(Ne||f!==a||f===void 0){var m=Ti(a,l,s);(!Ne||m!==n.getAttribute("class"))&&(m==null?n.removeAttribute("class"):n.className=m),n.__className=a}else if(s&&p!==s)for(var x in s){var h=!!s[x];(p==null||h!==!!p[x])&&n.classList.toggle(x,h)}return s}function rt(n,i,a,l){var p=n.__style;if(Ne||p!==i){var s=$i(i);(!Ne||s!==n.getAttribute("style"))&&(s==null?n.removeAttribute("style"):n.style.cssText=s),n.__style=i}return l}function Wa(n,i,a=!1){if(n.multiple){if(i==null)return;if(!va(i))return hi();for(var l of n.options)l.selected=i.includes(pn(l));return}for(l of n.options){var p=pn(l);if(vi(p,i)){l.selected=!0;return}}(!a||i!==void 0)&&(n.selectedIndex=-1)}function Di(n){var i=new MutationObserver(()=>{Wa(n,n.__value)});i.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),pi(()=>{i.disconnect()})}function Na(n,i,a=i){var l=new WeakSet,p=!0;ma(n,"change",s=>{var f=s?"[selected]":":checked",m;if(n.multiple)m=[].map.call(n.querySelectorAll(f),pn);else{var x=n.querySelector(f)??n.querySelector("option:not([disabled])");m=x&&pn(x)}a(m),vt!==null&&l.add(vt)}),ui(()=>{var s=i();if(n===document.activeElement){var f=Oa??vt;if(l.has(f))return}if(Wa(n,s,p),p&&s===void 0){var m=n.querySelector(":checked");m!==null&&(s=pn(m),a(s))}n.__value=s,p=!1}),Di(n)}function pn(n){return"__value"in n?n.__value:n.value}const Ei=Symbol("is custom element"),Ai=Symbol("is html");function Tt(n){if(Ne){var i=!1,a=()=>{if(!i){if(i=!0,n.hasAttribute("value")){var l=n.value;Fn(n,"value",null),n.value=l}if(n.hasAttribute("checked")){var p=n.checked;Fn(n,"checked",null),n.checked=p}}};n.__on_r=a,wi(a),bi()}}function Ia(n,i){var a=wa(n);a.value===(a.value=i??void 0)||n.value===i&&(i!==0||n.nodeName!=="PROGRESS")||(n.value=i??"")}function Li(n,i){var a=wa(n);a.checked!==(a.checked=i??void 0)&&(n.checked=i)}function Fn(n,i,a,l){var p=wa(n);Ne&&(p[i]=n.getAttribute(i),i==="src"||i==="srcset"||i==="href"&&n.nodeName==="LINK")||p[i]!==(p[i]=a)&&(i==="loading"&&(n[yi]=a),a==null?n.removeAttribute(i):typeof a!="string"&&qi(n).includes(i)?n[i]=a:n.setAttribute(i,a))}function wa(n){return n.__attributes??={[Ei]:n.nodeName.includes("-"),[Ai]:n.namespaceURI===mi}}var Ta=new Map;function qi(n){var i=n.getAttribute("is")||n.nodeName,a=Ta.get(i);if(a)return a;Ta.set(i,a=[]);for(var l,p=n,s=Element.prototype;s!==p;){l=_i(p);for(var f in l)l[f].set&&a.push(f);p=gi(p)}return a}function $a(n,i,a=i){var l=new WeakSet;ma(n,"input",async p=>{var s=p?n.defaultValue:n.value;if(s=sa(n)?ra(s):s,a(s),vt!==null&&l.add(vt),await xi(),s!==(s=i())){var f=n.selectionStart,m=n.selectionEnd,x=n.value.length;if(n.value=s??"",m!==null){var h=n.value.length;f===m&&m===x&&h>x?(n.selectionStart=h,n.selectionEnd=h):(n.selectionStart=f,n.selectionEnd=Math.min(m,h))}}}),(Ne&&n.defaultValue!==n.value||ot(i)==null&&n.value)&&(a(sa(n)?ra(n.value):n.value),vt!==null&&l.add(vt)),Ra(()=>{var p=i();if(n===document.activeElement){var s=Oa??vt;if(l.has(s))return}sa(n)&&p===ra(n.value)||n.type==="date"&&!p&&!n.value||p!==n.value&&(n.value=p??"")})}function Da(n,i,a=i){ma(n,"change",l=>{var p=l?n.defaultChecked:n.checked;a(p)}),(Ne&&n.defaultChecked!==n.checked||ot(i)==null)&&a(n.checked),Ra(()=>{var l=i();n.checked=!!l})}function sa(n){var i=n.type;return i==="number"||i==="range"}function ra(n){return n===""?null:+n}function we(n){return function(...i){var a=i[0];return a.stopPropagation(),n?.apply(this,i)}}function bt(n){return function(...i){var a=i[0];return a.preventDefault(),n?.apply(this,i)}}function lt(n,i){var a=n.$$events?.[i.type],l=va(a)?a.slice():a==null?[]:[a];for(var p of l)p.call(this,i)}const ba=de(null),Xt=de(null),Ea=de(null),Et=de(!1),ct=de(0),ca=de(1),$t=de(!1),mn=de(null),gn=de(0),hn=de(1),Hn=de([]),fa=de(!1),yt=de(!1),At=de(!1),da=de({translateX:0,translateY:0,scale:1}),un=de({active:!1,progress:0,startTime:0}),ua=de(null),pa=de(!1),Ze=de(50),ha=de(!1),Lt=de(null),Dt=de(0),vn=de("move-center"),Ut=de(!1),Yt=de("#000000");var Fi=he('<label>Choose image: <input type="file" accept="image/*"/></label>');function Oi(n,i){_n(i,!1);function a(s){const f=s.target.files[0];if(!f)return;const m=URL.createObjectURL(f);mn.set(null),gn.set(0),Hn.set([]),At.set(!1),yt.set(!1),Dt.set(0),vn.set("move-center"),ct.set(0),hn.set(1),Lt.set(null),$t.set(!1),Ut.set(!1),Yt.set("#000000"),ba.set(m),Xt.set(m),Et.set(!1)}On();var l=Fi(),p=y(L(l));q(l),R("change",p,a),A(n,l),wn()}var Ri=he('<div class="preview svelte-1th6cal"><img alt="Selected disc preview" class="svelte-1th6cal"/></div>');function Hi(n,i){_n(i,!1);const a=()=>G(ba,"$previewUrl",l),[l,p]=Rn(),s=se();$e(()=>a(),()=>{P(s,a())}),ga();var f=ht(),m=Ke(f);{var x=h=>{var c=Ri(),w=L(c);q(c),De(()=>Fn(w,"src",t(s))),A(h,c)};le(m,h=>{t(s)&&h(x)})}A(n,f),wn(),p()}var zi=he('<div class="speed-hud svelte-byh4af"> </div>'),Wi=he('<div class="crosshair-overlay svelte-byh4af"><div class="crosshair-vertical svelte-byh4af"></div> <div class="crosshair-horizontal svelte-byh4af"></div> <div class="crosshair-center-dot svelte-byh4af"></div> <div class="crosshair-circle svelte-byh4af"></div></div>'),Ni=he('<div class="edit-mode-indicator svelte-byh4af"><!></div> <!> <div class="frame-counter svelte-byh4af"><div class="frame-info svelte-byh4af"><div style="font-size: 0.7em; color: #aaa; margin-bottom: 4px; text-align: center;" class="svelte-byh4af">How many scenes on the disc?</div> <div style="font-size: 0.65em; color: #888; text-align: center; margin-bottom: 8px;" class="svelte-byh4af">Set frame count = number of animation scenes</div></div> <div style="display: flex; align-items: center; gap: 8px;" class="svelte-byh4af"><button class="frame-btn svelte-byh4af" title="Decrease frame count">âˆ’</button> <div class="frame-display svelte-byh4af"><div class="frame-number svelte-byh4af"> </div> <div class="frame-label svelte-byh4af">frames</div></div> <button class="frame-btn svelte-byh4af" title="Increase frame count">+</button></div></div>',1),ji=he('<div><canvas class="svelte-byh4af"></canvas> <!> <!></div>');function Gi(n,i){_n(i,!1);const a=()=>G(yt,"$editMode",$),l=()=>G(Et,"$isPlaying",$),p=()=>G(Xt,"$imageUrl",$),s=()=>G(Lt,"$gifFrameCount",$),f=()=>G(ha,"$isMobile",$),m=()=>G(ct,"$rotationSpeed",$),x=()=>G(vn,"$editModeInteraction",$),h=()=>G(Dt,"$sliceRotationAngle",$),c=()=>G(un,"$detectionAnimation",$),w=()=>G(ca,"$rotationDirection",$),_=()=>G(Ut,"$fillOuterCircle",$),k=()=>G(mn,"$detectedCircle",$),S=()=>G(Yt,"$outerCircleFillColor",$),g=()=>G(fa,"$overlayVisible",$),r=()=>G(gn,"$detectedCount",$),v=()=>G(Hn,"$detectedPositions",$),u=()=>G(At,"$confirmedDetection",$),D=()=>G(pa,"$flickerEnabled",$),H=()=>G(Ze,"$flickerFrequency",$),[$,U]=Rn();let b=se(),I=se(),e,ne=0,z=se(1);const Me=1,j=4;let B=se(0),K=se(0);const re=new Map;let Be=1,Le=0,Ve=0,et=0,ke=se(),mt=1,xt=0,ft=se(0),gt=0,tt=1,nt=se(!1),je,N=0,Mt=0,kt=0,qt=0,Ft=0,St=se(null),Bt=se(null),Ct=!1,bn=0,Vt=0,Y=se(null),at=se(!1),it;function yn(d){P(at,!1),P(Y,new Image),ce(Y,t(Y).crossOrigin="anonymous"),ce(Y,t(Y).onload=()=>{console.log("Image loaded:",d,"Size:",t(Y).width,"x",t(Y).height),P(at,!0),Jt(),Se()}),ce(Y,t(Y).onerror=C=>{console.error("Erreur chargement:",d,C),P(at,!1)}),ce(Y,t(Y).src=d)}function Jt(){if(!t(I)||!t(b))return;const d=t(b).getBoundingClientRect(),C=window.devicePixelRatio||1;if(t(Y)&&t(Y).width&&t(Y).height){const V=t(Y).width,ae=t(Y).height,oe=Math.min(1400,Math.max(150,Math.round(d.width*Math.sqrt(V*V+ae*ae)/V)));ce(b,t(b).style.height=oe+"px");const J=t(b).getBoundingClientRect();ce(I,t(I).style.width=J.width+"px"),ce(I,t(I).style.height=J.height+"px"),ce(I,t(I).width=Math.round(J.width*C)),ce(I,t(I).height=Math.round(J.height*C))}else ce(I,t(I).style.width=d.width+"px"),ce(I,t(I).style.height=d.height+"px"),ce(I,t(I).width=Math.round(d.width*C)),ce(I,t(I).height=Math.round(d.height*C));e&&e.setTransform(C,0,0,C,0,0),Se()}_a(()=>{const d=()=>{const V="ontouchstart"in window||navigator.maxTouchPoints>0||window.innerWidth<768;ha.set(V)};if(d(),window.addEventListener("resize",d),t(I)){if(ua.set(t(I)),e=t(I).getContext("2d"),t(b)){const C=()=>{f()?t(z)>1||a()?ce(b,t(b).style.touchAction="none"):ce(b,t(b).style.touchAction="pan-y"):ce(b,t(b).style.touchAction="none")};C(),da.subscribe(C),yt.subscribe(C)}t(b)&&t(b).addEventListener("wheel",Kt,{passive:!1}),Jt(),it=new ResizeObserver(()=>Jt()),t(b)&&it.observe(t(b)),t(b)&&(t(b).addEventListener("pointerdown",Ot),t(b).addEventListener("pointermove",dt),t(b).addEventListener("pointerup",Zt),t(b).addEventListener("pointerleave",xn))}return()=>{it&&it.disconnect(),window.removeEventListener("resize",d),document.removeEventListener("pointermove",Qt),document.removeEventListener("pointerup",en)}});function Ot(d){if(!t(b))return;(a()||t(z)>1)&&(d.preventDefault(),d.stopPropagation()),t(b).setPointerCapture(d.pointerId),re.set(d.pointerId,{x:d.clientX,y:d.clientY});const C=Date.now(),V=d.clientX-Mt,ae=d.clientY-kt,oe=Math.sqrt(V*V+ae*ae);if(C-N<300&&oe<50){a()?(vn.update(J=>J==="move-center"?"rotate-slices":"move-center"),Se()):Et.update(J=>!J),re.clear(),N=0;return}if(N=C,Mt=d.clientX,kt=d.clientY,re.size===1&&(Ve=d.clientX,et=d.clientY,gt=d.clientY,tt=m()||1,a()&&x()==="rotate-slices")){const J=t(b).getBoundingClientRect(),ve=t(I).clientWidth,Pe=t(I).clientHeight,Ie=J.left+ve/2,Ce=J.top+Pe/2,F=d.clientX-Ie,Z=d.clientY-Ce;Ft=Math.atan2(Z,F),qt=h()}if(re.size===2){const J=Array.from(re.values());Be=t(z),mt=t(z),Le=Math.hypot(J[0].x-J[1].x,J[0].y-J[1].y)}}function dt(d){if(t(b)){if((a()||t(z)>1)&&re.has(d.pointerId)&&(d.preventDefault(),d.stopPropagation()),re.has(d.pointerId)&&re.set(d.pointerId,{x:d.clientX,y:d.clientY}),re.size===2){const C=Array.from(re.values()),V=C[0],ae=C[1],J=Math.hypot(V.x-ae.x,V.y-ae.y)/Le;let ve=Math.max(Me,Math.min(j,Be*J));f()&&(mt=ve,ve=t(z)+(mt-t(z))*.3);const Pe={x:(V.x+ae.x)/2,y:(V.y+ae.y)/2},Ie=t(I).clientWidth,Ce=t(I).clientHeight,F=t(b).getBoundingClientRect(),Z=Pe.x-(F.left+Ie/2)-t(B),W=Pe.y-(F.top+Ce/2)-t(K),E=t(z),O=ve;if(P(B,t(B)-(O/E-1)*Z),P(K,t(K)-(O/E-1)*W),P(z,ve),f()){const T=Date.now();T-xt>16&&(Se(),xt=T)}else Se();P(nt,!0),clearTimeout(je);return}if(re.size===1){if(re.values().next().value,a()&&x()==="rotate-slices"){const C=t(b).getBoundingClientRect(),V=t(I).clientWidth,ae=t(I).clientHeight,oe=C.left+V/2,J=C.top+ae/2,ve=d.clientX-oe,Pe=d.clientY-J,Ce=Math.atan2(Pe,ve)-Ft;Dt.set(qt+Ce),Se();return}if(t(z)>1||a()&&x()==="move-center"){const C=d.clientX-Ve,V=d.clientY-et;P(B,t(B)+C),P(K,t(K)+V),Ve=d.clientX,et=d.clientY,Se();return}else if(!f()){const C=gt-d.clientY,ae=Math.round(C*8),oe=Math.max(10,Math.min(1e4,Math.round(tt+ae)));ct.set(oe),$t.set(!0),P(nt,!0),clearTimeout(je)}}}}function Zt(d){if(t(b)){try{t(b).releasePointerCapture(d.pointerId)}catch{}clearTimeout(je),P(nt,!0),je=setTimeout(()=>{P(nt,!1)},4e3),re.delete(d.pointerId),re.size===0&&(clearTimeout(je),P(nt,!1),Le=0,mt=t(z))}}function xn(){clearTimeout(je),P(nt,!0),je=setTimeout(()=>{P(nt,!1)},4e3)}function Kt(d){if(!t(b)||!d.ctrlKey&&!d.metaKey)return;d.preventDefault();const V=1+(-d.deltaY>0?.1:-.1),ae=Math.max(Me,Math.min(j,t(z)*V)),oe=t(b).getBoundingClientRect(),J=d.clientX-(oe.left+t(I).clientWidth/2)-t(B),ve=d.clientY-(oe.top+t(I).clientHeight/2)-t(K);P(B,t(B)-(ae/t(z)-1)*J),P(K,t(K)-(ae/t(z)-1)*ve),P(z,ae),Se()}function Mn(d){f()&&(d.stopPropagation(),d.preventDefault(),Ct=!0,bn=d.clientX-(t(St)||0),Vt=d.clientY-(t(Bt)||0),document.addEventListener("pointermove",Qt),document.addEventListener("pointerup",en))}function Qt(d){Ct&&(d.stopPropagation(),d.preventDefault(),P(St,d.clientX-bn),P(Bt,d.clientY-Vt))}function en(d){Ct&&(d.stopPropagation(),d.preventDefault()),Ct=!1,document.removeEventListener("pointermove",Qt),document.removeEventListener("pointerup",en)}Mi(()=>{t(ke)&&cancelAnimationFrame(t(ke)),it&&it.disconnect(),je&&clearTimeout(je),t(b)&&(t(b).removeEventListener("pointerdown",Ot),t(b).removeEventListener("pointermove",dt),t(b).removeEventListener("pointerup",Zt),t(b).removeEventListener("pointerleave",xn),t(b)&&t(b).removeEventListener("wheel",Kt)),ua.set(null)});function Rt(d){const C=l()||c().active||a();if(!C||!t(at)){P(ft,0),!C&&t(ke)&&(cancelAnimationFrame(t(ke)),P(ke,null));return}t(ft)||P(ft,d);const V=d-t(ft);if(P(ft,d),l()&&!a()){const ae=m()||0;ne+=ae*(w()||1)*(V/1e3)}Se(),P(ke,requestAnimationFrame(Rt))}function Se(){if(!t(at)||!e||!t(Y)||!t(I)){console.log("DrawFrame skipped:",{imageReady:t(at),ctx:!!e,htmlImg:!!t(Y),canvas:!!t(I)});return}const d=t(I).clientWidth,C=t(I).clientHeight;e.clearRect(0,0,d,C),_()&&k()&&(e.save(),e.fillStyle=S(),e.fillRect(0,0,d,C),e.restore()),e.save();const V=t(Y).width/t(Y).height,ae=d/C;let oe,J;V>ae?(oe=d,J=d/V):(J=C,oe=C*V);const ve=oe*t(z),Pe=J*t(z);let Ie=0,Ce=0;if(k()){const F=oe/t(Y).width;Ie=(k().x-t(Y).width/2)*F*t(z),Ce=(k().y-t(Y).height/2)*F*t(z)}if(e.translate(d/2+t(B),C/2+t(K)),e.translate(Ie,Ce),e.rotate(ne*Math.PI/180),e.translate(-Ie,-Ce),e.drawImage(t(Y),-ve/2,-Pe/2,ve,Pe),g()&&k())try{const F=k(),Z=oe*t(z)/t(Y).width,W=(F.x-t(Y).width/2)*Z,E=(F.y-t(Y).height/2)*Z,O=F.r*Z,T=Date.now()/1e3,me=T*Math.PI*.5%(Math.PI*2),ye=T*2.5*Math.PI*2,ie=Math.abs(Math.sin(ye)),_t=T*.8%2,Wn=Math.sin(T*3)*.1,Cn=Math.tan(T*.5)*.05,Nn=O*(.8+_t*.4+Wn+Math.min(Math.max(Cn,-.1),.1)),Pn=Math.max(0,.3*(1-_t/2)*ie);e.beginPath(),e.strokeStyle=`rgba(0, 255, 255, ${Pn})`,e.lineWidth=2,e.arc(W,E,Nn,0,Math.PI*2),e.stroke();const In=16;for(let fe=0;fe<In;fe++){const be=fe/In*Math.PI*2,qe=Math.sin(T*2+fe*.5)*.2,Ee=be+qe,Ge=O*(.7+Math.sin(T*3+fe)*.2)*ie;e.save(),e.translate(W,E),e.strokeStyle=`rgba(0, 255, 255, ${ie*.3})`,e.lineWidth=1,e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(Ee)*Ge,Math.sin(Ee)*Ge),e.stroke(),e.restore()}e.save(),e.translate(W,E),e.rotate(me);const Tn=.4+ie*.3;e.strokeStyle=`rgba(0, 255, 255, ${Tn})`,e.lineWidth=2+ie*2,e.beginPath(),e.moveTo(0,0),e.lineTo(O*1.1,0),e.stroke(),e.restore(),e.strokeStyle=`rgba(0, 255, 255, ${.1+ie*.15})`,e.lineWidth=1;for(let fe=0;fe<8;fe++){const be=fe/8*Math.PI*2,qe=Math.tan(T+fe*.3)*.1,Ee=O*(1+Math.min(Math.max(qe,-.15),.15));if(e.beginPath(),e.moveTo(W,E),e.lineTo(W+Math.cos(be)*Ee,E+Math.sin(be)*Ee),e.stroke(),fe%2===0){const Ge=Math.round(be*180/Math.PI%360),jt=O*1.12,o=W+Math.cos(be)*jt,M=E+Math.sin(be)*jt;e.font="bold 10px monospace",e.fillStyle=`rgba(0, 255, 255, ${.7*ie})`,e.textAlign="center",e.textBaseline="middle",e.fillText(`${Ge}Â°`,o,M)}}const tn=.6+ie*.3;e.font="11px monospace",e.textAlign="left";const zt=W+O*.3,nn=E-O*.8,$n=14,jn=(Math.sin(T*3)*100).toFixed(1),Gn=(Math.tan(T*.8)*10).toFixed(1),an=[`r = ${Math.round(F.r)}px`,`Î¸ = ${Math.round(me*180/Math.PI%360)}Â°`,`Ï‰ = ${m()}Â°/s`,`sin(t) = ${jn}`,`tan(t) = ${Gn}`,`n = ${r()||0}`];e.fillStyle=`rgba(0, 0, 0, ${.7+ie*.2})`,e.fillRect(zt-2,nn-8,110,an.length*$n),an.forEach((fe,be)=>{const qe=nn+be*$n,Ee=["rgba(0, 255, 255, ","rgba(255, 0, 255, ","rgba(255, 255, 0, "],Ge=tn+Math.sin(T*2+be)*.2;e.fillStyle=Ee[be%3]+Ge+")",e.fillText(fe,zt,qe)}),e.font="bold 10px sans-serif",e.textAlign="center";const Wt=E+O+25;e.fillStyle=`rgba(0, 0, 0, ${.7+ie*.2})`,e.fillRect(W-70,Wt-8,140,16),e.fillStyle=`rgba(100, 255, 200, ${.8+ie*.2})`,e.fillText("STROBOSCOPIC ANALYSIS",W,Wt);for(let fe=0;fe<6;fe++){const be=fe/6*Math.PI*2+T*.3,qe=Math.sin(T*4+fe*1.5)*.1,Ee=O*(1+qe),Ge=W+Math.cos(be)*Ee,jt=E+Math.sin(be)*Ee,o=2+ie*2;e.beginPath(),e.arc(Ge,jt,o,0,Math.PI*2),e.fillStyle=fe%2===0?`rgba(0, 255, 255, ${ie})`:`rgba(255, 0, 255, ${ie})`,e.fill()}e.beginPath(),e.lineWidth=2+ie,e.strokeStyle=`rgba(0, 255, 255, ${.8+ie*.2})`,e.arc(W,E,O,0,Math.PI*2),e.stroke(),e.lineWidth=2;const Nt=Math.max(15,O*.15)*(1+ie*.3);if(e.beginPath(),e.strokeStyle=`rgba(0, 255, 255, ${.9*ie})`,e.moveTo(W-Nt,E),e.lineTo(W+Nt,E),e.moveTo(W,E-Nt),e.lineTo(W,E+Nt),e.stroke(),v()&&v().length){e.fillStyle=`rgba(255, 0, 255, ${.9*ie})`;for(const fe of v()){const be=fe.angle,qe=W+Math.cos(be)*O,Ee=E+Math.sin(be)*O,Ge=2.5+ie*1.5;e.beginPath(),e.arc(qe,Ee,Ge,0,Math.PI*2),e.fill()}}}catch(F){console.warn("overlay draw failed",F)}if(a()&&!u())try{let F;if(a()){const Z=c().startTime||0;F=(Z>0?Date.now()-Z:Date.now())%2e3/2e3}else F=Math.min(1,(Date.now()-c().startTime)/2e3);if(e.fillStyle=a()?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.3)",e.fillRect(-oe/2-100,-J/2-100,oe+200,J+200),k()){const Z=k(),W=oe*t(z)/t(Y).width,E=(Z.x-t(Y).width/2)*W,O=(Z.y-t(Y).height/2)*W,T=Z.r*W;e.strokeStyle=`rgba(100, 200, 255, ${.8*(1-F)})`,e.lineWidth=2;for(let ie=0;ie<3;ie++){const _t=T*(.3+F*1.2+ie*.3);e.beginPath(),e.arc(E,O,_t,0,Math.PI*2),e.stroke()}e.strokeStyle="rgba(100, 200, 255, 0.9)",e.lineWidth=3;const me=F*Math.PI*6,Te=T*1.8;e.beginPath(),e.moveTo(E,O),e.lineTo(E+Math.cos(me)*Te,O+Math.sin(me)*Te),e.stroke();const ye=4+Math.sin(F*Math.PI*4)*2;e.fillStyle=`rgba(100, 200, 255, ${.9*Math.sin(F*Math.PI)})`,e.beginPath(),e.arc(E,O,ye,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(100, 200, 255, ${Math.sin(F*Math.PI)})`,e.font="bold 14px sans-serif",e.textAlign="center",e.fillText("SCANNING...",E,O-T-20)}else{const Z=Math.max(oe,J)/2;e.strokeStyle=`rgba(100, 200, 255, ${.6})`,e.lineWidth=2;for(let E=0;E<4;E++){const O=Z*(F+E*.25)%1,T=1-O;e.strokeStyle=`rgba(100, 200, 255, ${T*.6})`,e.beginPath(),e.arc(0,0,O*Z,0,Math.PI*2),e.stroke()}e.strokeStyle="rgba(100, 200, 255, 0.8)",e.lineWidth=3;const W=F*Math.PI*4;e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(W)*Z,Math.sin(W)*Z),e.stroke(),e.fillStyle=`rgba(100, 200, 255, ${.8+.2*Math.sin(F*Math.PI*4)})`,e.font="bold 18px sans-serif",e.textAlign="center",a()?x()==="move-center"?(e.fillText("âš™ï¸ EDIT MODE - ADJUST POSITION & ZOOM",0,-60),e.font="bold 16px sans-serif",e.fillStyle="rgba(255, 200, 100, 0.95)",e.fillText("ðŸŽ¯ Align crosshair with rotation center",0,-20),e.font="14px sans-serif",e.fillStyle="rgba(200, 255, 200, 0.9)",e.fillText("ðŸ‘† Drag to move  â€¢  ðŸ” Scroll/Pinch to zoom",0,20),e.font="bold 14px sans-serif",e.fillStyle="rgba(100, 255, 100, 0.9)",e.fillText('Click "Confirm Detection" when ready',0,60)):(e.fillText("ðŸ”„ ROTATE SLICES MODE",0,-60),e.font="bold 16px sans-serif",e.fillStyle="rgba(255, 200, 100, 0.95)",e.fillText("ðŸ“ Divide according to the scenes",0,-20),e.font="14px sans-serif",e.fillStyle="rgba(200, 255, 200, 0.9)",e.fillText("ðŸ‘† Drag to rotate divisions",0,20),e.font="bold 14px sans-serif",e.fillStyle="rgba(100, 255, 100, 0.9)",e.fillText("Double-tap to switch back to move mode",0,60)):(e.fillText("ANALYZING IMAGE...",0,-20),e.font="12px sans-serif",e.fillText(`${Math.round(F*100)}%`,0,10))}}catch(F){console.warn("radar animation failed",F)}if(D()&&l()){const F=1e3/H(),Z=t(ft)%F/F,W=Math.max(0,Math.min(1,(H()-40)/30));let E;if(W<.33?E=Z>.5?.85:0:W<.67?E=Math.sin(Z*Math.PI*2)*.5+.5>.6?.6:0:E=(Math.sin(Z*Math.PI*2)*.5+.5)*.3,E>.05){const ye=e.createRadialGradient(d/2,C/2,0,d/2,C/2,Math.max(d,C)*.8);ye.addColorStop(0,`rgba(0, 0, 0, ${E*.7})`),ye.addColorStop(.5,`rgba(0, 0, 0, ${E})`),ye.addColorStop(1,`rgba(0, 0, 0, ${E*.9})`),e.fillStyle=ye,e.fillRect(-d,-C,d*3,C*3),W<.5&&(e.fillStyle=`rgba(20, 20, 40, ${E*.15})`,e.fillRect(-d,-C,d*3,C*3))}e.save(),e.translate(d/2,C/2);const O=-d/2+15,T=-C/2+15;let me,Te;H()<50?(me="rgba(255, 100, 100, 0.9)",Te="FLICKER"):H()<60?(me="rgba(255, 180, 50, 0.9)",Te="THRESHOLD"):(me="rgba(100, 220, 100, 0.9)",Te="FUSED"),e.fillStyle="rgba(0, 0, 0, 0.75)",e.beginPath(),e.roundRect(O,T,85,18,4),e.fill(),e.font="bold 11px monospace",e.fillStyle=me,e.textAlign="left",e.textBaseline="middle",e.fillText(`${H()}Hz`,O+5,T+9),e.font="9px sans-serif",e.fillStyle="rgba(255, 255, 255, 0.7)",e.fillText(Te,O+42,T+9),e.restore()}if(e.restore(),a()||u()){const F=Date.now()%1e3/1e3,Z=.7+.3*Math.sin(F*Math.PI*2);e.save(),e.translate(d/2,C/2);const W=s()||r()||12;if(a()&&W>0){const O=Math.min(d,C)*.3,T=Math.PI*2/W,me=h();for(let Te=0;Te<W;Te++){const ye=Te*T-Math.PI/2+me,ie=ye+T,_t=.15+.1*(Te%2*.5);e.fillStyle=`rgba(100, 200, 255, ${_t})`,e.beginPath(),e.moveTo(0,0),e.arc(0,0,O,ye,ie),e.closePath(),e.fill(),e.strokeStyle=`rgba(100, 200, 255, ${.4*Z})`,e.lineWidth=2,e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(ye)*O,Math.sin(ye)*O),e.stroke()}e.strokeStyle=`rgba(100, 200, 255, ${.5*Z})`,e.lineWidth=3,e.beginPath(),e.arc(0,0,O,0,Math.PI*2),e.stroke()}e.strokeStyle=`rgba(255, 100, 0, ${Z})`,e.lineWidth=4;const E=Math.min(d,C)*.1;e.beginPath(),e.arc(0,0,E*.7,0,Math.PI*2),e.stroke(),e.lineWidth=3,e.beginPath(),e.moveTo(-E,0),e.lineTo(E,0),e.stroke(),e.beginPath(),e.moveTo(0,-E),e.lineTo(0,E),e.stroke(),e.beginPath(),e.arc(0,0,10+3*Math.sin(F*Math.PI*2),0,Math.PI*2),e.fillStyle=`rgba(255, 100, 0, ${Z})`,e.fill(),e.strokeStyle="rgba(255, 255, 255, 0.9)",e.lineWidth=2,e.stroke(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.fillStyle="rgba(255, 255, 255, 0.95)",e.fill(),e.restore()}}$e(()=>(a(),Dt),()=>{a()?(P(B,0),P(K,0),P(z,1),vn.set("move-center"),Se()):Dt.set(0)}),$e(()=>(t(B),t(K),t(z)),()=>{da.set({translateX:t(B),translateY:t(K),scale:t(z)})}),$e(()=>(l(),At),()=>{l()&&At.set(!1)}),$e(()=>(p(),t(Y)),()=>{p()?yn(p()):(t(Y)&&P(Y,null),P(at,!1),Se())}),$e(()=>s(),()=>{s()!==void 0&&Se()}),$e(()=>(l(),c(),a(),t(ke)),()=>{l()||c().active||a()?t(ke)||P(ke,requestAnimationFrame(Rt)):t(ke)&&(cancelAnimationFrame(t(ke)),P(ke,null),P(ft,0))}),ga(),On();var Je=ji(),kn=L(Je);Sa(kn,d=>P(I,d),()=>t(I));var Ht=y(kn,2);{var Pt=d=>{var C=zi(),V=L(C);q(C),De(ae=>{rt(C,f()&&t(St)!==null?`right: auto; top: auto; left: ${t(St)}px; top: ${t(Bt)}px;`:""),We(V,`Speed: ${ae??""}Â°/s`)},[()=>(m(),ot(()=>m().toFixed(0)))]),R("pointerdown",C,Mn),A(d,C)};le(Ht,d=>{(t(nt)||f())&&d(Pt)})}var Sn=y(Ht,2);{var zn=d=>{var C=Ni(),V=Ke(C),ae=L(V);{var oe=T=>{var me=xe("ðŸŽ¯ EDIT MODE - Drag to position â€¢ Scroll to zoom â€¢ Double-tap to rotate slices");A(T,me)},J=T=>{var me=xe("ðŸ”„ ROTATE SLICES - Drag to rotate â€¢ Double-tap to move center");A(T,me)};le(ae,T=>{x()==="move-center"?T(oe):T(J,!1)})}q(V);var ve=y(V,2);{var Pe=T=>{var me=Wi();A(T,me)};le(ve,T=>{x()==="move-center"&&T(Pe)})}var Ie=y(ve,2),Ce=y(L(Ie),2),F=L(Ce),Z=y(F,2),W=L(Z),E=L(W,!0);q(W),Ln(2),q(Z);var O=y(Z,2);q(Ce),q(Ie),De(()=>We(E,s()||12)),R("click",F,we(()=>Lt.set(Math.max(6,(s()||12)-1)))),R("pointerdown",F,we(function(T){lt.call(this,i,T)})),R("pointermove",F,we(function(T){lt.call(this,i,T)})),R("pointerup",F,we(function(T){lt.call(this,i,T)})),R("click",O,we(()=>Lt.set(Math.min(100,(s()||12)+1)))),R("pointerdown",O,we(function(T){lt.call(this,i,T)})),R("pointermove",O,we(function(T){lt.call(this,i,T)})),R("pointerup",O,we(function(T){lt.call(this,i,T)})),A(d,C)};le(Sn,d=>{a()&&d(zn)})}q(Je),Sa(Je,d=>P(b,d),()=>t(b)),De(()=>qn(Je,1,`canvas-wrapper ${a()?"edit-mode":""}`,"svelte-byh4af")),A(n,Je),wn(),U()}async function Ui(n,i,a={}){const{x:l,y:p,r:s}=i||{x:n.width/2,y:n.height/2,r:Math.min(n.width,n.height)/2},f=a.samples||720,m=a.innerOffset||-Math.max(2,Math.round(s*.06)),x=a.outerOffset||Math.max(2,Math.round(s*.06)),h=a.thresholdFactor||.6,c=document.createElement("canvas");c.width=n.width,c.height=n.height;const w=c.getContext("2d");w.drawImage(n,0,0);const _=w.getImageData(0,0,c.width,c.height).data,k=c.width,S=c.height;function g(j,B){const K=Math.round(j),re=Math.round(B);if(K<0||K>=k||re<0||re>=S)return 0;const Be=(re*k+K)*4,Le=_[Be],Ve=_[Be+1],et=_[Be+2];return .2126*Le+.7152*Ve+.0722*et}const r=new Array(f);for(let j=0;j<f;j++){const B=j/f*Math.PI*2,K=[],re=3;for(let Le=0;Le<re;Le++){const Ve=Le/(re-1),et=s+m+(x-m)*Ve,ke=l+et*Math.cos(B),mt=p+et*Math.sin(B);K.push(g(ke,mt))}const Be=K.reduce((Le,Ve)=>Le+Ve,0)/K.length;r[j]=Be}const v=r.reduce((j,B)=>j+B,0)/r.length,u=Math.sqrt(r.reduce((j,B)=>j+(B-v)**2,0)/r.length),D=v+u*h,H=r.map(j=>j>D);let $=0,U=!1,b=[],I=0;for(let j=0;j<H.length*2;j++){const B=j%H.length;if(H[B]?(I++,U=!0):(U&&(b.push(I),I=0),U=!1),j>=H.length&&!U)break}U&&I>0&&b.push(I);const e=Math.max(2,Math.round(f/360*(a.minDegrees||5))),ne=b.filter(j=>j>=e);$=ne.length;const z=[];let Me=0;for(const j of b){const B=Me%f,K=(Me+j-1)%f,re=(B+Math.floor(j/2))%f;z.push({start:B,end:K,mid:re,angle:re/f*2*Math.PI}),Me+=j+1}return{count:$,samples:r,mask:H,groups:ne,positions:z,canvas:c}}function Yi(n,i=24,a={}){const l=[],{width:p,height:s}=n,f=a.circle||{x:p/2,y:s/2,r:Math.min(p,s)/2},m=a.margin??1.05,x=Math.round(f.r*m),h=x*2,c=a.outputSize||Math.max(32,Math.round(h)),w=a.fps||24,_=typeof a.rotationSpeed=="number"?a.rotationSpeed:0,k=a.direction==null?1:a.direction,S=a.initialRotation||0,g=a.fillOuterCircle||!1,r=a.fillColor||"#000000",v=document.createElement("canvas");v.width=h,v.height=h;const u=v.getContext("2d"),D=Math.round(f.x-x),H=Math.round(f.y-x);try{u.drawImage(n,D,H,h,h,0,0,h,h)}catch{u.drawImage(n,0,0)}const U=_/w*Math.PI/180*k;Math.round(h*(a.zoom||1));for(let b=0;b<i;b++){const I=b*U+S,e=document.createElement("canvas");e.width=c,e.height=c;const ne=e.getContext("2d");g&&(ne.fillStyle=r,ne.fillRect(0,0,c,c)),ne.translate(c/2,c/2),ne.rotate(I);const z=Math.round(h*(a.zoom||1)),Me=z;ne.drawImage(v,-z/2,-Me/2,z,Me),l.push(e)}return l}function Xi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function An(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oa={exports:{}},Aa;function Bi(){return Aa||(Aa=1,(function(n,i){(function(a){n.exports=a()})(function(){return(function a(l,p,s){function f(h,c){if(!p[h]){if(!l[h]){var w=typeof An=="function"&&An;if(!c&&w)return w(h,!0);if(m)return m(h,!0);var _=new Error("Cannot find module '"+h+"'");throw _.code="MODULE_NOT_FOUND",_}var k=p[h]={exports:{}};l[h][0].call(k.exports,function(S){var g=l[h][1][S];return f(g||S)},k,k.exports,a,l,p,s)}return p[h].exports}for(var m=typeof An=="function"&&An,x=0;x<s.length;x++)f(s[x]);return f})({1:[function(a,l,p){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}l.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(c){if(!m(c)||c<0||isNaN(c))throw TypeError("n must be a positive number");return this._maxListeners=c,this},s.prototype.emit=function(c){var w,_,k,S,g,r;if(this._events||(this._events={}),c==="error"&&(!this._events.error||x(this._events.error)&&!this._events.error.length)){if(w=arguments[1],w instanceof Error)throw w;var v=new Error('Uncaught, unspecified "error" event. ('+w+")");throw v.context=w,v}if(_=this._events[c],h(_))return!1;if(f(_))switch(arguments.length){case 1:_.call(this);break;case 2:_.call(this,arguments[1]);break;case 3:_.call(this,arguments[1],arguments[2]);break;default:S=Array.prototype.slice.call(arguments,1),_.apply(this,S)}else if(x(_))for(S=Array.prototype.slice.call(arguments,1),r=_.slice(),k=r.length,g=0;g<k;g++)r[g].apply(this,S);return!0},s.prototype.addListener=function(c,w){var _;if(!f(w))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",c,f(w.listener)?w.listener:w),this._events[c]?x(this._events[c])?this._events[c].push(w):this._events[c]=[this._events[c],w]:this._events[c]=w,x(this._events[c])&&!this._events[c].warned&&(h(this._maxListeners)?_=s.defaultMaxListeners:_=this._maxListeners,_&&_>0&&this._events[c].length>_&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),typeof console.trace=="function"&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(c,w){if(!f(w))throw TypeError("listener must be a function");var _=!1;function k(){this.removeListener(c,k),_||(_=!0,w.apply(this,arguments))}return k.listener=w,this.on(c,k),this},s.prototype.removeListener=function(c,w){var _,k,S,g;if(!f(w))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;if(_=this._events[c],S=_.length,k=-1,_===w||f(_.listener)&&_.listener===w)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,w);else if(x(_)){for(g=S;g-- >0;)if(_[g]===w||_[g].listener&&_[g].listener===w){k=g;break}if(k<0)return this;_.length===1?(_.length=0,delete this._events[c]):_.splice(k,1),this._events.removeListener&&this.emit("removeListener",c,w)}return this},s.prototype.removeAllListeners=function(c){var w,_;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[c]&&delete this._events[c],this;if(arguments.length===0){for(w in this._events)w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events={},this}if(_=this._events[c],f(_))this.removeListener(c,_);else if(_)for(;_.length;)this.removeListener(c,_[_.length-1]);return delete this._events[c],this},s.prototype.listeners=function(c){var w;return!this._events||!this._events[c]?w=[]:f(this._events[c])?w=[this._events[c]]:w=this._events[c].slice(),w},s.prototype.listenerCount=function(c){if(this._events){var w=this._events[c];if(f(w))return 1;if(w)return w.length}return 0},s.listenerCount=function(c,w){return c.listenerCount(w)};function f(c){return typeof c=="function"}function m(c){return typeof c=="number"}function x(c){return typeof c=="object"&&c!==null}function h(c){return c===void 0}},{}],2:[function(a,l,p){var s,f,m,x,h;h=navigator.userAgent.toLowerCase(),x=navigator.platform.toLowerCase(),s=h.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],m=s[1]==="ie"&&document.documentMode,f={name:s[1]==="version"?s[3]:s[1],version:m||parseFloat(s[1]==="opera"&&s[4]?s[4]:s[2]),platform:{name:h.match(/ip(?:ad|od|hone)/)?"ios":(h.match(/(?:webos|android)/)||x.match(/mac|win|linux/)||["other"])[0]}},f[f.name]=!0,f[f.name+parseInt(f.version,10)]=!0,f.platform[f.platform.name]=!0,l.exports=f},{}],3:[function(a,l,p){var s,f,m,x=function(_,k){for(var S in k)h.call(k,S)&&(_[S]=k[S]);function g(){this.constructor=_}return g.prototype=k.prototype,_.prototype=new g,_.__super__=k.prototype,_},h={}.hasOwnProperty,c=[].indexOf||function(_){for(var k=0,S=this.length;k<S;k++)if(k in this&&this[k]===_)return k;return-1},w=[].slice;s=a("events").EventEmitter,m=a("./browser.coffee"),f=(function(_){var k,S;x(g,_),k={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},S={delay:500,copy:!1};function g(r){var v,u,D;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(r);for(u in k)D=k[u],(v=this.options)[u]==null&&(v[u]=D)}return g.prototype.setOption=function(r,v){if(this.options[r]=v,this._canvas!=null&&(r==="width"||r==="height"))return this._canvas[r]=v},g.prototype.setOptions=function(r){var v,u,D;u=[];for(v in r)h.call(r,v)&&(D=r[v],u.push(this.setOption(v,D)));return u},g.prototype.addFrame=function(r,v){var u,D;v==null&&(v={}),u={},u.transparent=this.options.transparent;for(D in S)u[D]=v[D]||S[D];if(this.options.width==null&&this.setOption("width",r.width),this.options.height==null&&this.setOption("height",r.height),typeof ImageData<"u"&&ImageData!==null&&r instanceof ImageData)u.data=r.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&r instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&r instanceof WebGLRenderingContext)v.copy?u.data=this.getContextData(r):u.context=r;else if(r.childNodes!=null)v.copy?u.data=this.getImageData(r):u.image=r;else throw new Error("Invalid image");return this.frames.push(u)},g.prototype.render=function(){var r,v,u;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var D,H,$;for($=[],D=0,H=this.frames.length;0<=H?D<H:D>H;0<=H?++D:--D)$.push(null);return $}).call(this),v=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(r=0,u=v;0<=u?r<u:r>u;0<=u?++r:--r)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},g.prototype.abort=function(){for(var r;r=this.activeWorkers.shift(),r!=null;)this.log("killing active worker"),r.terminate();return this.running=!1,this.emit("abort")},g.prototype.spawnWorkers=function(){var r,v,u;return r=Math.min(this.options.workers,this.frames.length),(function(){u=[];for(var D=v=this.freeWorkers.length;v<=r?D<r:D>r;v<=r?D++:D--)u.push(D);return u}).apply(this).forEach((function(D){return function(H){var $;return D.log("spawning worker "+H),$=new Worker(D.options.workerScript),$.onmessage=function(U){return D.activeWorkers.splice(D.activeWorkers.indexOf($),1),D.freeWorkers.push($),D.frameFinished(U.data)},D.freeWorkers.push($)}})(this)),r},g.prototype.frameFinished=function(r){var v,u;if(this.log("frame "+r.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[r.index]=r,this.options.globalPalette===!0&&(this.options.globalPalette=r.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(v=1,u=this.freeWorkers.length;1<=u?v<u:v>u;1<=u?++v:--v)this.renderNextFrame();return c.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},g.prototype.finishRendering=function(){var r,v,u,D,H,$,U,b,I,e,ne,z,Me,j,B,K;for(b=0,j=this.imageParts,H=0,I=j.length;H<I;H++)v=j[H],b+=(v.data.length-1)*v.pageSize+v.cursor;for(b+=v.pageSize-v.cursor,this.log("rendering finished - filesize "+Math.round(b/1e3)+"kb"),r=new Uint8Array(b),z=0,B=this.imageParts,$=0,e=B.length;$<e;$++)for(v=B[$],K=v.data,u=U=0,ne=K.length;U<ne;u=++U)Me=K[u],r.set(Me,z),u===v.data.length-1?z+=v.cursor:z+=v.pageSize;return D=new Blob([r],{type:"image/gif"}),this.emit("finished",D,r)},g.prototype.renderNextFrame=function(){var r,v,u;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return r=this.frames[this.nextFrame++],u=this.freeWorkers.shift(),v=this.getTask(r),this.log("starting frame "+(v.index+1)+" of "+this.frames.length),this.activeWorkers.push(u),u.postMessage(v)},g.prototype.getContextData=function(r){return r.getImageData(0,0,this.options.width,this.options.height).data},g.prototype.getImageData=function(r){var v;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),v=this._canvas.getContext("2d"),v.setFill=this.options.background,v.fillRect(0,0,this.options.width,this.options.height),v.drawImage(r,0,0),this.getContextData(v)},g.prototype.getTask=function(r){var v,u;if(v=this.frames.indexOf(r),u={index:v,last:v===this.frames.length-1,delay:r.delay,transparent:r.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:m.name==="chrome"},r.data!=null)u.data=r.data;else if(r.context!=null)u.data=this.getContextData(r.context);else if(r.image!=null)u.data=this.getImageData(r.image);else throw new Error("Invalid frame");return u},g.prototype.log=function(){var r;if(r=1<=arguments.length?w.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,r)},g})(s),l.exports=f},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(oa)),oa.exports}var Vi=Bi();const Ji=Xi(Vi),Zi=""+new URL("../assets/gif.worker.CjkyQP34.js",import.meta.url).href;async function Ki(n,i=24){if(!n||n.length===0)throw new Error("No frames to export");const a=new Ji({workers:2,quality:10,width:n[0].width,height:n[0].height,workerScript:Zi,repeat:0,background:null,comment:"Created with Phenakistoscope Lab - https://tclaret.github.io/phenaki-lab/"}),l=Math.round(1e3/i);for(const p of n){const s=p.width,f=p.height,m=document.createElement("canvas");m.width=s,m.height=f;const x=m.getContext("2d");x.fillStyle="#ffffff",x.fillRect(0,0,s,f),x.drawImage(p,0,0),a.addFrame(m,{delay:l,copy:!0})}return new Promise((p,s)=>{a.on("finished",function(f){const m=URL.createObjectURL(f);p(m)}),a.on("error",s),a.render()})}var Qi=he('<div class="export-overlay svelte-14nyow8" role="status" aria-live="polite"><div class="export-box svelte-14nyow8"><div class="spinner svelte-14nyow8" aria-hidden="true"></div> <div class="export-text svelte-14nyow8">Workingâ€¦ Exporting GIF â€” please wait</div></div></div>'),es=he('<button class="confirm-btn svelte-14nyow8">Confirm Detection</button> <button class="svelte-14nyow8">Cancel</button>',1),ts=he("<button>Detect Circle & Count</button>"),ns=he('<span style="background: #4a9eff; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.75em; font-weight: bold; margin-left: 4px;" class="svelte-14nyow8"> </span>'),as=he('<input type="color" style="width:40px;height:28px;border:1px solid #555;border-radius:4px;cursor:pointer;margin-left:4px;" title="Choose fill color" class="svelte-14nyow8"/>'),is=he('<div style="margin-top: 16px; padding: 12px; background: rgba(74, 158, 255, 0.08); border-radius: 6px; border: 1px solid rgba(74, 158, 255, 0.2);" class="svelte-14nyow8"><div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;" class="svelte-14nyow8"><div style="font-weight: 600; color: #4a9eff; font-size: 0.95em;" class="svelte-14nyow8">âš¡ Flicker Fusion Threshold</div> <a href="https://en.wikipedia.org/wiki/Flicker_fusion_threshold" target="_blank" rel="noopener noreferrer" style="display: flex; align-items: center; gap: 4px; font-size: 0.75em; color: #aaa; text-decoration: none; opacity: 0.7; transition: opacity 0.2s;" title="Learn more on Wikipedia" class="svelte-14nyow8"><svg width="14" height="14" viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg" class="svelte-14nyow8"><path fill="currentColor" d="M120 0C53.8 0 0 53.8 0 120s53.8 120 120 120 120-53.8 120-120S186.2 0 120 0zm0 217.5c-53.8 0-97.5-43.7-97.5-97.5S66.2 22.5 120 22.5s97.5 43.7 97.5 97.5-43.7 97.5-97.5 97.5zm-7.5-165h15v90h-15zm0 105h15v15h-15z" class="svelte-14nyow8"></path></svg> <span class="svelte-14nyow8">Wikipedia</span></a></div> <div style="font-size: 0.8em; color: #888; font-style: italic; margin-bottom: 10px;" class="svelte-14nyow8">Note: This test only affects visualization, not the exported GIF</div> <div style="margin-bottom: 12px;" class="svelte-14nyow8"><div style="font-size: 0.85em; color: #aaa; margin-bottom: 6px;" class="svelte-14nyow8">Quick Presets:</div> <div style="display: flex; gap: 6px; flex-wrap: wrap;" class="svelte-14nyow8"><button class="flicker-preset-btn svelte-14nyow8">30 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">42 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">50 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">55 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">60 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">70 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">80 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">100 Hz</button></div></div> <div style="margin-top: 12px;" class="svelte-14nyow8"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;" class="svelte-14nyow8"><span style="font-size: 0.85em; color: #ccc;" class="svelte-14nyow8">Fine Tune:</span> <span style="font-size: 1.1em; font-weight: bold; color: #4a9eff;" class="svelte-14nyow8"> </span></div> <input type="range" min="20" max="100" step="0.5" style="width: 100%; cursor: pointer;" class="svelte-14nyow8"/> <div style="display: flex; justify-content: space-between; font-size: 0.7em; color: #666; margin-top: 4px;" class="svelte-14nyow8"><span class="svelte-14nyow8">20 Hz</span> <span style="color: #4a9eff; font-weight: 500;" class="svelte-14nyow8"><!></span> <span class="svelte-14nyow8">100 Hz</span></div></div> <div style="margin-top: 10px; padding: 8px; background: rgba(74, 158, 255, 0.12); border-radius: 4px; font-size: 0.8em;" class="svelte-14nyow8"><div style="font-weight: 500; color: #4a9eff; margin-bottom: 3px;" class="svelte-14nyow8"><!></div> <div style="color: #aaa; font-size: 0.9em;" class="svelte-14nyow8"><!></div></div></div>'),ss=he('<div class="drag-handle svelte-14nyow8" title="Drag to move">â‹®â‹®</div>'),rs=he('<div><!> <div style="display:flex;gap:12px;align-items:center;" class="svelte-14nyow8"><button class="speed-btn svelte-14nyow8">âˆ’</button> <div style="text-align:center;min-width:120px;" class="svelte-14nyow8"><div class="speed-display svelte-14nyow8"> </div> <div style="font-size:11px;opacity:0.6;margin-top:4px;" class="svelte-14nyow8">Rotation Speed</div></div> <button class="speed-btn svelte-14nyow8">+</button></div></div>'),os=he('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Use +/âˆ’ buttons above to adjust speed)</em>'),ls=he('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Touch: drag up to speed up, down to slow down)</em>'),cs=he('<div class="svelte-14nyow8"><strong class="svelte-14nyow8">Circle:</strong> </div>'),fs=he('<div class="panel svelte-14nyow8"><!> <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><button> </button> <button class="svelte-14nyow8">Reverse</button> <!> <button class="svelte-14nyow8">Apply Suggested Speed</button> <div class="gif-export-group svelte-14nyow8"><button class="save-gif-btn svelte-14nyow8"> </button> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">Frames:</span> <input type="number" min="6" step="1" style="width:80px;padding:4px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <span style="font-size:11px;opacity:0.6;" title="Leave empty for auto-detection" class="svelte-14nyow8"><!></span></label> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">FPS:</span> <select style="padding:4px;border-radius:4px;border:1px solid #ccc;background:#333;color:white;" class="svelte-14nyow8"><option class="svelte-14nyow8">3 (Ultra Slow)</option><option class="svelte-14nyow8">5 (Very Slow)</option><option class="svelte-14nyow8">8 (Slow)</option><option class="svelte-14nyow8">10 (Classic)</option><option class="svelte-14nyow8">15 (Natural)</option><option class="svelte-14nyow8">20 (Smooth)</option><option class="svelte-14nyow8">24 (Cinema)</option><option class="svelte-14nyow8">30 (Fast)</option></select></label></div> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Show Overlay</span></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Flicker Effect</span> <!></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Fill Outer Circle</span> <!></label></div> <!> <!> <div style="margin-top:12px;" class="svelte-14nyow8"><div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><div class="svelte-14nyow8"><strong class="svelte-14nyow8">Current Speed:</strong> <!></div> <div style="display:flex;gap:6px;align-items:center;" class="svelte-14nyow8"><label for="manual-speed-input" style="font-size:12px;" class="svelte-14nyow8">Type speed:</label> <input id="manual-speed-input" type="number" min="1" step="1" style="width:100px;padding:6px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <button class="svelte-14nyow8">Set</button></div></div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Selected scenes count:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Suggested speed:</strong> </div> <!></div></div>');function ds(n,i){_n(i,!1);const a=()=>G(Et,"$isPlaying",u),l=()=>G(mn,"$detectedCircle",u),p=()=>G(ct,"$rotationSpeed",u),s=()=>G(Xt,"$imageUrl",u),f=()=>G(da,"$canvasTransform",u),m=()=>G(ua,"$playerCanvas",u),x=()=>G(Lt,"$gifFrameCount",u),h=()=>G(ha,"$isMobile",u),c=()=>G(gn,"$detectedCount",u),w=()=>G(hn,"$suggestedRotationSpeed",u),_=()=>G(fa,"$overlayVisible",u),k=()=>G(yt,"$editMode",u),S=()=>G(pa,"$flickerEnabled",u),g=()=>G(Ze,"$flickerFrequency",u),r=()=>G(Ut,"$fillOuterCircle",u),v=()=>G(Yt,"$outerCircleFillColor",u),[u,D]=Rn(),H=se(),$=se(),U=se(),b=se(),I=se(),e=se();let ne=se(!1),z=se(!1);async function Me(){Et.update(o=>!o)}let j=null;function B(o){o==="increase"?re():Be(),j&&clearInterval(j),j=setInterval(()=>{o==="increase"?re():Be()},100)}function K(){j&&(clearInterval(j),j=null)}function re(){ct.update(o=>Math.min(1e4,o+60)),$t.set(!0)}function Be(){ct.update(o=>Math.max(10,o-60)),$t.set(!0)}function Le(){ca.update(o=>o*-1)}async function Ve(){if(!s())return;const M=Date.now();un.set({active:!0,progress:0,startTime:M}),yt.set(!0)}async function et(){const o=s();if(!o)return;P(ne,!0);const M=f();yt.set(!1);const Q=Date.now();un.set({active:!0,progress:0,startTime:Q}),a()||requestAnimationFrame(()=>{});try{const X=await at(o);let ee=null;const te=m();if(te){const Ye=te.clientWidth,ut=te.clientHeight,Xe=X.width/X.height,sn=Ye/ut;let wt,rn;Xe>sn?(wt=Ye,rn=Ye/Xe):(rn=ut,wt=ut*Xe);const Dn=-M.translateX,Un=-M.translateY,Yn=Dn/M.scale,Xn=Un/M.scale,on=X.width/wt,ln=Yn*on+X.width/2,Bn=Xn*on+X.height/2;ee={x:ln,y:Bn,r:Math.min(X.width,X.height)/2*.9}}ee||(ee={x:X.width/2,y:X.height/2,r:Math.min(X.width,X.height)/2*.9});const ue=await Ui(X,ee,{samples:720}),Ue=2e3-(Date.now()-Q);Ue>0&&await new Promise(Ye=>setTimeout(Ye,Ue)),mn.set(ee),gn.set(ue.count),Hn.set(ue.positions||[]);const st=(ue.count>0?360/ue.count:1)*30;hn.set(st),un.set({active:!1,progress:1,startTime:Q}),At.set(!0),Et.set(!1)}finally{P(ne,!1)}}function ke(){hn.subscribe(o=>{o&&(ct.set(o),$t.set(!0))})()}function mt(){yt.set(!1),At.set(!1),un.set({active:!1,progress:0,startTime:0})}let xt=se(0);function ft(){const o=Number(t(xt))||0;o<0||(ct.set(o),$t.set(!0))}let gt=se(!1),tt=se(15);async function nt(){const o=s()||Gt(Xt);if(!o)return alert("No image loaded to export.");if(!t(U))return alert("Please detect the circle before exporting the GIF.");const M=await at(o),Q=document.createElement("canvas");Q.width=M.width,Q.height=M.height,Q.getContext("2d").drawImage(M,0,0,M.width,M.height),P(gt,!0);try{let ee;t($)&&t($)!==t(b)*2?ee=t($):t(b)&&t(b)>0?ee=Math.max(12,t(b)*2):ee=t($)||24;const te=t(U),ue=Number(Gt(ct)||0),Fe=Number(Gt(ca)||1),Ue=360/ee,Oe=Gt(Dt)||0,ge=Gt(Ut),st=Gt(Yt),Ye=Yi(Q,ee,{circle:te,margin:1.1,zoom:1,fps:t(tt),rotationSpeed:Ue*t(tt),direction:Fe,initialRotation:Oe,fillOuterCircle:ge,fillColor:st}),ut=await Ki(Ye,t(tt)),Xe=document.createElement("a");Xe.href=ut;const sn=new Date().toISOString().slice(0,19).replace(/:/g,"-");Xe.download=`phenaki-lab_${sn}_${Ye.length}frames_${t(tt)}fps.gif`,document.body.appendChild(Xe),Xe.click(),Xe.remove()}catch(ee){console.error("GIF export failed",ee),alert("GIF export failed: "+(ee&&ee.message))}finally{P(gt,!1)}}const je="phenaki.speedControlPos";let N=se({left:null,top:null}),Mt=se(!1),kt=se(!1),qt={x:0,y:0},Ft={left:0,top:0},St=0;function Bt(){try{const o=localStorage.getItem(je);o&&P(N,JSON.parse(o))}catch{}}function Ct(){try{localStorage.setItem(je,JSON.stringify(t(N)))}catch{}}function bn(o){const M=Date.now(),Q=M-St<300;if(St=M,o.target&&o.target.closest&&o.target.closest("button"))return;const X=o.target&&o.target.closest&&o.target.closest(".drag-handle"),ee=h(),te=o.target&&o.target.closest&&(o.target.classList.contains("speed-display")||o.target.closest(".speed-display"));if(!(!X&&!Q&&!ee&&!te)&&!(ee&&!X&&!te)){P(Mt,!0),P(kt,!0),qt={x:o.clientX,y:o.clientY},Ft={left:t(N).left??Math.round((window.innerWidth-200)/2),top:t(N).top??Math.round((window.innerHeight-80)/2)};try{o.target.setPointerCapture(o.pointerId)}catch{}window.addEventListener("pointermove",Vt),window.addEventListener("pointerup",Y)}}function Vt(o){if(!t(kt))return;const M=o.clientX-qt.x,Q=o.clientY-qt.y;h()||ce(N,t(N).left=Math.round(Ft.left+M)),ce(N,t(N).top=Math.round(Ft.top+Q));const X=160,ee=8,te=Math.max(ee,window.innerHeight-X-8);if(ce(N,t(N).top=Math.min(Math.max(t(N).top,ee),te)),!h()){const Ue=Math.max(8,window.innerWidth-200-8);ce(N,t(N).left=Math.min(Math.max(t(N).left,8),Ue))}}function Y(o){P(kt,!1),P(Mt,!1);try{o.target.releasePointerCapture&&o.target.releasePointerCapture(o.pointerId)}catch{}window.removeEventListener("pointermove",Vt),window.removeEventListener("pointerup",Y),Ct()}_a(()=>{Bt(),t(N).left==null&&ce(N,t(N).left=Math.round((window.innerWidth-200)/2)),t(N).top==null&&ce(N,t(N).top=Math.round((window.innerHeight-80)/2));function o(){const ue=Math.max(8,window.innerWidth-200-8),Fe=Math.max(8,window.innerHeight-80-8);t(N).left==null&&ce(N,t(N).left=ue),t(N).top==null&&ce(N,t(N).top=Fe),ce(N,t(N).left=Math.min(Math.max(t(N).left,8),ue)),ce(N,t(N).top=Math.min(Math.max(t(N).top,8),Fe))}o();const M=()=>{o(),Ct()};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)});function at(o){return new Promise((M,Q)=>{const X=new Image;X.crossOrigin="anonymous",X.onload=()=>M(X),X.onerror=Q,X.src=o})}$e(()=>a(),()=>{a()&&P(z,!0)}),$e(()=>(l(),a(),p()),()=>{P(H,!!l()&&a()&&p()>0)}),$e(()=>p(),()=>{P(xt,Number(p()||0))}),$e(()=>x(),()=>{P($,x())}),$e(()=>l(),()=>{P(U,l())}),$e(()=>c(),()=>{P(b,c())}),$e(()=>w(),()=>{P(I,w())}),$e(()=>_(),()=>{P(e,_())}),ga(),On();var it=fs(),yn=L(it);{var Jt=o=>{var M=Qi();A(o,M)};le(yn,o=>{t(gt)&&o(Jt)})}var Ot=y(yn,2),dt=L(Ot);let Zt;var xn=L(dt,!0);q(dt);var Kt=y(dt,2),Mn=y(Kt,2);{var Qt=o=>{var M=es(),Q=Ke(M),X=y(Q,2);De(()=>Q.disabled=t(ne)),R("click",Q,et),R("click",X,mt),A(o,M)},en=o=>{var M=ts();De(()=>{qn(M,1,Ca(t(U)?"":"detect-btn-required"),"svelte-14nyow8"),M.disabled=t(ne)||!s()||a()}),R("click",M,Ve),A(o,M)};le(Mn,o=>{k()?o(Qt):o(en,!1)})}var Rt=y(Mn,2),Se=y(Rt,2),Je=L(Se),kn=L(Je,!0);q(Je);var Ht=y(Je,2),Pt=y(L(Ht),2);Tt(Pt);var Sn=y(Pt,2),zn=L(Sn);{var d=o=>{var M=xe("Manual");A(o,M)},C=o=>{var M=ht(),Q=Ke(M);{var X=te=>{var ue=xe("Auto (x2)");A(te,ue)},ee=te=>{var ue=xe("Auto");A(te,ue)};le(Q,te=>{t(b)?te(X):te(ee,!1)},!0)}A(o,M)};le(zn,o=>{t($)?o(d):o(C,!1)})}q(Sn),q(Ht);var V=y(Ht,2),ae=y(L(V),2);De(()=>{t(tt),Ha(()=>{})});var oe=L(ae);oe.value=oe.__value=3;var J=y(oe);J.value=J.__value=5;var ve=y(J);ve.value=ve.__value=8;var Pe=y(ve);Pe.value=Pe.__value=10;var Ie=y(Pe);Ie.value=Ie.__value=15;var Ce=y(Ie);Ce.value=Ce.__value=20;var F=y(Ce);F.value=F.__value=24;var Z=y(F);Z.value=Z.__value=30,q(ae),q(V),q(Se);var W=y(Se,2),E=L(W);Tt(E),Ln(2),q(W);var O=y(W,2),T=L(O);Tt(T);var me=y(T,4);{var Te=o=>{var M=ns(),Q=L(M);q(M),De(()=>We(Q,`${g()??""} Hz`)),A(o,M)};le(me,o=>{S()&&o(Te)})}q(O);var ye=y(O,2),ie=L(ye);Tt(ie);var _t=y(ie,4);{var Wn=o=>{var M=as();Tt(M),$a(M,v,Q=>aa(Yt,Q)),A(o,M)};le(_t,o=>{r()&&o(Wn)})}q(ye),q(Ot);var Cn=y(Ot,2);{var Nn=o=>{var M=is(),Q=y(L(M),4),X=y(L(Q),2),ee=L(X),te=y(ee,2),ue=y(te,2),Fe=y(ue,2),Ue=y(Fe,2),Oe=y(Ue,2),ge=y(Oe,2),st=y(ge,2);q(X),q(Q);var Ye=y(Q,2),ut=L(Ye),Xe=y(L(ut),2),sn=L(Xe);q(Xe),q(ut);var wt=y(ut,2);Tt(wt);var rn=y(wt,2),Dn=y(L(rn),2),Un=L(Dn);{var Yn=pe=>{var Ae=xe("ðŸ”´ Flicker");A(pe,Ae)},Xn=pe=>{var Ae=ht(),cn=Ke(Ae);{var fn=_e=>{var Re=xe("ðŸŸ¡ Fusion");A(_e,Re)},dn=_e=>{var Re=xe("ðŸŸ¢ Smooth");A(_e,Re)};le(cn,_e=>{g()<60?_e(fn):_e(dn,!1)},!0)}A(pe,Ae)};le(Un,pe=>{g()<40?pe(Yn):pe(Xn,!1)})}q(Dn),Ln(2),q(rn),q(Ye);var on=y(Ye,2),ln=L(on),Bn=L(ln);{var ja=pe=>{var Ae=xe("âš¡ Strong Flicker");A(pe,Ae)},Ga=pe=>{var Ae=ht(),cn=Ke(Ae);{var fn=_e=>{var Re=xe("ðŸŽ¯ Critical Threshold");A(_e,Re)},dn=_e=>{var Re=ht(),Vn=Ke(Re);{var Jn=He=>{var pt=xe("âœ¨ Near-Fusion");A(He,pt)},Zn=He=>{var pt=ht(),Kn=Ke(pt);{var Qn=ze=>{var It=xe("ðŸŽ¬ Cinema (60 Hz)");A(ze,It)},ea=ze=>{var It=xe("ðŸŒŸ Ultra Smooth");A(ze,It)};le(Kn,ze=>{g()<62?ze(Qn):ze(ea,!1)},!0)}A(He,pt)};le(Vn,He=>{g()<58?He(Jn):He(Zn,!1)},!0)}A(_e,Re)};le(cn,_e=>{g()<52?_e(fn):_e(dn,!1)},!0)}A(pe,Ae)};le(Bn,pe=>{g()<48?pe(ja):pe(Ga,!1)})}q(ln);var ya=y(ln,2),Ua=L(ya);{var Ya=pe=>{var Ae=xe("Noticeable flicker - classic phenakistoscope effect");A(pe,Ae)},Xa=pe=>{var Ae=ht(),cn=Ke(Ae);{var fn=_e=>{var Re=xe("Flicker begins to fuse - critical threshold");A(_e,Re)},dn=_e=>{var Re=ht(),Vn=Ke(Re);{var Jn=He=>{var pt=xe("Subtle pulsing - artistic sweet spot");A(He,pt)},Zn=He=>{var pt=ht(),Kn=Ke(pt);{var Qn=ze=>{var It=xe("Standard cinema/TV rate - minimal flicker");A(ze,It)},ea=ze=>{var It=xe("Above fusion threshold - very smooth");A(ze,It)};le(Kn,ze=>{g()<62?ze(Qn):ze(ea,!1)},!0)}A(He,pt)};le(Vn,He=>{g()<58?He(Jn):He(Zn,!1)},!0)}A(_e,Re)};le(cn,_e=>{g()<52?_e(fn):_e(dn,!1)},!0)}A(pe,Ae)};le(Ua,pe=>{g()<48?pe(Ya):pe(Xa,!1)})}q(ya),q(on),q(M),De(()=>{rt(ee,`border: 1px solid ${g()===30?"#c92a2a":"#555"}; background: ${g()===30?"#c92a2a":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),rt(te,`border: 1px solid ${g()===42?"#ff6b6b":"#555"}; background: ${g()===42?"#ff6b6b":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),rt(ue,`border: 1px solid ${g()===50?"#ffa500":"#555"}; background: ${g()===50?"#ffa500":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),rt(Fe,`border: 1px solid ${g()===55?"#4a9eff":"#555"}; background: ${g()===55?"#4a9eff":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),rt(Ue,`border: 1px solid ${g()===60?"#51cf66":"#555"}; background: ${g()===60?"#51cf66":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),rt(Oe,`border: 1px solid ${g()===70?"#845ef7":"#555"}; background: ${g()===70?"#845ef7":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),rt(ge,`border: 1px solid ${g()===80?"#20c997":"#555"}; background: ${g()===80?"#20c997":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),rt(st,`border: 1px solid ${g()===100?"#12b886":"#555"}; background: ${g()===100?"#12b886":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),We(sn,`${g()??""} Hz`),Ia(wt,g())}),R("click",ee,()=>Ze.set(30)),R("click",te,()=>Ze.set(42)),R("click",ue,()=>Ze.set(50)),R("click",Fe,()=>Ze.set(55)),R("click",Ue,()=>Ze.set(60)),R("click",Oe,()=>Ze.set(70)),R("click",ge,()=>Ze.set(80)),R("click",st,()=>Ze.set(100)),R("input",wt,pe=>Ze.set(+pe.target.value)),A(o,M)};le(Cn,o=>{S()&&o(Nn)})}var Pn=y(Cn,2);{var In=o=>{var M=rs(),Q=L(M);{var X=ge=>{var st=ss();A(ge,st)};le(Q,ge=>{(t(Mt)||h())&&ge(X)})}var ee=y(Q,2),te=L(ee),ue=y(te,2),Fe=L(ue),Ue=L(Fe);q(Fe),Ln(2),q(ue);var Oe=y(ue,2);q(ee),q(M),De((ge,st)=>{qn(M,1,`speed-control ${t(Mt)?"dragMode":""} ${t(kt)?"dragging":""} ${h()?"mobile":""}`,"svelte-14nyow8"),rt(M,ge),We(Ue,`${st??""}Â°/s`)},[()=>(h(),t(N),ot(()=>h()?`top: ${t(N).top??Math.round((window.innerHeight-80)/2)}px;`:`left: ${t(N).left??Math.round((window.innerWidth-200)/2)}px; top: ${t(N).top??Math.round((window.innerHeight-80)/2)}px;`)),()=>(p(),ot(()=>p().toFixed(0)))]),R("pointerdown",te,bt(we(()=>B("decrease")))),R("pointerup",te,bt(we(K))),R("pointerleave",te,we(K)),R("pointercancel",te,we(K)),R("touchstart",te,bt(we(function(ge){lt.call(this,i,ge)}))),R("touchend",te,bt(we(function(ge){lt.call(this,i,ge)}))),R("pointerdown",Oe,bt(we(()=>B("increase")))),R("pointerup",Oe,bt(we(K))),R("pointerleave",Oe,we(K)),R("pointercancel",Oe,we(K)),R("touchstart",Oe,bt(we(function(ge){lt.call(this,i,ge)}))),R("touchend",Oe,bt(we(function(ge){lt.call(this,i,ge)}))),R("pointerdown",M,bn),A(o,M)};le(Pn,o=>{l()&&o(In)})}var Tn=y(Pn,2),tn=L(Tn),zt=L(tn),nn=y(L(zt)),$n=y(nn);{var jn=o=>{var M=os();A(o,M)},Gn=o=>{var M=ls();A(o,M)};le($n,o=>{h()?o(jn):o(Gn,!1)})}q(zt);var an=y(zt,2),Wt=y(L(an),2);Tt(Wt);var Nt=y(Wt,2);q(an),q(tn);var fe=y(tn,2),be=y(L(fe));q(fe);var qe=y(fe,2),Ee=y(L(qe));q(qe);var Ge=y(qe,2);{var jt=o=>{var M=cs(),Q=y(L(M));q(M),De((X,ee,te)=>We(Q,` x=${X??""}, y=${ee??""}, r=${te??""}`),[()=>(t(U),ot(()=>Math.round(t(U).x))),()=>(t(U),ot(()=>Math.round(t(U).y))),()=>(t(U),ot(()=>Math.round(t(U).r)))]),A(o,M)};le(Ge,o=>{t(U)&&o(jt)})}q(Tn),q(it),De((o,M)=>{Zt=qn(dt,1,Ca(t(U)&&!a()?"play-highlight":""),"svelte-14nyow8",Zt,{"pause-subtle":a()&&!t(U)}),dt.disabled=!s(),We(xn,a()?"Pause":"Play"),Rt.disabled=!t(I),Je.disabled=!t(H)||t(gt),We(kn,t(gt)?"â³ Exporting...":"ðŸ’¾ Save GIF"),Fn(Pt,"placeholder",t(b)?`Auto (${t(b)*2})`:"Auto (24)"),Ia(Pt,x()),Li(E,t(e)),We(nn,` ${o??""}Â°/s | `),We(be,` ${x()??12??""}`),We(Ee,` ${M??""}Â°/s`)},[()=>(p(),ot(()=>p().toFixed(0))),()=>(t(I),ot(()=>t(I)?t(I).toFixed(0):"â€”"))]),R("click",dt,Me),R("click",Kt,Le),R("click",Rt,ke),R("click",Je,nt),R("input",Pt,o=>Lt.set(o.target.value?Number(o.target.value):null)),Na(ae,()=>t(tt),o=>P(tt,o)),R("change",E,o=>fa.set(o.target.checked)),Da(T,S,o=>aa(pa,o)),Da(ie,r,o=>aa(Ut,o)),$a(Wt,()=>t(xt),o=>P(xt,o)),R("click",Nt,ft),A(n,it),wn(),D()}var us=he('<span class="current-image svelte-ai08gq" title="Currently loaded image"> </span>'),ps=he("<option> </option>"),hs=he('<div class="selector svelte-ai08gq"><label for="samples" class="svelte-ai08gq">Sample Images:</label> <!> <select id="samples" class="svelte-ai08gq"><option>-- Choose a sample --</option><!></select></div>');function vs(n,i){_n(i,!1);const a=()=>G(Ea,"$selectedImageName",l),[l,p]=Rn(),s="https://raw.githubusercontent.com/tclaret/phenakistoscope-simulator/main/images",f="https://raw.githubusercontent.com/tclaret/phenaki-lab/main/img",m=[{name:"Colors",file:"colors.png",repo:"new"},{name:"Medium 1990",file:"medium_1990_5036_7181_6_1.png",repo:"new"},{name:"Cats et Donkey",file:"optical-toy-phenakistiscope-disc-avec-cats-et-donkey-ca-1830-2efx315.jpg",repo:"new"},{name:"Dancing Man Animated",file:"Optical_Toy,_Phenakistiscope_Disc_with_Dancing_Man,_ca._1835-Animated.jpg",repo:"new"},{name:"PhÃ©nakistiscope 2",file:"phÃ©nakistiscope2.png",repo:"new"},{name:"Disque Animation 29",file:"phenakistiscope-disque-animation-29.jpg",repo:"new"},{name:"S-L1600 1",file:"s-l1600_1.jpg",repo:"new"},{name:"S-L1600",file:"s-l1600.jpg",repo:"new"},{name:"Hash 045377",file:"045377654e8832d31b850c8c4b7f948b.png",repo:"new"},{name:"Hash 062901",file:"062901e866b6aca4078ae7ff0be74c24.png",repo:"new"},{name:"Hash 0a23fe",file:"0a23fe78862b095518e46a3472238510.png",repo:"new"},{name:"Hash 14ea08",file:"14ea08f701861d967d455220ea8ca7ed.jpg",repo:"new"},{name:"Hash 1928bd",file:"1928bda6cad5fd3cd27d13ce70a502dc.jpg",repo:"new"},{name:"Hash 2d003d",file:"2d003d9b4e81a933bbfbdd55c8b1e261.png",repo:"new"},{name:"Hash 2e4cd2",file:"2e4cd248fbe57af9798c7e3c1c23b58c.jpg",repo:"new"},{name:"Hash 40bd2a",file:"40bd2aead0fc9a6e77d23871555a2998.png",repo:"new"},{name:"Hash 43efde",file:"43efdef999a2fa3200506f97d9e1ef10.png",repo:"new"},{name:"Hash 494697",file:"49469753b75adf62fe324641a2869c53.png",repo:"new"},{name:"Hash 4ca70e",file:"4ca70ec79b59935fb0eed9992045e4fb.jpg",repo:"new"},{name:"Hash 4e6b0c",file:"4e6b0c0e4fde0ad2ad8f4797304b037b.jpg",repo:"new"},{name:"Hash 4f3ab9",file:"4f3ab9e63d43062d25dfc6e4108635fb.png",repo:"new"},{name:"Hash 686b5e",file:"686b5e679b990dd996d0a4a3fb943d2d.png",repo:"new"},{name:"Hash 6f5755",file:"6f57558627d849a8d2b3f9a430bacba2.jpg",repo:"new"},{name:"Hash 75fd29",file:"75fd29a0318c3cf0fdaf8a41d1406cf2.png",repo:"new"},{name:"Hash 8efd4b",file:"8efd4b2b51765d9efdde621251b08968.jpg",repo:"new"},{name:"Hash 90cbee",file:"90cbeedafdef22534d24d04bc44b518f.jpg",repo:"new"},{name:"Hash 954abf",file:"954abf22a1f89759204818d3c0592234.png",repo:"new"},{name:"Hash 9799d6",file:"9799d6d1766b1add766629adec031867.png",repo:"new"},{name:"Hash a0767f",file:"a0767fc0712f1a9eeac238e72b6b2721.png",repo:"new"},{name:"Hash b18a11",file:"b18a11d1a8355081b70a3d91347236b1.jpg",repo:"new"},{name:"Hash bf2932",file:"bf29325ee951619c061902200c8e1143.png",repo:"new"},{name:"Hash e1de4a",file:"e1de4a32cb1bafa33166d51bf8ae2f35.png",repo:"new"},{name:"Hash e59f95",file:"e59f952d6ef4e9c391ea10e143e55b23.png",repo:"new"},{name:"Hash e6582e",file:"e6582e848b0aca99c134d23365c08fdb.png",repo:"new"},{name:"Hash ebd3d3",file:"ebd3d33285d243f86e54df78b9cc69ac.png",repo:"new"},{name:"Woman Chopping Tree",file:"WomanChoppingTree.jpg",repo:"old"},{name:"Dancing",file:"Dancing.jpg",repo:"old"},{name:"Jongleur",file:"Jongleur.png",repo:"old"},{name:"a_cheval",file:"a_cheval.png",repo:"old"},{name:"McLean_1",file:"McLean_1.png",repo:"old"},{name:"Gernamy_1949",file:"Gernamy_1949_R_Balzer.png",repo:"old"},{name:"AEO175939",file:"AEO175939_PhenakistoscopeGiroux60.jpg",repo:"old"},{name:"AEO185553",file:"AEO185553_PhenakistiscopeDisc_ManInBlueAndRed.jpg",repo:"old"},{name:"medium_1990_5036_3369",file:"medium_1990_5036_3369.jpg",repo:"old"},{name:"medium_a001813b",file:"medium_a001813b.jpg",repo:"old"},{name:"tumblr_obd6fh",file:"tumblr_obd6fhGFSZ1r9jbwno1_500.png",repo:"old"},{name:"tumblr_oc1cz",file:"tumblr_oc1czn99ZM1r9jbwno1_500.png",repo:"old"},{name:"Phantasmascope Faces",file:"Phantasmascope_faces.png",repo:"old"},{name:"722a6790240569.5e126845d9b56",file:"722a6790240569.5e126845d9b56.png",repo:"old"},{name:"Fantascope Disc 1833",file:"fantascope-disc-1833.png",repo:"old"},{name:"Face",file:"a_face__.jpg",repo:"new"},{name:"Culbute",file:"culbute.jpg",repo:"new"},{name:"Grenouille",file:"Grenouille__.jpg",repo:"new"},{name:"Oh Soccer",file:"oh_soccer.jpg",repo:"new"},{name:"Un Grand Un Petit",file:"un_grand_un_petit.jpg",repo:"new"},{name:"Autre Culbutte",file:"autre_culbutte.jpg",repo:"new"},{name:"Dancing 2",file:"dancing_.jpg",repo:"new"},{name:"Il Pompe de l'eau",file:"il_pompe_de_leau.jpg",repo:"new"},{name:"Porceline",file:"porceline.jpg",repo:"new"},{name:"Volants",file:"volants_.png",repo:"new"},{name:"Ce Qui",file:"ce_qui.jpg",repo:"new"},{name:"Des Anges",file:"des_anges.jpg",repo:"new"},{name:"Moulin",file:"moulin_.jpg",repo:"new"},{name:"Rats",file:"rats__.jpg",repo:"new"},{name:"Corde Ã  Danser",file:"corde_a_denser_.jpg",repo:"new"},{name:"Ecureuil",file:"ecureuil.jpg",repo:"new"},{name:"Noel Noel",file:"noel_noel.jpg",repo:"new"},{name:"Tirreur",file:"tirreur_.jpg",repo:"new"},{name:"C Pastel",file:"c_pastel.jpg",repo:"new"},{name:"GÃ©omÃ©trique",file:"geometrique.jpg",repo:"new"},{name:"Nuages en Scie",file:"nuages_en_scie.jpg",repo:"new"},{name:"Tons Pastels",file:"tons_pastels.jpg",repo:"new"},{name:"Des Ouiseaux",file:"DesOuaisaux.png",repo:"new"},{name:"Feels Like Flying",file:"feels_like_flying.png",repo:"new"},{name:"Gros Meusieur",file:"GrosMeusieur.png",repo:"new"},{name:"Jongle avec les Otaries",file:"Jongle_avec_les_otaries.png",repo:"new"},{name:"CinÃ©mathÃ¨que 1",file:"cinemateque_francaise_1.png",repo:"new"},{name:"CinÃ©mathÃ¨que 2",file:"cinemateque_francaise_2.png",repo:"new"},{name:"CinÃ©mathÃ¨que 3",file:"cinemateque_francaise_3.png",repo:"new"},{name:"CinÃ©mathÃ¨que 4",file:"cinemateque_francaise_4.png",repo:"new"},{name:"CinÃ©mathÃ¨que 5",file:"cinemateque_francaise_5.png",repo:"new"},{name:"CinÃ©mathÃ¨que 6",file:"cinemateque_francaise_6.png",repo:"new"},{name:"CinÃ©mathÃ¨que 7",file:"cinemateque_francaise_7.png",repo:"new"},{name:"CinÃ©mathÃ¨que 8",file:"cinemateque_francaise_8.png",repo:"new"},{name:"CinÃ©mathÃ¨que 9",file:"cinemateque_francaise_9.png",repo:"new"},{name:"CinÃ©mathÃ¨que 10",file:"cinemateque_francaise_10.png",repo:"new"},{name:"CinÃ©mathÃ¨que 11",file:"cinemateque_francaise_11.png",repo:"new"},{name:"CinÃ©mathÃ¨que 12",file:"cinemateque_francaise_12.png",repo:"new"},{name:"CinÃ©mathÃ¨que 13",file:"cinemateque_francaise_13.png",repo:"new"},{name:"CinÃ©mathÃ¨que 14",file:"cinemateque_francaise_14.png",repo:"new"},{name:"CinÃ©mathÃ¨que 15",file:"cinemateque_francaise_15.png",repo:"new"},{name:"CinÃ©mathÃ¨que 16",file:"cinemateque_francaise_16.png",repo:"new"},{name:"CinÃ©mathÃ¨que 17",file:"cinemateque_francaise_17.png",repo:"new"},{name:"CinÃ©mathÃ¨que 18",file:"cinemateque_francaise_18.png",repo:"new"},{name:"CinÃ©mathÃ¨que 19",file:"cinemateque_francaise_19.png",repo:"new"},{name:"CinÃ©mathÃ¨que 20",file:"cinemateque_francaise_20.png",repo:"new"},{name:"CinÃ©mathÃ¨que 21",file:"cinemateque_francaise_21.png",repo:"new"},{name:"CinÃ©mathÃ¨que 22",file:"cinemateque_francaise_22.png",repo:"new"},{name:"CinÃ©mathÃ¨que 23",file:"cinemateque_francaise_23.png",repo:"new"},{name:"CinÃ©mathÃ¨que 24",file:"cinemateque_francaise_24.png",repo:"new"},{name:"CinÃ©mathÃ¨que 25",file:"cinemateque_francaise_25.png",repo:"new"},{name:"CinÃ©mathÃ¨que 26",file:"cinemateque_francaise_26.png",repo:"new"},{name:"CinÃ©mathÃ¨que 27",file:"cinemateque_francaise_27.png",repo:"new"},{name:"CinÃ©mathÃ¨que 28",file:"cinemateque_francaise_28.png",repo:"new"},{name:"CinÃ©mathÃ¨que 29",file:"cinemateque_francaise_29.png",repo:"new"},{name:"CinÃ©mathÃ¨que 30",file:"cinemateque_francaise_30.png",repo:"new"},{name:"CinÃ©mathÃ¨que 31",file:"cinemateque_francaise_31.png",repo:"new"},{name:"CinÃ©mathÃ¨que 32",file:"cinemateque_francaise_32.png",repo:"new"},{name:"CinÃ©mathÃ¨que 33",file:"cinemateque_francaise_33.png",repo:"new"},{name:"CinÃ©mathÃ¨que 34",file:"cinemateque_francaise_34.png",repo:"new"},{name:"Phenakistoscope 3g07692a",file:"Phenakistoscope_3g07692a.jpg",repo:"new"},{name:"Phenakistoscope 3g07692u",file:"Phenakistoscope_3g07692u.jpg",repo:"new"},{name:"Lebensrad 01",file:"Lebensrad01.jpg",repo:"new"},{name:"Dance Dance",file:"Dance_dance.png",repo:"new"},{name:"Download",file:"download.png",repo:"new"},{name:"Serpent",file:"serpent.png",repo:"new"},{name:"Zoopraxiscope 0",file:"zoopraxiscope-0.png",repo:"new"},{name:"S-L1600 PNG",file:"s-l1600.png",repo:"new"},{name:"1200px Cats and Donkey",file:"1200px-Optical_Toy,_Phenakistiscope_Disc_with_Cats_and_Donkey,_ca._1830_(CH_18607981).jpg",repo:"new"},{name:"Photographic Pastimes",file:"Photographic_pastimes_-_a_series_of_interesting_experiments_for_amateurs_for_obtaining_novel_and_curious_effects_with_the_aid_of_the_camera_(1891)_(14766082535).jpg",repo:"new"},{name:"IL 1588 2019925483",file:"il_1588xN.2019925483_gcfc.jpg",repo:"new"},{name:"IL 1588 7127245108",file:"il_1588xN.7127245108_4tnw.png",repo:"new"},{name:"IL 1588 7287092618",file:"il_1588xN.7287092618_bs1i.png",repo:"new"}];let x=se("");function h(r){const u=`${r.repo==="new"?f:s}/${r.file}`;mn.set(null),gn.set(0),Hn.set([]),At.set(!1),yt.set(!1),Dt.set(0),vn.set("move-center"),ct.set(0),hn.set(1),Lt.set(null),$t.set(!1),Ut.set(!1),Yt.set("#000000"),Xt.set(u),ba.set(u),Et.set(!1),Ea.set(r.name),P(x,r.file)}_a(()=>{let r=!1;if(Xt.subscribe(u=>{u&&(r=!0)})(),!r){const u=m[Math.floor(Math.random()*m.length)];u&&h(u)}}),On();var c=hs(),w=y(L(c),2);{var _=r=>{var v=us(),u=L(v);q(v),De(()=>We(u,`ðŸ“· ${a()??""}`)),A(r,v)};le(w,r=>{a()&&r(_)})}var k=y(w,2);De(()=>{t(x),Ha(()=>{})});var S=L(k);S.value=S.__value="";var g=y(S);Si(g,1,()=>m,r=>r.file,(r,v)=>{var u=ps(),D=L(u,!0);q(u);var H={};De(()=>{We(D,t(v).name),H!==(H=t(v).file)&&(u.value=(u.__value=t(v).file)??"")}),A(r,u)}),q(k),q(c),Na(k,()=>t(x),r=>P(x,r)),R("change",k,r=>{const v=r.target.selectedIndex-1;v>=0&&h(m[v])}),A(n,c),wn(),p()}var ms=he('<div class="container svelte-1uha8ag"><h1 class="svelte-1uha8ag">Phenakistoscope Lab</h1> <p class="sub svelte-1uha8ag">Convert old phenakistoscope discs into animated GIFs</p> <div class="wiki-link svelte-1uha8ag"><a href="https://en.wikipedia.org/wiki/Phenakistiscope" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">â„¹ï¸ Learn about Phenakistoscopes</a></div> <div class="intro svelte-1uha8ag"><p class="svelte-1uha8ag">To create an animated GIF from a phenakistoscope image, select the correct number of frames according to the image, adjust the rotation speed, and then save it as a fast, slow, or normal animated GIF depending on your settings.</p></div> <!> <!> <!> <!> <!></div>');function ks(n){var i=ms(),a=y(L(i),8);Oi(a,{});var l=y(a,2);vs(l,{});var p=y(l,2);Hi(p,{});var s=y(p,2);Gi(s,{});var f=y(s,2);ds(f,{}),q(i),A(n,i)}export{ks as component};
