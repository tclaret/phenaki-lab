import{f as pe,a as A,c as ht,t as xe}from"../chunks/DidSmI2s.js";import"../chunks/BfDn8e9k.js";import{G as Ba,v as Ne,w as Va,g as t,av as Ja,I as Za,J as Ka,K as xa,L as Ma,M as ta,D as En,a3 as Qa,aq as ei,aa as ti,x as vt,C as la,B as qa,F as ni,Q as se,a1 as ka,ao as La,aI as va,aJ as ai,y as Fa,A as ii,aK as si,aL as ri,aM as na,ak as oi,aN as li,aO as ci,an as fi,z as di,aP as ga,N as ui,R as pi,aQ as hi,aR as vi,aS as Oa,aT as gi,aU as mi,aV as _i,P as wi,aW as bi,aX as yi,b as Qe,O as Ra,aG as xi,p as _n,j as wn,s as y,k as q,l as L,aY as $e,aZ as ma,i as Ze,U as P,t as De,a_ as de,ab as qn,a$ as za}from"../chunks/CkcJ_p-v.js";import{e as R,s as We}from"../chunks/EstrOUTn.js";import{i as On}from"../chunks/BeJGQpUk.js";import{w as fe,o as _a,a as Mi,g as Gt}from"../chunks/BzLubvRb.js";import{i as le,s as Rn,a as j,b as Sa,d as aa}from"../chunks/CgM4jgzu.js";function ki(n,i,a){for(var l=[],p=i.length,s=0;s<p;s++)li(i[s].e,l,!0);ci(l,()=>{var f=l.length===0&&a!==null;if(f){var v=a,x=v.parentNode;fi(x),x.append(v),n.items.clear(),Ke(n,i[0].prev,i[p-1].next)}for(var g=0;g<p;g++){var c=i[g];f||(n.items.delete(c.k),Ke(n,c.prev,c.next)),di(c.e,!f)}n.first===i[0]&&(n.first=i[0].prev)})}function Si(n,i,a,l,p,s=null){var f=n,v=new Map,x=null;Ne&&Va();var g=null,c=Ja(()=>{var r=a();return va(r)?r:r==null?[]:La(r)}),w,_=!0;function k(){Ci(m,w,f,i,l),g!==null&&(w.length===0?(g.fragment?(f.before(g.fragment),g.fragment=null):Fa(g.effect),S.first=g.effect):ii(g.effect,()=>{g=null}))}var S=Ba(()=>{w=t(c);var r=w.length;let h=!1;if(Ne){var u=Za(f)===Ka;u!==(r===0)&&(f=xa(),Ma(f),ta(!1),h=!0)}for(var D=new Set,z=vt,$=null,G=ni(),b=0;b<r;b+=1){Ne&&En.nodeType===Qa&&En.data===ei&&(f=En,h=!0,ta(!1));var I=w[b],e=l(I,b),ee=_?null:v.get(e);ee?(ti(ee.v,I),ee.i=b,G&&z.skipped_effects.delete(ee.e)):(ee=Pi(_?f:null,$,I,e,b,p,i,a),_&&(ee.o=!0,$===null?x=ee:$.next=ee,$=ee),v.set(e,ee)),D.add(e)}if(r===0&&s&&!g)if(_)g={fragment:null,effect:la(()=>s(f))};else{var H=document.createDocumentFragment(),Me=qa();H.append(Me),g={fragment:H,effect:la(()=>s(Me))}}if(Ne&&r>0&&Ma(xa()),!_)if(G){for(const[N,Y]of v)D.has(N)||z.skipped_effects.add(Y.e);z.oncommit(k),z.ondiscard(()=>{})}else k();h&&ta(!0),t(c)}),m={effect:S,items:v,first:x};_=!1,Ne&&(f=En)}function Ci(n,i,a,l,p){var s=i.length,f=n.items,v=n.first,x,g=null,c=[],w=[],_,k,S,m;for(m=0;m<s;m+=1){if(_=i[m],k=p(_,m),S=f.get(k),n.first??=S,!S.o){S.o=!0;var r=g?g.next:v;Ke(n,g,S),Ke(n,S,r),ia(S,r,a),g=S,c=[],w=[],v=g.next;continue}if((S.e.f&na)!==0&&Fa(S.e),S!==v){if(x!==void 0&&x.has(S)){if(c.length<w.length){var h=w[0],u;g=h.prev;var D=c[0],z=c[c.length-1];for(u=0;u<c.length;u+=1)ia(c[u],h,a);for(u=0;u<w.length;u+=1)x.delete(w[u]);Ke(n,D.prev,z.next),Ke(n,g,D),Ke(n,z,h),v=h,g=z,m-=1,c=[],w=[]}else x.delete(S),ia(S,v,a),Ke(n,S.prev,S.next),Ke(n,S,g===null?n.first:g.next),Ke(n,g,S),g=S;continue}for(c=[],w=[];v!==null&&v.k!==k;)(v.e.f&na)===0&&(x??=new Set).add(v),w.push(v),v=v.next;if(v===null)continue;S=v}c.push(S),g=S,v=S.next}let $=f.size>s;if(v!==null||x!==void 0){for(var G=x===void 0?[]:La(x);v!==null;)(v.e.f&na)===0&&G.push(v),v=v.next;var b=G.length;if($=f.size-b>s,b>0){var I=null;ki(n,G,I)}}if($)for(const e of f.values())e.o||(Ke(n,g,e),g=e);n.effect.last=g&&g.e}function Pi(n,i,a,l,p,s,f,v){var x=(f&si)!==0,g=(f&ri)===0,c=x?g?se(a,!1,!1):ka(a):a,w=(f&ai)===0?p:ka(p),_={i:w,v:c,k:l,a:null,e:null,o:!1,prev:i,next:null};try{if(n===null){var k=document.createDocumentFragment();k.append(n=qa())}return _.e=la(()=>s(n,c,w,v)),i!==null&&(i.next=_),_}finally{}}function ia(n,i,a){for(var l=n.next?n.next.e.nodes_start:a,p=i?i.e.nodes_start:a,s=n.e.nodes_start;s!==null&&s!==l;){var f=oi(s);p.before(s),s=f}}function Ke(n,i,a){i===null?(n.first=a,n.effect.first=a&&a.e):(i.e.next&&(i.e.next.prev=null),i.next=a,i.e.next=a&&a.e),a!==null&&(a.e.prev&&(a.e.prev.next=null),a.prev=i,a.e.prev=i&&i.e)}function Ha(n){var i,a,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var p=n.length;for(i=0;i<p;i++)n[i]&&(a=Ha(n[i]))&&(l&&(l+=" "),l+=a)}else for(a in n)n[a]&&(l&&(l+=" "),l+=a);return l}function Ii(){for(var n,i,a=0,l="",p=arguments.length;a<p;a++)(n=arguments[a])&&(i=Ha(n))&&(l&&(l+=" "),l+=i);return l}function Ca(n){return typeof n=="object"?Ii(n):n??""}const Pa=[...` 	
\r\fÂ \v\uFEFF`];function Ti(n,i,a){var l=n==null?"":""+n;if(i&&(l=l?l+" "+i:i),a){for(var p in a)if(a[p])l=l?l+" "+p:p;else if(l.length)for(var s=p.length,f=0;(f=l.indexOf(p,f))>=0;){var v=f+s;(f===0||Pa.includes(l[f-1]))&&(v===l.length||Pa.includes(l[v]))?l=(f===0?"":l.substring(0,f))+l.substring(v+1):f=v}}return l===""?null:l}function $i(n,i){return n==null?null:String(n)}function Ln(n,i,a,l,p,s){var f=n.__className;if(Ne||f!==a||f===void 0){var v=Ti(a,l,s);(!Ne||v!==n.getAttribute("class"))&&(v==null?n.removeAttribute("class"):n.className=v),n.__className=a}else if(s&&p!==s)for(var x in s){var g=!!s[x];(p==null||g!==!!p[x])&&n.classList.toggle(x,g)}return s}function ot(n,i,a,l){var p=n.__style;if(Ne||p!==i){var s=$i(i);(!Ne||s!==n.getAttribute("style"))&&(s==null?n.removeAttribute("style"):n.style.cssText=s),n.__style=i}return l}function Wa(n,i,a=!1){if(n.multiple){if(i==null)return;if(!va(i))return hi();for(var l of n.options)l.selected=i.includes(pn(l));return}for(l of n.options){var p=pn(l);if(vi(p,i)){l.selected=!0;return}}(!a||i!==void 0)&&(n.selectedIndex=-1)}function Di(n){var i=new MutationObserver(()=>{Wa(n,n.__value)});i.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),pi(()=>{i.disconnect()})}function Na(n,i,a=i){var l=new WeakSet,p=!0;ga(n,"change",s=>{var f=s?"[selected]":":checked",v;if(n.multiple)v=[].map.call(n.querySelectorAll(f),pn);else{var x=n.querySelector(f)??n.querySelector("option:not([disabled])");v=x&&pn(x)}a(v),vt!==null&&l.add(vt)}),ui(()=>{var s=i();if(n===document.activeElement){var f=Oa??vt;if(l.has(f))return}if(Wa(n,s,p),p&&s===void 0){var v=n.querySelector(":checked");v!==null&&(s=pn(v),a(s))}n.__value=s,p=!1}),Di(n)}function pn(n){return"__value"in n?n.__value:n.value}const Ei=Symbol("is custom element"),Ai=Symbol("is html");function Tt(n){if(Ne){var i=!1,a=()=>{if(!i){if(i=!0,n.hasAttribute("value")){var l=n.value;Fn(n,"value",null),n.value=l}if(n.hasAttribute("checked")){var p=n.checked;Fn(n,"checked",null),n.checked=p}}};n.__on_r=a,wi(a),bi()}}function Ia(n,i){var a=wa(n);a.value===(a.value=i??void 0)||n.value===i&&(i!==0||n.nodeName!=="PROGRESS")||(n.value=i??"")}function qi(n,i){var a=wa(n);a.checked!==(a.checked=i??void 0)&&(n.checked=i)}function Fn(n,i,a,l){var p=wa(n);Ne&&(p[i]=n.getAttribute(i),i==="src"||i==="srcset"||i==="href"&&n.nodeName==="LINK")||p[i]!==(p[i]=a)&&(i==="loading"&&(n[yi]=a),a==null?n.removeAttribute(i):typeof a!="string"&&Li(n).includes(i)?n[i]=a:n.setAttribute(i,a))}function wa(n){return n.__attributes??={[Ei]:n.nodeName.includes("-"),[Ai]:n.namespaceURI===gi}}var Ta=new Map;function Li(n){var i=n.getAttribute("is")||n.nodeName,a=Ta.get(i);if(a)return a;Ta.set(i,a=[]);for(var l,p=n,s=Element.prototype;s!==p;){l=_i(p);for(var f in l)l[f].set&&a.push(f);p=mi(p)}return a}function $a(n,i,a=i){var l=new WeakSet;ga(n,"input",async p=>{var s=p?n.defaultValue:n.value;if(s=sa(n)?ra(s):s,a(s),vt!==null&&l.add(vt),await xi(),s!==(s=i())){var f=n.selectionStart,v=n.selectionEnd,x=n.value.length;if(n.value=s??"",v!==null){var g=n.value.length;f===v&&v===x&&g>x?(n.selectionStart=g,n.selectionEnd=g):(n.selectionStart=f,n.selectionEnd=Math.min(v,g))}}}),(Ne&&n.defaultValue!==n.value||Qe(i)==null&&n.value)&&(a(sa(n)?ra(n.value):n.value),vt!==null&&l.add(vt)),Ra(()=>{var p=i();if(n===document.activeElement){var s=Oa??vt;if(l.has(s))return}sa(n)&&p===ra(n.value)||n.type==="date"&&!p&&!n.value||p!==n.value&&(n.value=p??"")})}function Da(n,i,a=i){ga(n,"change",l=>{var p=l?n.defaultChecked:n.checked;a(p)}),(Ne&&n.defaultChecked!==n.checked||Qe(i)==null)&&a(n.checked),Ra(()=>{var l=i();n.checked=!!l})}function sa(n){var i=n.type;return i==="number"||i==="range"}function ra(n){return n===""?null:+n}function we(n){return function(...i){var a=i[0];return a.stopPropagation(),n?.apply(this,i)}}function bt(n){return function(...i){var a=i[0];return a.preventDefault(),n?.apply(this,i)}}function lt(n,i){var a=n.$$events?.[i.type],l=va(a)?a.slice():a==null?[]:[a];for(var p of l)p.call(this,i)}const ba=fe(null),Xt=fe(null),Ea=fe(null),Et=fe(!1),ct=fe(0),ca=fe(1),$t=fe(!1),gn=fe(null),mn=fe(0),hn=fe(1),zn=fe([]),fa=fe(!1),yt=fe(!1),At=fe(!1),da=fe({translateX:0,translateY:0,scale:1}),un=fe({active:!1,progress:0,startTime:0}),ua=fe(null),pa=fe(!1),Je=fe(50),ha=fe(!1),qt=fe(null),Dt=fe(0),vn=fe("move-center"),Ut=fe(!1),Yt=fe("#000000");var Fi=pe('<label>Choose image: <input type="file" accept="image/*"/></label>');function Oi(n,i){_n(i,!1);function a(s){const f=s.target.files[0];if(!f)return;const v=URL.createObjectURL(f);gn.set(null),mn.set(0),zn.set([]),At.set(!1),yt.set(!1),Dt.set(0),vn.set("move-center"),ct.set(0),hn.set(1),qt.set(null),$t.set(!1),Ut.set(!1),Yt.set("#000000"),ba.set(v),Xt.set(v),Et.set(!1)}On();var l=Fi(),p=y(q(l));L(l),R("change",p,a),A(n,l),wn()}var Ri=pe('<div class="preview svelte-1th6cal"><img alt="Selected disc preview" class="svelte-1th6cal"/></div>');function zi(n,i){_n(i,!1);const a=()=>j(ba,"$previewUrl",l),[l,p]=Rn(),s=se();$e(()=>a(),()=>{P(s,a())}),ma();var f=ht(),v=Ze(f);{var x=g=>{var c=Ri(),w=q(c);L(c),De(()=>Fn(w,"src",t(s))),A(g,c)};le(v,g=>{t(s)&&g(x)})}A(n,f),wn(),p()}var Hi=pe('<div class="speed-hud svelte-byh4af"> </div>'),Wi=pe('<div class="crosshair-overlay svelte-byh4af"><div class="crosshair-vertical svelte-byh4af"></div> <div class="crosshair-horizontal svelte-byh4af"></div> <div class="crosshair-center-dot svelte-byh4af"></div> <div class="crosshair-circle svelte-byh4af"></div></div>'),Ni=pe('<div class="edit-mode-indicator svelte-byh4af"><!></div> <!> <div class="frame-counter svelte-byh4af"><div class="frame-info svelte-byh4af"><div style="font-size: 0.7em; color: #aaa; margin-bottom: 4px; text-align: center;" class="svelte-byh4af">How many scenes on the disc?</div> <div style="font-size: 0.65em; color: #888; text-align: center; margin-bottom: 8px;" class="svelte-byh4af">Set frame count = number of animation scenes</div></div> <div style="display: flex; align-items: center; gap: 8px;" class="svelte-byh4af"><button class="frame-btn svelte-byh4af" title="Decrease frame count">âˆ’</button> <div class="frame-display svelte-byh4af"><div class="frame-number svelte-byh4af"> </div> <div class="frame-label svelte-byh4af">frames</div></div> <button class="frame-btn svelte-byh4af" title="Increase frame count">+</button></div></div>',1),ji=pe('<div><canvas class="svelte-byh4af"></canvas> <!> <!></div>');function Gi(n,i){_n(i,!1);const a=()=>j(yt,"$editMode",$),l=()=>j(Et,"$isPlaying",$),p=()=>j(Xt,"$imageUrl",$),s=()=>j(qt,"$gifFrameCount",$),f=()=>j(ha,"$isMobile",$),v=()=>j(ct,"$rotationSpeed",$),x=()=>j(vn,"$editModeInteraction",$),g=()=>j(Dt,"$sliceRotationAngle",$),c=()=>j(un,"$detectionAnimation",$),w=()=>j(ca,"$rotationDirection",$),_=()=>j(Ut,"$fillOuterCircle",$),k=()=>j(gn,"$detectedCircle",$),S=()=>j(Yt,"$outerCircleFillColor",$),m=()=>j(fa,"$overlayVisible",$),r=()=>j(mn,"$detectedCount",$),h=()=>j(zn,"$detectedPositions",$),u=()=>j(At,"$confirmedDetection",$),D=()=>j(pa,"$flickerEnabled",$),z=()=>j(Je,"$flickerFrequency",$),[$,G]=Rn();let b=se(),I=se(),e,ee=0,H=se(1);const Me=1,N=4;let Y=se(0),J=se(0);const re=new Map;let Xe=1,Le=0,Be=0,et=0,ke=se(),gt=1,xt=0,ft=se(0),mt=0,tt=1,nt=se(!1),je,Z=0,Mt=0,kt=0,Lt=0,Ft=0,St=se(null),Bt=se(null),Ct=!1,bn=0,Vt=0,U=se(null),at=se(!1),it;function yn(d){P(at,!1),P(U,new Image),de(U,t(U).crossOrigin="anonymous"),de(U,t(U).onload=()=>{console.log("Image loaded:",d,"Size:",t(U).width,"x",t(U).height),P(at,!0),Jt(),Se()}),de(U,t(U).onerror=C=>{console.error("Erreur chargement:",d,C),P(at,!1)}),de(U,t(U).src=d)}function Jt(){if(!t(I)||!t(b))return;const d=t(b).getBoundingClientRect(),C=window.devicePixelRatio||1;if(t(U)&&t(U).width&&t(U).height){const X=t(U).width,te=t(U).height,oe=Math.min(1400,Math.max(150,Math.round(d.width*Math.sqrt(X*X+te*te)/X)));de(b,t(b).style.height=oe+"px");const B=t(b).getBoundingClientRect();de(I,t(I).style.width=B.width+"px"),de(I,t(I).style.height=B.height+"px"),de(I,t(I).width=Math.round(B.width*C)),de(I,t(I).height=Math.round(B.height*C))}else de(I,t(I).style.width=d.width+"px"),de(I,t(I).style.height=d.height+"px"),de(I,t(I).width=Math.round(d.width*C)),de(I,t(I).height=Math.round(d.height*C));e&&e.setTransform(C,0,0,C,0,0),Se()}_a(()=>{const d=()=>{const X="ontouchstart"in window||navigator.maxTouchPoints>0||window.innerWidth<768;ha.set(X)};if(d(),window.addEventListener("resize",d),t(I)){if(ua.set(t(I)),e=t(I).getContext("2d"),t(b)){const C=()=>{f()?t(H)>1||a()?de(b,t(b).style.touchAction="none"):de(b,t(b).style.touchAction="pan-y"):de(b,t(b).style.touchAction="none")};C(),da.subscribe(C),yt.subscribe(C)}t(b)&&t(b).addEventListener("wheel",Kt,{passive:!1}),Jt(),it=new ResizeObserver(()=>Jt()),t(b)&&it.observe(t(b)),t(b)&&(t(b).addEventListener("pointerdown",Ot),t(b).addEventListener("pointermove",dt),t(b).addEventListener("pointerup",Zt),t(b).addEventListener("pointerleave",xn))}return()=>{it&&it.disconnect(),window.removeEventListener("resize",d),document.removeEventListener("pointermove",Qt),document.removeEventListener("pointerup",en)}});function Ot(d){if(!t(b))return;(a()||t(H)>1)&&(d.preventDefault(),d.stopPropagation()),t(b).setPointerCapture(d.pointerId),re.set(d.pointerId,{x:d.clientX,y:d.clientY});const C=Date.now(),X=d.clientX-Mt,te=d.clientY-kt,oe=Math.sqrt(X*X+te*te);if(C-Z<300&&oe<50){a()?(vn.update(B=>B==="move-center"?"rotate-slices":"move-center"),Se()):Et.update(B=>!B),re.clear(),Z=0;return}if(Z=C,Mt=d.clientX,kt=d.clientY,re.size===1&&(Be=d.clientX,et=d.clientY,mt=d.clientY,tt=v()||1,a()&&x()==="rotate-slices")){const B=t(b).getBoundingClientRect(),ve=t(I).clientWidth,Pe=t(I).clientHeight,Ie=B.left+ve/2,Ce=B.top+Pe/2,F=d.clientX-Ie,V=d.clientY-Ce;Ft=Math.atan2(V,F),Lt=g()}if(re.size===2){const B=Array.from(re.values());Xe=t(H),gt=t(H),Le=Math.hypot(B[0].x-B[1].x,B[0].y-B[1].y)}}function dt(d){if(t(b)){if((a()||t(H)>1)&&re.has(d.pointerId)&&(d.preventDefault(),d.stopPropagation()),re.has(d.pointerId)&&re.set(d.pointerId,{x:d.clientX,y:d.clientY}),re.size===2){const C=Array.from(re.values()),X=C[0],te=C[1],B=Math.hypot(X.x-te.x,X.y-te.y)/Le;let ve=Math.max(Me,Math.min(N,Xe*B));f()&&(gt=ve,ve=t(H)+(gt-t(H))*.3);const Pe={x:(X.x+te.x)/2,y:(X.y+te.y)/2},Ie=t(I).clientWidth,Ce=t(I).clientHeight,F=t(b).getBoundingClientRect(),V=Pe.x-(F.left+Ie/2)-t(Y),W=Pe.y-(F.top+Ce/2)-t(J),E=t(H),O=ve;if(P(Y,t(Y)-(O/E-1)*V),P(J,t(J)-(O/E-1)*W),P(H,ve),f()){const T=Date.now();T-xt>16&&(Se(),xt=T)}else Se();P(nt,!0),clearTimeout(je);return}if(re.size===1){if(re.values().next().value,a()&&x()==="rotate-slices"){const C=t(b).getBoundingClientRect(),X=t(I).clientWidth,te=t(I).clientHeight,oe=C.left+X/2,B=C.top+te/2,ve=d.clientX-oe,Pe=d.clientY-B,Ce=Math.atan2(Pe,ve)-Ft;Dt.set(Lt+Ce),Se();return}if(t(H)>1||a()&&x()==="move-center"){const C=d.clientX-Be,X=d.clientY-et;P(Y,t(Y)+C),P(J,t(J)+X),Be=d.clientX,et=d.clientY,Se();return}else if(!f()){const C=mt-d.clientY,te=Math.round(C*8),oe=Math.max(10,Math.min(1e4,Math.round(tt+te)));ct.set(oe),$t.set(!0),P(nt,!0),clearTimeout(je)}}}}function Zt(d){if(t(b)){try{t(b).releasePointerCapture(d.pointerId)}catch{}clearTimeout(je),P(nt,!0),je=setTimeout(()=>{P(nt,!1)},4e3),re.delete(d.pointerId),re.size===0&&(clearTimeout(je),P(nt,!1),Le=0,gt=t(H))}}function xn(){clearTimeout(je),P(nt,!0),je=setTimeout(()=>{P(nt,!1)},4e3)}function Kt(d){if(!t(b)||!d.ctrlKey&&!d.metaKey)return;d.preventDefault();const X=1+(-d.deltaY>0?.1:-.1),te=Math.max(Me,Math.min(N,t(H)*X)),oe=t(b).getBoundingClientRect(),B=d.clientX-(oe.left+t(I).clientWidth/2)-t(Y),ve=d.clientY-(oe.top+t(I).clientHeight/2)-t(J);P(Y,t(Y)-(te/t(H)-1)*B),P(J,t(J)-(te/t(H)-1)*ve),P(H,te),Se()}function Mn(d){f()&&(d.stopPropagation(),d.preventDefault(),Ct=!0,bn=d.clientX-(t(St)||0),Vt=d.clientY-(t(Bt)||0),document.addEventListener("pointermove",Qt),document.addEventListener("pointerup",en))}function Qt(d){Ct&&(d.stopPropagation(),d.preventDefault(),P(St,d.clientX-bn),P(Bt,d.clientY-Vt))}function en(d){Ct&&(d.stopPropagation(),d.preventDefault()),Ct=!1,document.removeEventListener("pointermove",Qt),document.removeEventListener("pointerup",en)}Mi(()=>{t(ke)&&cancelAnimationFrame(t(ke)),it&&it.disconnect(),je&&clearTimeout(je),t(b)&&(t(b).removeEventListener("pointerdown",Ot),t(b).removeEventListener("pointermove",dt),t(b).removeEventListener("pointerup",Zt),t(b).removeEventListener("pointerleave",xn),t(b)&&t(b).removeEventListener("wheel",Kt)),ua.set(null)});function Rt(d){const C=l()||c().active||a();if(!C||!t(at)){P(ft,0),!C&&t(ke)&&(cancelAnimationFrame(t(ke)),P(ke,null));return}t(ft)||P(ft,d);const X=d-t(ft);if(P(ft,d),l()&&!a()){const te=v()||0;ee+=te*(w()||1)*(X/1e3)}Se(),P(ke,requestAnimationFrame(Rt))}function Se(){if(!t(at)||!e||!t(U)||!t(I)){console.log("DrawFrame skipped:",{imageReady:t(at),ctx:!!e,htmlImg:!!t(U),canvas:!!t(I)});return}const d=t(I).clientWidth,C=t(I).clientHeight;e.clearRect(0,0,d,C),_()&&k()&&(e.save(),e.fillStyle=S(),e.fillRect(0,0,d,C),e.restore()),e.save();const X=t(U).width/t(U).height,te=d/C;let oe,B;X>te?(oe=d,B=d/X):(B=C,oe=C*X);const ve=oe*t(H),Pe=B*t(H);let Ie=0,Ce=0;if(k()){const F=oe/t(U).width;Ie=(k().x-t(U).width/2)*F*t(H),Ce=(k().y-t(U).height/2)*F*t(H)}if(e.translate(d/2+t(Y),C/2+t(J)),e.translate(Ie,Ce),e.rotate(ee*Math.PI/180),e.translate(-Ie,-Ce),e.drawImage(t(U),-ve/2,-Pe/2,ve,Pe),m()&&k())try{const F=k(),V=oe*t(H)/t(U).width,W=(F.x-t(U).width/2)*V,E=(F.y-t(U).height/2)*V,O=F.r*V,T=Date.now()/1e3,ge=T*Math.PI*.5%(Math.PI*2),ye=T*2.5*Math.PI*2,ne=Math.abs(Math.sin(ye)),_t=T*.8%2,Wn=Math.sin(T*3)*.1,Cn=Math.tan(T*.5)*.05,Nn=O*(.8+_t*.4+Wn+Math.min(Math.max(Cn,-.1),.1)),Pn=Math.max(0,.3*(1-_t/2)*ne);e.beginPath(),e.strokeStyle=`rgba(0, 255, 255, ${Pn})`,e.lineWidth=2,e.arc(W,E,Nn,0,Math.PI*2),e.stroke();const In=16;for(let ce=0;ce<In;ce++){const be=ce/In*Math.PI*2,Fe=Math.sin(T*2+ce*.5)*.2,Ee=be+Fe,Ge=O*(.7+Math.sin(T*3+ce)*.2)*ne;e.save(),e.translate(W,E),e.strokeStyle=`rgba(0, 255, 255, ${ne*.3})`,e.lineWidth=1,e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(Ee)*Ge,Math.sin(Ee)*Ge),e.stroke(),e.restore()}e.save(),e.translate(W,E),e.rotate(ge);const Tn=.4+ne*.3;e.strokeStyle=`rgba(0, 255, 255, ${Tn})`,e.lineWidth=2+ne*2,e.beginPath(),e.moveTo(0,0),e.lineTo(O*1.1,0),e.stroke(),e.restore(),e.strokeStyle=`rgba(0, 255, 255, ${.1+ne*.15})`,e.lineWidth=1;for(let ce=0;ce<8;ce++){const be=ce/8*Math.PI*2,Fe=Math.tan(T+ce*.3)*.1,Ee=O*(1+Math.min(Math.max(Fe,-.15),.15));if(e.beginPath(),e.moveTo(W,E),e.lineTo(W+Math.cos(be)*Ee,E+Math.sin(be)*Ee),e.stroke(),ce%2===0){const Ge=Math.round(be*180/Math.PI%360),jt=O*1.12,o=W+Math.cos(be)*jt,M=E+Math.sin(be)*jt;e.font="bold 10px monospace",e.fillStyle=`rgba(0, 255, 255, ${.7*ne})`,e.textAlign="center",e.textBaseline="middle",e.fillText(`${Ge}Â°`,o,M)}}const tn=.6+ne*.3;e.font="11px monospace",e.textAlign="left";const Ht=W+O*.3,nn=E-O*.8,$n=14,jn=(Math.sin(T*3)*100).toFixed(1),Gn=(Math.tan(T*.8)*10).toFixed(1),an=[`r = ${Math.round(F.r)}px`,`Î¸ = ${Math.round(ge*180/Math.PI%360)}Â°`,`Ï‰ = ${v()}Â°/s`,`sin(t) = ${jn}`,`tan(t) = ${Gn}`,`n = ${r()||0}`];e.fillStyle=`rgba(0, 0, 0, ${.7+ne*.2})`,e.fillRect(Ht-2,nn-8,110,an.length*$n),an.forEach((ce,be)=>{const Fe=nn+be*$n,Ee=["rgba(0, 255, 255, ","rgba(255, 0, 255, ","rgba(255, 255, 0, "],Ge=tn+Math.sin(T*2+be)*.2;e.fillStyle=Ee[be%3]+Ge+")",e.fillText(ce,Ht,Fe)}),e.font="bold 10px sans-serif",e.textAlign="center";const Wt=E+O+25;e.fillStyle=`rgba(0, 0, 0, ${.7+ne*.2})`,e.fillRect(W-70,Wt-8,140,16),e.fillStyle=`rgba(100, 255, 200, ${.8+ne*.2})`,e.fillText("STROBOSCOPIC ANALYSIS",W,Wt);for(let ce=0;ce<6;ce++){const be=ce/6*Math.PI*2+T*.3,Fe=Math.sin(T*4+ce*1.5)*.1,Ee=O*(1+Fe),Ge=W+Math.cos(be)*Ee,jt=E+Math.sin(be)*Ee,o=2+ne*2;e.beginPath(),e.arc(Ge,jt,o,0,Math.PI*2),e.fillStyle=ce%2===0?`rgba(0, 255, 255, ${ne})`:`rgba(255, 0, 255, ${ne})`,e.fill()}e.beginPath(),e.lineWidth=2+ne,e.strokeStyle=`rgba(0, 255, 255, ${.8+ne*.2})`,e.arc(W,E,O,0,Math.PI*2),e.stroke(),e.lineWidth=2;const Nt=Math.max(15,O*.15)*(1+ne*.3);if(e.beginPath(),e.strokeStyle=`rgba(0, 255, 255, ${.9*ne})`,e.moveTo(W-Nt,E),e.lineTo(W+Nt,E),e.moveTo(W,E-Nt),e.lineTo(W,E+Nt),e.stroke(),h()&&h().length){e.fillStyle=`rgba(255, 0, 255, ${.9*ne})`;for(const ce of h()){const be=ce.angle,Fe=W+Math.cos(be)*O,Ee=E+Math.sin(be)*O,Ge=2.5+ne*1.5;e.beginPath(),e.arc(Fe,Ee,Ge,0,Math.PI*2),e.fill()}}}catch(F){console.warn("overlay draw failed",F)}if(a()&&!u())try{let F;if(a()){const V=c().startTime||0;F=(V>0?Date.now()-V:Date.now())%2e3/2e3}else F=Math.min(1,(Date.now()-c().startTime)/2e3);if(e.fillStyle=a()?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.3)",e.fillRect(-oe/2-100,-B/2-100,oe+200,B+200),k()){const V=k(),W=oe*t(H)/t(U).width,E=(V.x-t(U).width/2)*W,O=(V.y-t(U).height/2)*W,T=V.r*W;e.strokeStyle=`rgba(100, 200, 255, ${.8*(1-F)})`,e.lineWidth=2;for(let ne=0;ne<3;ne++){const _t=T*(.3+F*1.2+ne*.3);e.beginPath(),e.arc(E,O,_t,0,Math.PI*2),e.stroke()}e.strokeStyle="rgba(100, 200, 255, 0.9)",e.lineWidth=3;const ge=F*Math.PI*6,Te=T*1.8;e.beginPath(),e.moveTo(E,O),e.lineTo(E+Math.cos(ge)*Te,O+Math.sin(ge)*Te),e.stroke();const ye=4+Math.sin(F*Math.PI*4)*2;e.fillStyle=`rgba(100, 200, 255, ${.9*Math.sin(F*Math.PI)})`,e.beginPath(),e.arc(E,O,ye,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(100, 200, 255, ${Math.sin(F*Math.PI)})`,e.font="bold 14px sans-serif",e.textAlign="center",e.fillText("SCANNING...",E,O-T-20)}else{const V=Math.max(oe,B)/2;e.strokeStyle=`rgba(100, 200, 255, ${.6})`,e.lineWidth=2;for(let E=0;E<4;E++){const O=V*(F+E*.25)%1,T=1-O;e.strokeStyle=`rgba(100, 200, 255, ${T*.6})`,e.beginPath(),e.arc(0,0,O*V,0,Math.PI*2),e.stroke()}e.strokeStyle="rgba(100, 200, 255, 0.8)",e.lineWidth=3;const W=F*Math.PI*4;e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(W)*V,Math.sin(W)*V),e.stroke(),e.fillStyle=`rgba(100, 200, 255, ${.8+.2*Math.sin(F*Math.PI*4)})`,e.font="bold 18px sans-serif",e.textAlign="center",a()?x()==="move-center"?(e.fillText("âš™ï¸ EDIT MODE - ADJUST POSITION & ZOOM",0,-60),e.font="bold 16px sans-serif",e.fillStyle="rgba(255, 200, 100, 0.95)",e.fillText("ðŸŽ¯ Align crosshair with rotation center",0,-20),e.font="14px sans-serif",e.fillStyle="rgba(200, 255, 200, 0.9)",e.fillText("ðŸ‘† Drag to move  â€¢  ðŸ” Scroll/Pinch to zoom",0,20),e.font="bold 14px sans-serif",e.fillStyle="rgba(100, 255, 100, 0.9)",e.fillText('Click "Confirm Detection" when ready',0,60)):(e.fillText("ðŸ”„ ROTATE SLICES MODE",0,-60),e.font="bold 16px sans-serif",e.fillStyle="rgba(255, 200, 100, 0.95)",e.fillText("ðŸ“ Divide according to the scenes",0,-20),e.font="14px sans-serif",e.fillStyle="rgba(200, 255, 200, 0.9)",e.fillText("ðŸ‘† Drag to rotate divisions",0,20),e.font="bold 14px sans-serif",e.fillStyle="rgba(100, 255, 100, 0.9)",e.fillText("Double-tap to switch back to move mode",0,60)):(e.fillText("ANALYZING IMAGE...",0,-20),e.font="12px sans-serif",e.fillText(`${Math.round(F*100)}%`,0,10))}}catch(F){console.warn("radar animation failed",F)}if(D()&&l()){const F=1e3/z(),V=t(ft)%F/F,W=Math.max(0,Math.min(1,(z()-40)/30));let E;if(W<.33?E=V>.5?.85:0:W<.67?E=Math.sin(V*Math.PI*2)*.5+.5>.6?.6:0:E=(Math.sin(V*Math.PI*2)*.5+.5)*.3,E>.05){const ye=e.createRadialGradient(d/2,C/2,0,d/2,C/2,Math.max(d,C)*.8);ye.addColorStop(0,`rgba(0, 0, 0, ${E*.7})`),ye.addColorStop(.5,`rgba(0, 0, 0, ${E})`),ye.addColorStop(1,`rgba(0, 0, 0, ${E*.9})`),e.fillStyle=ye,e.fillRect(-d,-C,d*3,C*3),W<.5&&(e.fillStyle=`rgba(20, 20, 40, ${E*.15})`,e.fillRect(-d,-C,d*3,C*3))}e.save(),e.translate(d/2,C/2);const O=-d/2+15,T=-C/2+15;let ge,Te;z()<50?(ge="rgba(255, 100, 100, 0.9)",Te="FLICKER"):z()<60?(ge="rgba(255, 180, 50, 0.9)",Te="THRESHOLD"):(ge="rgba(100, 220, 100, 0.9)",Te="FUSED"),e.fillStyle="rgba(0, 0, 0, 0.75)",e.beginPath(),e.roundRect(O,T,85,18,4),e.fill(),e.font="bold 11px monospace",e.fillStyle=ge,e.textAlign="left",e.textBaseline="middle",e.fillText(`${z()}Hz`,O+5,T+9),e.font="9px sans-serif",e.fillStyle="rgba(255, 255, 255, 0.7)",e.fillText(Te,O+42,T+9),e.restore()}if(e.restore(),a()||u()){const F=Date.now()%1e3/1e3,V=.7+.3*Math.sin(F*Math.PI*2);e.save(),e.translate(d/2,C/2);const W=s()||r()||12;if(a()&&W>0){const O=Math.min(d,C)*.3,T=Math.PI*2/W,ge=g();for(let Te=0;Te<W;Te++){const ye=Te*T-Math.PI/2+ge,ne=ye+T,_t=.15+.1*(Te%2*.5);e.fillStyle=`rgba(100, 200, 255, ${_t})`,e.beginPath(),e.moveTo(0,0),e.arc(0,0,O,ye,ne),e.closePath(),e.fill(),e.strokeStyle=`rgba(100, 200, 255, ${.4*V})`,e.lineWidth=2,e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(ye)*O,Math.sin(ye)*O),e.stroke()}e.strokeStyle=`rgba(100, 200, 255, ${.5*V})`,e.lineWidth=3,e.beginPath(),e.arc(0,0,O,0,Math.PI*2),e.stroke()}e.strokeStyle=`rgba(255, 100, 0, ${V})`,e.lineWidth=4;const E=Math.min(d,C)*.1;e.beginPath(),e.arc(0,0,E*.7,0,Math.PI*2),e.stroke(),e.lineWidth=3,e.beginPath(),e.moveTo(-E,0),e.lineTo(E,0),e.stroke(),e.beginPath(),e.moveTo(0,-E),e.lineTo(0,E),e.stroke(),e.beginPath(),e.arc(0,0,10+3*Math.sin(F*Math.PI*2),0,Math.PI*2),e.fillStyle=`rgba(255, 100, 0, ${V})`,e.fill(),e.strokeStyle="rgba(255, 255, 255, 0.9)",e.lineWidth=2,e.stroke(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.fillStyle="rgba(255, 255, 255, 0.95)",e.fill(),e.restore()}}$e(()=>(a(),Dt),()=>{a()?(P(Y,0),P(J,0),P(H,1),vn.set("move-center"),Se()):Dt.set(0)}),$e(()=>(t(Y),t(J),t(H)),()=>{da.set({translateX:t(Y),translateY:t(J),scale:t(H)})}),$e(()=>(l(),At),()=>{l()&&At.set(!1)}),$e(()=>(p(),t(U)),()=>{p()?yn(p()):(t(U)&&P(U,null),P(at,!1),Se())}),$e(()=>s(),()=>{s()!==void 0&&Se()}),$e(()=>(l(),c(),a(),t(ke)),()=>{l()||c().active||a()?t(ke)||P(ke,requestAnimationFrame(Rt)):t(ke)&&(cancelAnimationFrame(t(ke)),P(ke,null),P(ft,0))}),ma(),On();var Ve=ji(),kn=q(Ve);Sa(kn,d=>P(I,d),()=>t(I));var zt=y(kn,2);{var Pt=d=>{var C=Hi(),X=q(C);L(C),De(te=>{ot(C,f()&&t(St)!==null?`right: auto; top: auto; left: ${t(St)}px; top: ${t(Bt)}px;`:""),We(X,`Speed: ${te??""}Â°/s`)},[()=>(v(),Qe(()=>v().toFixed(0)))]),R("pointerdown",C,Mn),A(d,C)};le(zt,d=>{(t(nt)||f())&&d(Pt)})}var Sn=y(zt,2);{var Hn=d=>{var C=Ni(),X=Ze(C),te=q(X);{var oe=T=>{var ge=xe("ðŸŽ¯ EDIT MODE - Drag to position â€¢ Scroll to zoom â€¢ Double-tap to rotate slices");A(T,ge)},B=T=>{var ge=xe("ðŸ”„ ROTATE SLICES - Drag to rotate â€¢ Double-tap to move center");A(T,ge)};le(te,T=>{x()==="move-center"?T(oe):T(B,!1)})}L(X);var ve=y(X,2);{var Pe=T=>{var ge=Wi();A(T,ge)};le(ve,T=>{x()==="move-center"&&T(Pe)})}var Ie=y(ve,2),Ce=y(q(Ie),2),F=q(Ce),V=y(F,2),W=q(V),E=q(W,!0);L(W),qn(2),L(V);var O=y(V,2);L(Ce),L(Ie),De(()=>We(E,s()||12)),R("click",F,we(()=>qt.set(Math.max(6,(s()||12)-1)))),R("pointerdown",F,we(function(T){lt.call(this,i,T)})),R("pointermove",F,we(function(T){lt.call(this,i,T)})),R("pointerup",F,we(function(T){lt.call(this,i,T)})),R("click",O,we(()=>qt.set(Math.min(100,(s()||12)+1)))),R("pointerdown",O,we(function(T){lt.call(this,i,T)})),R("pointermove",O,we(function(T){lt.call(this,i,T)})),R("pointerup",O,we(function(T){lt.call(this,i,T)})),A(d,C)};le(Sn,d=>{a()&&d(Hn)})}L(Ve),Sa(Ve,d=>P(b,d),()=>t(b)),De(()=>Ln(Ve,1,`canvas-wrapper ${a()?"edit-mode":""}`,"svelte-byh4af")),A(n,Ve),wn(),G()}async function Ui(n,i,a={}){const{x:l,y:p,r:s}=i||{x:n.width/2,y:n.height/2,r:Math.min(n.width,n.height)/2},f=a.samples||720,v=a.innerOffset||-Math.max(2,Math.round(s*.06)),x=a.outerOffset||Math.max(2,Math.round(s*.06)),g=a.thresholdFactor||.6,c=document.createElement("canvas");c.width=n.width,c.height=n.height;const w=c.getContext("2d");w.drawImage(n,0,0);const _=w.getImageData(0,0,c.width,c.height).data,k=c.width,S=c.height;function m(N,Y){const J=Math.round(N),re=Math.round(Y);if(J<0||J>=k||re<0||re>=S)return 0;const Xe=(re*k+J)*4,Le=_[Xe],Be=_[Xe+1],et=_[Xe+2];return .2126*Le+.7152*Be+.0722*et}const r=new Array(f);for(let N=0;N<f;N++){const Y=N/f*Math.PI*2,J=[],re=3;for(let Le=0;Le<re;Le++){const Be=Le/(re-1),et=s+v+(x-v)*Be,ke=l+et*Math.cos(Y),gt=p+et*Math.sin(Y);J.push(m(ke,gt))}const Xe=J.reduce((Le,Be)=>Le+Be,0)/J.length;r[N]=Xe}const h=r.reduce((N,Y)=>N+Y,0)/r.length,u=Math.sqrt(r.reduce((N,Y)=>N+(Y-h)**2,0)/r.length),D=h+u*g,z=r.map(N=>N>D);let $=0,G=!1,b=[],I=0;for(let N=0;N<z.length*2;N++){const Y=N%z.length;if(z[Y]?(I++,G=!0):(G&&(b.push(I),I=0),G=!1),N>=z.length&&!G)break}G&&I>0&&b.push(I);const e=Math.max(2,Math.round(f/360*(a.minDegrees||5))),ee=b.filter(N=>N>=e);$=ee.length;const H=[];let Me=0;for(const N of b){const Y=Me%f,J=(Me+N-1)%f,re=(Y+Math.floor(N/2))%f;H.push({start:Y,end:J,mid:re,angle:re/f*2*Math.PI}),Me+=N+1}return{count:$,samples:r,mask:z,groups:ee,positions:H,canvas:c}}function Yi(n,i=24,a={}){const l=[],{width:p,height:s}=n,f=a.circle||{x:p/2,y:s/2,r:Math.min(p,s)/2},v=a.margin??1.05,x=Math.round(f.r*v),g=x*2,c=a.outputSize||Math.max(32,Math.round(g)),w=a.fps||24,_=typeof a.rotationSpeed=="number"?a.rotationSpeed:0,k=a.direction==null?1:a.direction,S=a.initialRotation||0,m=a.fillOuterCircle||!1,r=a.fillColor||"#000000",h=document.createElement("canvas");h.width=g,h.height=g;const u=h.getContext("2d"),D=Math.round(f.x-x),z=Math.round(f.y-x);try{u.drawImage(n,D,z,g,g,0,0,g,g)}catch{u.drawImage(n,0,0)}const G=_/w*Math.PI/180*k;Math.round(g*(a.zoom||1));for(let b=0;b<i;b++){const I=b*G+S,e=document.createElement("canvas");e.width=c,e.height=c;const ee=e.getContext("2d");m&&(ee.fillStyle=r,ee.fillRect(0,0,c,c)),ee.translate(c/2,c/2),ee.rotate(I);const H=Math.round(g*(a.zoom||1)),Me=H;ee.drawImage(h,-H/2,-Me/2,H,Me),l.push(e)}return l}function Xi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function An(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oa={exports:{}},Aa;function Bi(){return Aa||(Aa=1,(function(n,i){(function(a){n.exports=a()})(function(){return(function a(l,p,s){function f(g,c){if(!p[g]){if(!l[g]){var w=typeof An=="function"&&An;if(!c&&w)return w(g,!0);if(v)return v(g,!0);var _=new Error("Cannot find module '"+g+"'");throw _.code="MODULE_NOT_FOUND",_}var k=p[g]={exports:{}};l[g][0].call(k.exports,function(S){var m=l[g][1][S];return f(m||S)},k,k.exports,a,l,p,s)}return p[g].exports}for(var v=typeof An=="function"&&An,x=0;x<s.length;x++)f(s[x]);return f})({1:[function(a,l,p){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}l.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(c){if(!v(c)||c<0||isNaN(c))throw TypeError("n must be a positive number");return this._maxListeners=c,this},s.prototype.emit=function(c){var w,_,k,S,m,r;if(this._events||(this._events={}),c==="error"&&(!this._events.error||x(this._events.error)&&!this._events.error.length)){if(w=arguments[1],w instanceof Error)throw w;var h=new Error('Uncaught, unspecified "error" event. ('+w+")");throw h.context=w,h}if(_=this._events[c],g(_))return!1;if(f(_))switch(arguments.length){case 1:_.call(this);break;case 2:_.call(this,arguments[1]);break;case 3:_.call(this,arguments[1],arguments[2]);break;default:S=Array.prototype.slice.call(arguments,1),_.apply(this,S)}else if(x(_))for(S=Array.prototype.slice.call(arguments,1),r=_.slice(),k=r.length,m=0;m<k;m++)r[m].apply(this,S);return!0},s.prototype.addListener=function(c,w){var _;if(!f(w))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",c,f(w.listener)?w.listener:w),this._events[c]?x(this._events[c])?this._events[c].push(w):this._events[c]=[this._events[c],w]:this._events[c]=w,x(this._events[c])&&!this._events[c].warned&&(g(this._maxListeners)?_=s.defaultMaxListeners:_=this._maxListeners,_&&_>0&&this._events[c].length>_&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),typeof console.trace=="function"&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(c,w){if(!f(w))throw TypeError("listener must be a function");var _=!1;function k(){this.removeListener(c,k),_||(_=!0,w.apply(this,arguments))}return k.listener=w,this.on(c,k),this},s.prototype.removeListener=function(c,w){var _,k,S,m;if(!f(w))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;if(_=this._events[c],S=_.length,k=-1,_===w||f(_.listener)&&_.listener===w)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,w);else if(x(_)){for(m=S;m-- >0;)if(_[m]===w||_[m].listener&&_[m].listener===w){k=m;break}if(k<0)return this;_.length===1?(_.length=0,delete this._events[c]):_.splice(k,1),this._events.removeListener&&this.emit("removeListener",c,w)}return this},s.prototype.removeAllListeners=function(c){var w,_;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[c]&&delete this._events[c],this;if(arguments.length===0){for(w in this._events)w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events={},this}if(_=this._events[c],f(_))this.removeListener(c,_);else if(_)for(;_.length;)this.removeListener(c,_[_.length-1]);return delete this._events[c],this},s.prototype.listeners=function(c){var w;return!this._events||!this._events[c]?w=[]:f(this._events[c])?w=[this._events[c]]:w=this._events[c].slice(),w},s.prototype.listenerCount=function(c){if(this._events){var w=this._events[c];if(f(w))return 1;if(w)return w.length}return 0},s.listenerCount=function(c,w){return c.listenerCount(w)};function f(c){return typeof c=="function"}function v(c){return typeof c=="number"}function x(c){return typeof c=="object"&&c!==null}function g(c){return c===void 0}},{}],2:[function(a,l,p){var s,f,v,x,g;g=navigator.userAgent.toLowerCase(),x=navigator.platform.toLowerCase(),s=g.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],v=s[1]==="ie"&&document.documentMode,f={name:s[1]==="version"?s[3]:s[1],version:v||parseFloat(s[1]==="opera"&&s[4]?s[4]:s[2]),platform:{name:g.match(/ip(?:ad|od|hone)/)?"ios":(g.match(/(?:webos|android)/)||x.match(/mac|win|linux/)||["other"])[0]}},f[f.name]=!0,f[f.name+parseInt(f.version,10)]=!0,f.platform[f.platform.name]=!0,l.exports=f},{}],3:[function(a,l,p){var s,f,v,x=function(_,k){for(var S in k)g.call(k,S)&&(_[S]=k[S]);function m(){this.constructor=_}return m.prototype=k.prototype,_.prototype=new m,_.__super__=k.prototype,_},g={}.hasOwnProperty,c=[].indexOf||function(_){for(var k=0,S=this.length;k<S;k++)if(k in this&&this[k]===_)return k;return-1},w=[].slice;s=a("events").EventEmitter,v=a("./browser.coffee"),f=(function(_){var k,S;x(m,_),k={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},S={delay:500,copy:!1};function m(r){var h,u,D;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(r);for(u in k)D=k[u],(h=this.options)[u]==null&&(h[u]=D)}return m.prototype.setOption=function(r,h){if(this.options[r]=h,this._canvas!=null&&(r==="width"||r==="height"))return this._canvas[r]=h},m.prototype.setOptions=function(r){var h,u,D;u=[];for(h in r)g.call(r,h)&&(D=r[h],u.push(this.setOption(h,D)));return u},m.prototype.addFrame=function(r,h){var u,D;h==null&&(h={}),u={},u.transparent=this.options.transparent;for(D in S)u[D]=h[D]||S[D];if(this.options.width==null&&this.setOption("width",r.width),this.options.height==null&&this.setOption("height",r.height),typeof ImageData<"u"&&ImageData!==null&&r instanceof ImageData)u.data=r.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&r instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&r instanceof WebGLRenderingContext)h.copy?u.data=this.getContextData(r):u.context=r;else if(r.childNodes!=null)h.copy?u.data=this.getImageData(r):u.image=r;else throw new Error("Invalid image");return this.frames.push(u)},m.prototype.render=function(){var r,h,u;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var D,z,$;for($=[],D=0,z=this.frames.length;0<=z?D<z:D>z;0<=z?++D:--D)$.push(null);return $}).call(this),h=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(r=0,u=h;0<=u?r<u:r>u;0<=u?++r:--r)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},m.prototype.abort=function(){for(var r;r=this.activeWorkers.shift(),r!=null;)this.log("killing active worker"),r.terminate();return this.running=!1,this.emit("abort")},m.prototype.spawnWorkers=function(){var r,h,u;return r=Math.min(this.options.workers,this.frames.length),(function(){u=[];for(var D=h=this.freeWorkers.length;h<=r?D<r:D>r;h<=r?D++:D--)u.push(D);return u}).apply(this).forEach((function(D){return function(z){var $;return D.log("spawning worker "+z),$=new Worker(D.options.workerScript),$.onmessage=function(G){return D.activeWorkers.splice(D.activeWorkers.indexOf($),1),D.freeWorkers.push($),D.frameFinished(G.data)},D.freeWorkers.push($)}})(this)),r},m.prototype.frameFinished=function(r){var h,u;if(this.log("frame "+r.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[r.index]=r,this.options.globalPalette===!0&&(this.options.globalPalette=r.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(h=1,u=this.freeWorkers.length;1<=u?h<u:h>u;1<=u?++h:--h)this.renderNextFrame();return c.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},m.prototype.finishRendering=function(){var r,h,u,D,z,$,G,b,I,e,ee,H,Me,N,Y,J;for(b=0,N=this.imageParts,z=0,I=N.length;z<I;z++)h=N[z],b+=(h.data.length-1)*h.pageSize+h.cursor;for(b+=h.pageSize-h.cursor,this.log("rendering finished - filesize "+Math.round(b/1e3)+"kb"),r=new Uint8Array(b),H=0,Y=this.imageParts,$=0,e=Y.length;$<e;$++)for(h=Y[$],J=h.data,u=G=0,ee=J.length;G<ee;u=++G)Me=J[u],r.set(Me,H),u===h.data.length-1?H+=h.cursor:H+=h.pageSize;return D=new Blob([r],{type:"image/gif"}),this.emit("finished",D,r)},m.prototype.renderNextFrame=function(){var r,h,u;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return r=this.frames[this.nextFrame++],u=this.freeWorkers.shift(),h=this.getTask(r),this.log("starting frame "+(h.index+1)+" of "+this.frames.length),this.activeWorkers.push(u),u.postMessage(h)},m.prototype.getContextData=function(r){return r.getImageData(0,0,this.options.width,this.options.height).data},m.prototype.getImageData=function(r){var h;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),h=this._canvas.getContext("2d"),h.setFill=this.options.background,h.fillRect(0,0,this.options.width,this.options.height),h.drawImage(r,0,0),this.getContextData(h)},m.prototype.getTask=function(r){var h,u;if(h=this.frames.indexOf(r),u={index:h,last:h===this.frames.length-1,delay:r.delay,transparent:r.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:v.name==="chrome"},r.data!=null)u.data=r.data;else if(r.context!=null)u.data=this.getContextData(r.context);else if(r.image!=null)u.data=this.getImageData(r.image);else throw new Error("Invalid frame");return u},m.prototype.log=function(){var r;if(r=1<=arguments.length?w.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,r)},m})(s),l.exports=f},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(oa)),oa.exports}var Vi=Bi();const Ji=Xi(Vi),Zi=""+new URL("../assets/gif.worker.CjkyQP34.js",import.meta.url).href;async function Ki(n,i=24){if(!n||n.length===0)throw new Error("No frames to export");const a=new Ji({workers:2,quality:10,width:n[0].width,height:n[0].height,workerScript:Zi,repeat:0,background:null,comment:"Created with Phenakistoscope Lab - https://tclaret.github.io/phenaki-lab/"}),l=Math.round(1e3/i);for(const p of n){const s=p.width,f=p.height,v=document.createElement("canvas");v.width=s,v.height=f;const x=v.getContext("2d");x.fillStyle="#ffffff",x.fillRect(0,0,s,f),x.drawImage(p,0,0),a.addFrame(v,{delay:l,copy:!0})}return new Promise((p,s)=>{a.on("finished",function(f){const v=URL.createObjectURL(f);p(v)}),a.on("error",s),a.render()})}var Qi=pe('<div class="export-overlay svelte-14nyow8" role="status" aria-live="polite"><div class="export-box svelte-14nyow8"><div class="spinner svelte-14nyow8" aria-hidden="true"></div> <div class="export-text svelte-14nyow8">Workingâ€¦ Exporting GIF â€” please wait</div></div></div>'),es=pe('<button class="confirm-btn svelte-14nyow8">Confirm Detection</button> <button class="svelte-14nyow8">Cancel</button>',1),ts=pe("<button>Detect Circle & Count</button>"),ns=pe('<span style="background: #4a9eff; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.75em; font-weight: bold; margin-left: 4px;" class="svelte-14nyow8"> </span>'),as=pe('<input type="color" style="width:40px;height:28px;border:1px solid #555;border-radius:4px;cursor:pointer;margin-left:4px;" title="Choose fill color" class="svelte-14nyow8"/>'),is=pe('<div style="margin-top: 16px; padding: 12px; background: rgba(74, 158, 255, 0.08); border-radius: 6px; border: 1px solid rgba(74, 158, 255, 0.2);" class="svelte-14nyow8"><div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;" class="svelte-14nyow8"><div style="font-weight: 600; color: #4a9eff; font-size: 0.95em;" class="svelte-14nyow8">âš¡ Flicker Fusion Threshold</div> <a href="https://en.wikipedia.org/wiki/Flicker_fusion_threshold" target="_blank" rel="noopener noreferrer" style="display: flex; align-items: center; gap: 4px; font-size: 0.75em; color: #aaa; text-decoration: none; opacity: 0.7; transition: opacity 0.2s;" title="Learn more on Wikipedia" class="svelte-14nyow8"><svg width="14" height="14" viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg" class="svelte-14nyow8"><path fill="currentColor" d="M120 0C53.8 0 0 53.8 0 120s53.8 120 120 120 120-53.8 120-120S186.2 0 120 0zm0 217.5c-53.8 0-97.5-43.7-97.5-97.5S66.2 22.5 120 22.5s97.5 43.7 97.5 97.5-43.7 97.5-97.5 97.5zm-7.5-165h15v90h-15zm0 105h15v15h-15z" class="svelte-14nyow8"></path></svg> <span class="svelte-14nyow8">Wikipedia</span></a></div> <div style="font-size: 0.8em; color: #888; font-style: italic; margin-bottom: 10px;" class="svelte-14nyow8">Note: This test only affects visualization, not the exported GIF</div> <div style="margin-bottom: 12px;" class="svelte-14nyow8"><div style="font-size: 0.85em; color: #aaa; margin-bottom: 6px;" class="svelte-14nyow8">Quick Presets:</div> <div style="display: flex; gap: 6px; flex-wrap: wrap;" class="svelte-14nyow8"><button class="flicker-preset-btn svelte-14nyow8">30 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">42 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">50 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">55 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">60 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">70 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">80 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">100 Hz</button></div></div> <div style="margin-top: 12px;" class="svelte-14nyow8"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;" class="svelte-14nyow8"><span style="font-size: 0.85em; color: #ccc;" class="svelte-14nyow8">Fine Tune:</span> <span style="font-size: 1.1em; font-weight: bold; color: #4a9eff;" class="svelte-14nyow8"> </span></div> <input type="range" min="20" max="100" step="0.5" style="width: 100%; cursor: pointer;" class="svelte-14nyow8"/> <div style="display: flex; justify-content: space-between; font-size: 0.7em; color: #666; margin-top: 4px;" class="svelte-14nyow8"><span class="svelte-14nyow8">20 Hz</span> <span style="color: #4a9eff; font-weight: 500;" class="svelte-14nyow8"><!></span> <span class="svelte-14nyow8">100 Hz</span></div></div> <div style="margin-top: 10px; padding: 8px; background: rgba(74, 158, 255, 0.12); border-radius: 4px; font-size: 0.8em;" class="svelte-14nyow8"><div style="font-weight: 500; color: #4a9eff; margin-bottom: 3px;" class="svelte-14nyow8"><!></div> <div style="color: #aaa; font-size: 0.9em;" class="svelte-14nyow8"><!></div></div></div>'),ss=pe('<div class="drag-handle svelte-14nyow8" title="Drag to move">â‹®â‹®</div>'),rs=pe('<div><!> <div style="display:flex;gap:12px;align-items:center;" class="svelte-14nyow8"><button class="speed-btn svelte-14nyow8">âˆ’</button> <div style="text-align:center;min-width:120px;" class="svelte-14nyow8"><div class="speed-display svelte-14nyow8"> </div> <div style="font-size:11px;opacity:0.6;margin-top:4px;" class="svelte-14nyow8">Rotation Speed</div></div> <button class="speed-btn svelte-14nyow8">+</button></div></div>'),os=pe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Use +/âˆ’ buttons above to adjust speed)</em>'),ls=pe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Touch: drag up to speed up, down to slow down)</em>'),cs=pe('<div class="svelte-14nyow8"><strong class="svelte-14nyow8">Circle:</strong> </div>'),fs=pe('<div class="panel svelte-14nyow8"><!> <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><button> </button> <button class="svelte-14nyow8">Reverse</button> <!> <button class="svelte-14nyow8">Apply Suggested Speed</button> <div class="gif-export-group svelte-14nyow8"><button class="save-gif-btn svelte-14nyow8"> </button> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">Frames:</span> <input type="number" min="6" step="1" style="width:80px;padding:4px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <span style="font-size:11px;opacity:0.6;" title="Leave empty for auto-detection" class="svelte-14nyow8"><!></span></label> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">FPS:</span> <select style="padding:4px;border-radius:4px;border:1px solid #ccc;background:#333;color:white;" class="svelte-14nyow8"><option class="svelte-14nyow8">3 (Ultra Slow)</option><option class="svelte-14nyow8">5 (Very Slow)</option><option class="svelte-14nyow8">8 (Slow)</option><option class="svelte-14nyow8">10 (Classic)</option><option class="svelte-14nyow8">15 (Natural)</option><option class="svelte-14nyow8">20 (Smooth)</option><option class="svelte-14nyow8">24 (Cinema)</option><option class="svelte-14nyow8">30 (Fast)</option></select></label></div> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Show Overlay</span></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Flicker Effect</span> <!></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Fill Outer Circle</span> <!></label></div> <!> <!> <div style="margin-top:12px;" class="svelte-14nyow8"><div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><div class="svelte-14nyow8"><strong class="svelte-14nyow8">Current Speed:</strong> <!></div> <div style="display:flex;gap:6px;align-items:center;" class="svelte-14nyow8"><label for="manual-speed-input" style="font-size:12px;" class="svelte-14nyow8">Type speed:</label> <input id="manual-speed-input" type="number" min="1" step="1" style="width:100px;padding:6px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <button class="svelte-14nyow8">Set</button></div></div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Selected scenes count:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Suggested speed:</strong> </div> <!></div></div>');function ds(n,i){_n(i,!1);const a=()=>j(Et,"$isPlaying",u),l=()=>j(gn,"$detectedCircle",u),p=()=>j(ct,"$rotationSpeed",u),s=()=>j(Xt,"$imageUrl",u),f=()=>j(da,"$canvasTransform",u),v=()=>j(ua,"$playerCanvas",u),x=()=>j(qt,"$gifFrameCount",u),g=()=>j(ha,"$isMobile",u),c=()=>j(mn,"$detectedCount",u),w=()=>j(hn,"$suggestedRotationSpeed",u),_=()=>j(fa,"$overlayVisible",u),k=()=>j(yt,"$editMode",u),S=()=>j(pa,"$flickerEnabled",u),m=()=>j(Je,"$flickerFrequency",u),r=()=>j(Ut,"$fillOuterCircle",u),h=()=>j(Yt,"$outerCircleFillColor",u),[u,D]=Rn(),z=se(),$=se(),G=se(),b=se(),I=se(),e=se();let ee=se(!1),H=se(!1);async function Me(){Et.update(o=>!o)}let N=null;function Y(o){o==="increase"?re():Xe(),N&&clearInterval(N),N=setInterval(()=>{o==="increase"?re():Xe()},100)}function J(){N&&(clearInterval(N),N=null)}function re(){ct.update(o=>Math.min(1e4,o+60)),$t.set(!0)}function Xe(){ct.update(o=>Math.max(10,o-60)),$t.set(!0)}function Le(){ca.update(o=>o*-1)}async function Be(){if(!s())return;const M=Date.now();un.set({active:!0,progress:0,startTime:M}),yt.set(!0)}async function et(){const o=s();if(!o)return;P(ee,!0);const M=f();yt.set(!1);const K=Date.now();un.set({active:!0,progress:0,startTime:K}),a()||requestAnimationFrame(()=>{});try{const Q=await at(o);let ae=null;const ie=v();if(ie){const Ae=ie.clientWidth,ut=ie.clientHeight,Ye=Q.width/Q.height,sn=Ae/ut;let wt,rn;Ye>sn?(wt=Ae,rn=Ae/Ye):(rn=ut,wt=ut*Ye);const Dn=-M.translateX,Un=-M.translateY,Yn=Dn/M.scale,Xn=Un/M.scale,on=Q.width/wt,ln=Yn*on+Q.width/2,Bn=Xn*on+Q.height/2;ae={x:ln,y:Bn,r:Math.min(Q.width,Q.height)/2*.9}}ae||(ae={x:Q.width/2,y:Q.height/2,r:Math.min(Q.width,Q.height)/2*.9});const he=await Ui(Q,ae,{samples:720}),st=2e3-(Date.now()-K);st>0&&await new Promise(Ae=>setTimeout(Ae,st)),gn.set(ae),mn.set(he.count),zn.set(he.positions||[]);const rt=(he.count>0?360/he.count:1)*30;hn.set(rt),un.set({active:!1,progress:1,startTime:K}),At.set(!0),Et.set(!1)}finally{P(ee,!1)}}function ke(){hn.subscribe(o=>{o&&(ct.set(o),$t.set(!0))})()}function gt(){yt.set(!1),At.set(!1),un.set({active:!1,progress:0,startTime:0})}let xt=se(0);function ft(){const o=Number(t(xt))||0;o<0||(ct.set(o),$t.set(!0))}let mt=se(!1),tt=se(15);async function nt(){const o=s()||Gt(Xt);if(!o)return alert("No image loaded to export.");if(!t(G))return alert("Please detect the circle before exporting the GIF.");const M=await at(o),K=document.createElement("canvas");K.width=M.width,K.height=M.height,K.getContext("2d").drawImage(M,0,0,M.width,M.height),P(mt,!0);try{let ae;t($)&&t($)!==t(b)*2?ae=t($):t(b)&&t(b)>0?ae=Math.max(12,t(b)*2):ae=t($)||24;const ie=t(G),he=Number(Gt(ct)||0),Ue=Number(Gt(ca)||1),st=360/ae,Oe=Gt(Dt)||0,me=Gt(Ut),rt=Gt(Yt),Ae=Yi(K,ae,{circle:ie,margin:1.1,zoom:1,fps:t(tt),rotationSpeed:st*t(tt),direction:Ue,initialRotation:Oe,fillOuterCircle:me,fillColor:rt}),ut=await Ki(Ae,t(tt)),Ye=document.createElement("a");Ye.href=ut;const sn=new Date().toISOString().slice(0,19).replace(/:/g,"-");Ye.download=`phenaki-lab_${sn}_${Ae.length}frames_${t(tt)}fps.gif`,document.body.appendChild(Ye),Ye.click(),Ye.remove()}catch(ae){console.error("GIF export failed",ae),alert("GIF export failed: "+(ae&&ae.message))}finally{P(mt,!1)}}const je="phenaki.speedControlPos";let Z=se({left:null,top:null}),Mt=se(!1),kt=se(!1),Lt={x:0,y:0},Ft={left:0,top:0},St=0;function Bt(){try{const o=localStorage.getItem(je);o&&P(Z,JSON.parse(o))}catch{}}function Ct(){try{localStorage.setItem(je,JSON.stringify(t(Z)))}catch{}}function bn(o){const M=Date.now(),K=M-St<300;if(St=M,o.target&&o.target.closest&&o.target.closest("button"))return;const Q=o.target&&o.target.closest&&o.target.closest(".drag-handle"),ae=g(),ie=o.target&&o.target.closest&&(o.target.classList.contains("speed-display")||o.target.closest(".speed-display"));if(!(!Q&&!K&&!ae&&!ie)&&!(ae&&!Q&&!ie)){P(Mt,!0),P(kt,!0),Lt={x:o.clientX,y:o.clientY},Ft={left:t(Z).left??Math.round((window.innerWidth-200)/2),top:t(Z).top??Math.round((window.innerHeight-80)/2)};try{o.target.setPointerCapture(o.pointerId)}catch{}window.addEventListener("pointermove",Vt),window.addEventListener("pointerup",U)}}function Vt(o){if(!t(kt))return;const M=o.clientX-Lt.x,K=o.clientY-Lt.y;de(Z,t(Z).left=Math.round(Ft.left+M)),de(Z,t(Z).top=Math.round(Ft.top+K))}function U(o){P(kt,!1),P(Mt,!1);try{o.target.releasePointerCapture&&o.target.releasePointerCapture(o.pointerId)}catch{}window.removeEventListener("pointermove",Vt),window.removeEventListener("pointerup",U),Ct()}_a(()=>{Bt(),t(Z).left==null&&de(Z,t(Z).left=Math.round((window.innerWidth-200)/2)),t(Z).top==null&&de(Z,t(Z).top=Math.round((window.innerHeight-80)/2));function o(){const he=Math.max(8,window.innerWidth-200-8),Ue=Math.max(8,window.innerHeight-80-8);t(Z).left==null&&de(Z,t(Z).left=he),t(Z).top==null&&de(Z,t(Z).top=Ue),de(Z,t(Z).left=Math.min(Math.max(t(Z).left,8),he)),de(Z,t(Z).top=Math.min(Math.max(t(Z).top,8),Ue))}o();const M=()=>{o(),Ct()};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)});function at(o){return new Promise((M,K)=>{const Q=new Image;Q.crossOrigin="anonymous",Q.onload=()=>M(Q),Q.onerror=K,Q.src=o})}$e(()=>a(),()=>{a()&&P(H,!0)}),$e(()=>(l(),a(),p()),()=>{P(z,!!l()&&a()&&p()>0)}),$e(()=>p(),()=>{P(xt,Number(p()||0))}),$e(()=>x(),()=>{P($,x())}),$e(()=>l(),()=>{P(G,l())}),$e(()=>c(),()=>{P(b,c())}),$e(()=>w(),()=>{P(I,w())}),$e(()=>_(),()=>{P(e,_())}),ma(),On();var it=fs(),yn=q(it);{var Jt=o=>{var M=Qi();A(o,M)};le(yn,o=>{t(mt)&&o(Jt)})}var Ot=y(yn,2),dt=q(Ot);let Zt;var xn=q(dt,!0);L(dt);var Kt=y(dt,2),Mn=y(Kt,2);{var Qt=o=>{var M=es(),K=Ze(M),Q=y(K,2);De(()=>K.disabled=t(ee)),R("click",K,et),R("click",Q,gt),A(o,M)},en=o=>{var M=ts();De(()=>{Ln(M,1,Ca(t(G)?"":"detect-btn-required"),"svelte-14nyow8"),M.disabled=t(ee)||!s()||a()}),R("click",M,Be),A(o,M)};le(Mn,o=>{k()?o(Qt):o(en,!1)})}var Rt=y(Mn,2),Se=y(Rt,2),Ve=q(Se),kn=q(Ve,!0);L(Ve);var zt=y(Ve,2),Pt=y(q(zt),2);Tt(Pt);var Sn=y(Pt,2),Hn=q(Sn);{var d=o=>{var M=xe("Manual");A(o,M)},C=o=>{var M=ht(),K=Ze(M);{var Q=ie=>{var he=xe("Auto (x2)");A(ie,he)},ae=ie=>{var he=xe("Auto");A(ie,he)};le(K,ie=>{t(b)?ie(Q):ie(ae,!1)},!0)}A(o,M)};le(Hn,o=>{t($)?o(d):o(C,!1)})}L(Sn),L(zt);var X=y(zt,2),te=y(q(X),2);De(()=>{t(tt),za(()=>{})});var oe=q(te);oe.value=oe.__value=3;var B=y(oe);B.value=B.__value=5;var ve=y(B);ve.value=ve.__value=8;var Pe=y(ve);Pe.value=Pe.__value=10;var Ie=y(Pe);Ie.value=Ie.__value=15;var Ce=y(Ie);Ce.value=Ce.__value=20;var F=y(Ce);F.value=F.__value=24;var V=y(F);V.value=V.__value=30,L(te),L(X),L(Se);var W=y(Se,2),E=q(W);Tt(E),qn(2),L(W);var O=y(W,2),T=q(O);Tt(T);var ge=y(T,4);{var Te=o=>{var M=ns(),K=q(M);L(M),De(()=>We(K,`${m()??""} Hz`)),A(o,M)};le(ge,o=>{S()&&o(Te)})}L(O);var ye=y(O,2),ne=q(ye);Tt(ne);var _t=y(ne,4);{var Wn=o=>{var M=as();Tt(M),$a(M,h,K=>aa(Yt,K)),A(o,M)};le(_t,o=>{r()&&o(Wn)})}L(ye),L(Ot);var Cn=y(Ot,2);{var Nn=o=>{var M=is(),K=y(q(M),4),Q=y(q(K),2),ae=q(Q),ie=y(ae,2),he=y(ie,2),Ue=y(he,2),st=y(Ue,2),Oe=y(st,2),me=y(Oe,2),rt=y(me,2);L(Q),L(K);var Ae=y(K,2),ut=q(Ae),Ye=y(q(ut),2),sn=q(Ye);L(Ye),L(ut);var wt=y(ut,2);Tt(wt);var rn=y(wt,2),Dn=y(q(rn),2),Un=q(Dn);{var Yn=ue=>{var qe=xe("ðŸ”´ Flicker");A(ue,qe)},Xn=ue=>{var qe=ht(),cn=Ze(qe);{var fn=_e=>{var Re=xe("ðŸŸ¡ Fusion");A(_e,Re)},dn=_e=>{var Re=xe("ðŸŸ¢ Smooth");A(_e,Re)};le(cn,_e=>{m()<60?_e(fn):_e(dn,!1)},!0)}A(ue,qe)};le(Un,ue=>{m()<40?ue(Yn):ue(Xn,!1)})}L(Dn),qn(2),L(rn),L(Ae);var on=y(Ae,2),ln=q(on),Bn=q(ln);{var ja=ue=>{var qe=xe("âš¡ Strong Flicker");A(ue,qe)},Ga=ue=>{var qe=ht(),cn=Ze(qe);{var fn=_e=>{var Re=xe("ðŸŽ¯ Critical Threshold");A(_e,Re)},dn=_e=>{var Re=ht(),Vn=Ze(Re);{var Jn=ze=>{var pt=xe("âœ¨ Near-Fusion");A(ze,pt)},Zn=ze=>{var pt=ht(),Kn=Ze(pt);{var Qn=He=>{var It=xe("ðŸŽ¬ Cinema (60 Hz)");A(He,It)},ea=He=>{var It=xe("ðŸŒŸ Ultra Smooth");A(He,It)};le(Kn,He=>{m()<62?He(Qn):He(ea,!1)},!0)}A(ze,pt)};le(Vn,ze=>{m()<58?ze(Jn):ze(Zn,!1)},!0)}A(_e,Re)};le(cn,_e=>{m()<52?_e(fn):_e(dn,!1)},!0)}A(ue,qe)};le(Bn,ue=>{m()<48?ue(ja):ue(Ga,!1)})}L(ln);var ya=y(ln,2),Ua=q(ya);{var Ya=ue=>{var qe=xe("Noticeable flicker - classic phenakistoscope effect");A(ue,qe)},Xa=ue=>{var qe=ht(),cn=Ze(qe);{var fn=_e=>{var Re=xe("Flicker begins to fuse - critical threshold");A(_e,Re)},dn=_e=>{var Re=ht(),Vn=Ze(Re);{var Jn=ze=>{var pt=xe("Subtle pulsing - artistic sweet spot");A(ze,pt)},Zn=ze=>{var pt=ht(),Kn=Ze(pt);{var Qn=He=>{var It=xe("Standard cinema/TV rate - minimal flicker");A(He,It)},ea=He=>{var It=xe("Above fusion threshold - very smooth");A(He,It)};le(Kn,He=>{m()<62?He(Qn):He(ea,!1)},!0)}A(ze,pt)};le(Vn,ze=>{m()<58?ze(Jn):ze(Zn,!1)},!0)}A(_e,Re)};le(cn,_e=>{m()<52?_e(fn):_e(dn,!1)},!0)}A(ue,qe)};le(Ua,ue=>{m()<48?ue(Ya):ue(Xa,!1)})}L(ya),L(on),L(M),De(()=>{ot(ae,`padding: 8px 14px; border: 1px solid ${m()===30?"#c92a2a":"#555"}; background: ${m()===30?"#c92a2a":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(ie,`padding: 8px 14px; border: 1px solid ${m()===42?"#ff6b6b":"#555"}; background: ${m()===42?"#ff6b6b":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(he,`padding: 8px 14px; border: 1px solid ${m()===50?"#ffa500":"#555"}; background: ${m()===50?"#ffa500":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(Ue,`padding: 8px 14px; border: 1px solid ${m()===55?"#4a9eff":"#555"}; background: ${m()===55?"#4a9eff":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(st,`padding: 8px 14px; border: 1px solid ${m()===60?"#51cf66":"#555"}; background: ${m()===60?"#51cf66":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(Oe,`padding: 8px 14px; border: 1px solid ${m()===70?"#845ef7":"#555"}; background: ${m()===70?"#845ef7":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(me,`padding: 8px 14px; border: 1px solid ${m()===80?"#20c997":"#555"}; background: ${m()===80?"#20c997":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(rt,`padding: 8px 14px; border: 1px solid ${m()===100?"#12b886":"#555"}; background: ${m()===100?"#12b886":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),We(sn,`${m()??""} Hz`),Ia(wt,m())}),R("click",ae,()=>Je.set(30)),R("click",ie,()=>Je.set(42)),R("click",he,()=>Je.set(50)),R("click",Ue,()=>Je.set(55)),R("click",st,()=>Je.set(60)),R("click",Oe,()=>Je.set(70)),R("click",me,()=>Je.set(80)),R("click",rt,()=>Je.set(100)),R("input",wt,ue=>Je.set(+ue.target.value)),A(o,M)};le(Cn,o=>{S()&&o(Nn)})}var Pn=y(Cn,2);{var In=o=>{var M=rs(),K=q(M);{var Q=me=>{var rt=ss();A(me,rt)};le(K,me=>{(t(Mt)||g())&&me(Q)})}var ae=y(K,2),ie=q(ae),he=y(ie,2),Ue=q(he),st=q(Ue);L(Ue),qn(2),L(he);var Oe=y(he,2);L(ae),L(M),De((me,rt,Ae)=>{Ln(M,1,`speed-control ${t(Mt)?"dragMode":""} ${t(kt)?"dragging":""} ${g()?"mobile":""}`,"svelte-14nyow8"),ot(M,`left: ${me??""}px; top: ${rt??""}px;`),We(st,`${Ae??""}Â°/s`)},[()=>(t(Z),Qe(()=>t(Z).left??Math.round((window.innerWidth-200)/2))),()=>(t(Z),Qe(()=>t(Z).top??Math.round((window.innerHeight-80)/2))),()=>(p(),Qe(()=>p().toFixed(0)))]),R("pointerdown",ie,bt(we(()=>Y("decrease")))),R("pointerup",ie,bt(we(J))),R("pointerleave",ie,we(J)),R("pointercancel",ie,we(J)),R("touchstart",ie,bt(we(function(me){lt.call(this,i,me)}))),R("touchend",ie,bt(we(function(me){lt.call(this,i,me)}))),R("pointerdown",Oe,bt(we(()=>Y("increase")))),R("pointerup",Oe,bt(we(J))),R("pointerleave",Oe,we(J)),R("pointercancel",Oe,we(J)),R("touchstart",Oe,bt(we(function(me){lt.call(this,i,me)}))),R("touchend",Oe,bt(we(function(me){lt.call(this,i,me)}))),R("pointerdown",M,bn),A(o,M)};le(Pn,o=>{l()&&o(In)})}var Tn=y(Pn,2),tn=q(Tn),Ht=q(tn),nn=y(q(Ht)),$n=y(nn);{var jn=o=>{var M=os();A(o,M)},Gn=o=>{var M=ls();A(o,M)};le($n,o=>{g()?o(jn):o(Gn,!1)})}L(Ht);var an=y(Ht,2),Wt=y(q(an),2);Tt(Wt);var Nt=y(Wt,2);L(an),L(tn);var ce=y(tn,2),be=y(q(ce));L(ce);var Fe=y(ce,2),Ee=y(q(Fe));L(Fe);var Ge=y(Fe,2);{var jt=o=>{var M=cs(),K=y(q(M));L(M),De((Q,ae,ie)=>We(K,` x=${Q??""}, y=${ae??""}, r=${ie??""}`),[()=>(t(G),Qe(()=>Math.round(t(G).x))),()=>(t(G),Qe(()=>Math.round(t(G).y))),()=>(t(G),Qe(()=>Math.round(t(G).r)))]),A(o,M)};le(Ge,o=>{t(G)&&o(jt)})}L(Tn),L(it),De((o,M)=>{Zt=Ln(dt,1,Ca(t(G)&&!a()?"play-highlight":""),"svelte-14nyow8",Zt,{"pause-subtle":a()&&!t(G)}),dt.disabled=!s(),We(xn,a()?"Pause":"Play"),Rt.disabled=!t(I),Ve.disabled=!t(z)||t(mt),We(kn,t(mt)?"â³ Exporting...":"ðŸ’¾ Save GIF"),Fn(Pt,"placeholder",t(b)?`Auto (${t(b)*2})`:"Auto (24)"),Ia(Pt,x()),qi(E,t(e)),We(nn,` ${o??""}Â°/s | `),We(be,` ${x()??12??""}`),We(Ee,` ${M??""}Â°/s`)},[()=>(p(),Qe(()=>p().toFixed(0))),()=>(t(I),Qe(()=>t(I)?t(I).toFixed(0):"â€”"))]),R("click",dt,Me),R("click",Kt,Le),R("click",Rt,ke),R("click",Ve,nt),R("input",Pt,o=>qt.set(o.target.value?Number(o.target.value):null)),Na(te,()=>t(tt),o=>P(tt,o)),R("change",E,o=>fa.set(o.target.checked)),Da(T,S,o=>aa(pa,o)),Da(ne,r,o=>aa(Ut,o)),$a(Wt,()=>t(xt),o=>P(xt,o)),R("click",Nt,ft),A(n,it),wn(),D()}var us=pe('<span class="current-image svelte-ai08gq" title="Currently loaded image"> </span>'),ps=pe("<option> </option>"),hs=pe('<div class="selector svelte-ai08gq"><label for="samples" class="svelte-ai08gq">Sample Images:</label> <!> <select id="samples" class="svelte-ai08gq"><option>-- Choose a sample --</option><!></select></div>');function vs(n,i){_n(i,!1);const a=()=>j(Ea,"$selectedImageName",l),[l,p]=Rn(),s="https://raw.githubusercontent.com/tclaret/phenakistoscope-simulator/main/images",f="https://raw.githubusercontent.com/tclaret/phenaki-lab/main/img",v=[{name:"Colors",file:"colors.png",repo:"new"},{name:"Medium 1990",file:"medium_1990_5036_7181_6_1.png",repo:"new"},{name:"Cats et Donkey",file:"optical-toy-phenakistiscope-disc-avec-cats-et-donkey-ca-1830-2efx315.jpg",repo:"new"},{name:"Dancing Man Animated",file:"Optical_Toy,_Phenakistiscope_Disc_with_Dancing_Man,_ca._1835-Animated.jpg",repo:"new"},{name:"PhÃ©nakistiscope 2",file:"phÃ©nakistiscope2.png",repo:"new"},{name:"Disque Animation 29",file:"phenakistiscope-disque-animation-29.jpg",repo:"new"},{name:"S-L1600 1",file:"s-l1600_1.jpg",repo:"new"},{name:"S-L1600",file:"s-l1600.jpg",repo:"new"},{name:"Hash 045377",file:"045377654e8832d31b850c8c4b7f948b.png",repo:"new"},{name:"Hash 062901",file:"062901e866b6aca4078ae7ff0be74c24.png",repo:"new"},{name:"Hash 0a23fe",file:"0a23fe78862b095518e46a3472238510.png",repo:"new"},{name:"Hash 14ea08",file:"14ea08f701861d967d455220ea8ca7ed.jpg",repo:"new"},{name:"Hash 1928bd",file:"1928bda6cad5fd3cd27d13ce70a502dc.jpg",repo:"new"},{name:"Hash 2d003d",file:"2d003d9b4e81a933bbfbdd55c8b1e261.png",repo:"new"},{name:"Hash 2e4cd2",file:"2e4cd248fbe57af9798c7e3c1c23b58c.jpg",repo:"new"},{name:"Hash 40bd2a",file:"40bd2aead0fc9a6e77d23871555a2998.png",repo:"new"},{name:"Hash 43efde",file:"43efdef999a2fa3200506f97d9e1ef10.png",repo:"new"},{name:"Hash 494697",file:"49469753b75adf62fe324641a2869c53.png",repo:"new"},{name:"Hash 4ca70e",file:"4ca70ec79b59935fb0eed9992045e4fb.jpg",repo:"new"},{name:"Hash 4e6b0c",file:"4e6b0c0e4fde0ad2ad8f4797304b037b.jpg",repo:"new"},{name:"Hash 4f3ab9",file:"4f3ab9e63d43062d25dfc6e4108635fb.png",repo:"new"},{name:"Hash 686b5e",file:"686b5e679b990dd996d0a4a3fb943d2d.png",repo:"new"},{name:"Hash 6f5755",file:"6f57558627d849a8d2b3f9a430bacba2.jpg",repo:"new"},{name:"Hash 75fd29",file:"75fd29a0318c3cf0fdaf8a41d1406cf2.png",repo:"new"},{name:"Hash 8efd4b",file:"8efd4b2b51765d9efdde621251b08968.jpg",repo:"new"},{name:"Hash 90cbee",file:"90cbeedafdef22534d24d04bc44b518f.jpg",repo:"new"},{name:"Hash 954abf",file:"954abf22a1f89759204818d3c0592234.png",repo:"new"},{name:"Hash 9799d6",file:"9799d6d1766b1add766629adec031867.png",repo:"new"},{name:"Hash a0767f",file:"a0767fc0712f1a9eeac238e72b6b2721.png",repo:"new"},{name:"Hash b18a11",file:"b18a11d1a8355081b70a3d91347236b1.jpg",repo:"new"},{name:"Hash bf2932",file:"bf29325ee951619c061902200c8e1143.png",repo:"new"},{name:"Hash e1de4a",file:"e1de4a32cb1bafa33166d51bf8ae2f35.png",repo:"new"},{name:"Hash e59f95",file:"e59f952d6ef4e9c391ea10e143e55b23.png",repo:"new"},{name:"Hash e6582e",file:"e6582e848b0aca99c134d23365c08fdb.png",repo:"new"},{name:"Hash ebd3d3",file:"ebd3d33285d243f86e54df78b9cc69ac.png",repo:"new"},{name:"Woman Chopping Tree",file:"WomanChoppingTree.jpg",repo:"old"},{name:"Dancing",file:"Dancing.jpg",repo:"old"},{name:"Jongleur",file:"Jongleur.png",repo:"old"},{name:"a_cheval",file:"a_cheval.png",repo:"old"},{name:"McLean_1",file:"McLean_1.png",repo:"old"},{name:"Gernamy_1949",file:"Gernamy_1949_R_Balzer.png",repo:"old"},{name:"AEO175939",file:"AEO175939_PhenakistoscopeGiroux60.jpg",repo:"old"},{name:"AEO185553",file:"AEO185553_PhenakistiscopeDisc_ManInBlueAndRed.jpg",repo:"old"},{name:"medium_1990_5036_3369",file:"medium_1990_5036_3369.jpg",repo:"old"},{name:"medium_a001813b",file:"medium_a001813b.jpg",repo:"old"},{name:"tumblr_obd6fh",file:"tumblr_obd6fhGFSZ1r9jbwno1_500.png",repo:"old"},{name:"tumblr_oc1cz",file:"tumblr_oc1czn99ZM1r9jbwno1_500.png",repo:"old"},{name:"Phantasmascope Faces",file:"Phantasmascope_faces.png",repo:"old"},{name:"722a6790240569.5e126845d9b56",file:"722a6790240569.5e126845d9b56.png",repo:"old"},{name:"Fantascope Disc 1833",file:"fantascope-disc-1833.png",repo:"old"},{name:"Face",file:"a_face__.jpg",repo:"new"},{name:"Culbute",file:"culbute.jpg",repo:"new"},{name:"Grenouille",file:"Grenouille__.jpg",repo:"new"},{name:"Oh Soccer",file:"oh_soccer.jpg",repo:"new"},{name:"Un Grand Un Petit",file:"un_grand_un_petit.jpg",repo:"new"},{name:"Autre Culbutte",file:"autre_culbutte.jpg",repo:"new"},{name:"Dancing 2",file:"dancing_.jpg",repo:"new"},{name:"Il Pompe de l'eau",file:"il_pompe_de_leau.jpg",repo:"new"},{name:"Porceline",file:"porceline.jpg",repo:"new"},{name:"Volants",file:"volants_.png",repo:"new"},{name:"Ce Qui",file:"ce_qui.jpg",repo:"new"},{name:"Des Anges",file:"des_anges.jpg",repo:"new"},{name:"Moulin",file:"moulin_.jpg",repo:"new"},{name:"Rats",file:"rats__.jpg",repo:"new"},{name:"Corde Ã  Danser",file:"corde_a_denser_.jpg",repo:"new"},{name:"Ecureuil",file:"ecureuil.jpg",repo:"new"},{name:"Noel Noel",file:"noel_noel.jpg",repo:"new"},{name:"Tirreur",file:"tirreur_.jpg",repo:"new"},{name:"C Pastel",file:"c_pastel.jpg",repo:"new"},{name:"GÃ©omÃ©trique",file:"geometrique.jpg",repo:"new"},{name:"Nuages en Scie",file:"nuages_en_scie.jpg",repo:"new"},{name:"Tons Pastels",file:"tons_pastels.jpg",repo:"new"},{name:"Des Ouiseaux",file:"DesOuaisaux.png",repo:"new"},{name:"Feels Like Flying",file:"feels_like_flying.png",repo:"new"},{name:"Gros Meusieur",file:"GrosMeusieur.png",repo:"new"},{name:"Jongle avec les Otaries",file:"Jongle_avec_les_otaries.png",repo:"new"},{name:"CinÃ©mathÃ¨que 1",file:"cinemateque_francaise_1.png",repo:"new"},{name:"CinÃ©mathÃ¨que 2",file:"cinemateque_francaise_2.png",repo:"new"},{name:"CinÃ©mathÃ¨que 3",file:"cinemateque_francaise_3.png",repo:"new"},{name:"CinÃ©mathÃ¨que 4",file:"cinemateque_francaise_4.png",repo:"new"},{name:"CinÃ©mathÃ¨que 5",file:"cinemateque_francaise_5.png",repo:"new"},{name:"CinÃ©mathÃ¨que 6",file:"cinemateque_francaise_6.png",repo:"new"},{name:"CinÃ©mathÃ¨que 7",file:"cinemateque_francaise_7.png",repo:"new"},{name:"CinÃ©mathÃ¨que 8",file:"cinemateque_francaise_8.png",repo:"new"},{name:"CinÃ©mathÃ¨que 9",file:"cinemateque_francaise_9.png",repo:"new"},{name:"CinÃ©mathÃ¨que 10",file:"cinemateque_francaise_10.png",repo:"new"},{name:"CinÃ©mathÃ¨que 11",file:"cinemateque_francaise_11.png",repo:"new"},{name:"CinÃ©mathÃ¨que 12",file:"cinemateque_francaise_12.png",repo:"new"},{name:"CinÃ©mathÃ¨que 13",file:"cinemateque_francaise_13.png",repo:"new"},{name:"CinÃ©mathÃ¨que 14",file:"cinemateque_francaise_14.png",repo:"new"},{name:"CinÃ©mathÃ¨que 15",file:"cinemateque_francaise_15.png",repo:"new"},{name:"CinÃ©mathÃ¨que 16",file:"cinemateque_francaise_16.png",repo:"new"},{name:"CinÃ©mathÃ¨que 17",file:"cinemateque_francaise_17.png",repo:"new"},{name:"CinÃ©mathÃ¨que 18",file:"cinemateque_francaise_18.png",repo:"new"},{name:"CinÃ©mathÃ¨que 19",file:"cinemateque_francaise_19.png",repo:"new"},{name:"CinÃ©mathÃ¨que 20",file:"cinemateque_francaise_20.png",repo:"new"},{name:"CinÃ©mathÃ¨que 21",file:"cinemateque_francaise_21.png",repo:"new"},{name:"CinÃ©mathÃ¨que 22",file:"cinemateque_francaise_22.png",repo:"new"},{name:"CinÃ©mathÃ¨que 23",file:"cinemateque_francaise_23.png",repo:"new"},{name:"CinÃ©mathÃ¨que 24",file:"cinemateque_francaise_24.png",repo:"new"},{name:"CinÃ©mathÃ¨que 25",file:"cinemateque_francaise_25.png",repo:"new"},{name:"CinÃ©mathÃ¨que 26",file:"cinemateque_francaise_26.png",repo:"new"},{name:"CinÃ©mathÃ¨que 27",file:"cinemateque_francaise_27.png",repo:"new"},{name:"CinÃ©mathÃ¨que 28",file:"cinemateque_francaise_28.png",repo:"new"},{name:"CinÃ©mathÃ¨que 29",file:"cinemateque_francaise_29.png",repo:"new"},{name:"CinÃ©mathÃ¨que 30",file:"cinemateque_francaise_30.png",repo:"new"},{name:"CinÃ©mathÃ¨que 31",file:"cinemateque_francaise_31.png",repo:"new"},{name:"CinÃ©mathÃ¨que 32",file:"cinemateque_francaise_32.png",repo:"new"},{name:"CinÃ©mathÃ¨que 33",file:"cinemateque_francaise_33.png",repo:"new"},{name:"CinÃ©mathÃ¨que 34",file:"cinemateque_francaise_34.png",repo:"new"},{name:"Phenakistoscope 3g07692a",file:"Phenakistoscope_3g07692a.jpg",repo:"new"},{name:"Phenakistoscope 3g07692u",file:"Phenakistoscope_3g07692u.jpg",repo:"new"},{name:"Lebensrad 01",file:"Lebensrad01.jpg",repo:"new"},{name:"Dance Dance",file:"Dance_dance.png",repo:"new"},{name:"Download",file:"download.png",repo:"new"},{name:"Serpent",file:"serpent.png",repo:"new"},{name:"Zoopraxiscope 0",file:"zoopraxiscope-0.png",repo:"new"},{name:"S-L1600 PNG",file:"s-l1600.png",repo:"new"},{name:"1200px Cats and Donkey",file:"1200px-Optical_Toy,_Phenakistiscope_Disc_with_Cats_and_Donkey,_ca._1830_(CH_18607981).jpg",repo:"new"},{name:"Photographic Pastimes",file:"Photographic_pastimes_-_a_series_of_interesting_experiments_for_amateurs_for_obtaining_novel_and_curious_effects_with_the_aid_of_the_camera_(1891)_(14766082535).jpg",repo:"new"},{name:"IL 1588 2019925483",file:"il_1588xN.2019925483_gcfc.jpg",repo:"new"},{name:"IL 1588 7127245108",file:"il_1588xN.7127245108_4tnw.png",repo:"new"},{name:"IL 1588 7287092618",file:"il_1588xN.7287092618_bs1i.png",repo:"new"}];let x=se("");function g(r){const u=`${r.repo==="new"?f:s}/${r.file}`;gn.set(null),mn.set(0),zn.set([]),At.set(!1),yt.set(!1),Dt.set(0),vn.set("move-center"),ct.set(0),hn.set(1),qt.set(null),$t.set(!1),Ut.set(!1),Yt.set("#000000"),Xt.set(u),ba.set(u),Et.set(!1),Ea.set(r.name),P(x,r.file)}_a(()=>{let r=!1;if(Xt.subscribe(u=>{u&&(r=!0)})(),!r){const u=v[Math.floor(Math.random()*v.length)];u&&g(u)}}),On();var c=hs(),w=y(q(c),2);{var _=r=>{var h=us(),u=q(h);L(h),De(()=>We(u,`ðŸ“· ${a()??""}`)),A(r,h)};le(w,r=>{a()&&r(_)})}var k=y(w,2);De(()=>{t(x),za(()=>{})});var S=q(k);S.value=S.__value="";var m=y(S);Si(m,1,()=>v,r=>r.file,(r,h)=>{var u=ps(),D=q(u,!0);L(u);var z={};De(()=>{We(D,t(h).name),z!==(z=t(h).file)&&(u.value=(u.__value=t(h).file)??"")}),A(r,u)}),L(k),L(c),Na(k,()=>t(x),r=>P(x,r)),R("change",k,r=>{const h=r.target.selectedIndex-1;h>=0&&g(v[h])}),A(n,c),wn(),p()}var gs=pe('<div class="container svelte-1uha8ag"><h1 class="svelte-1uha8ag">Phenakistoscope Lab</h1> <p class="sub svelte-1uha8ag">Convert old phenakistoscope discs into animated GIFs</p> <div class="wiki-link svelte-1uha8ag"><a href="https://en.wikipedia.org/wiki/Phenakistiscope" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">â„¹ï¸ Learn about Phenakistoscopes</a></div> <div class="intro svelte-1uha8ag"><p class="svelte-1uha8ag">To create an animated GIF from a phenakistoscope image, select the correct number of frames according to the image, adjust the rotation speed, and then save it as a fast, slow, or normal animated GIF depending on your settings.</p></div> <!> <!> <!> <!> <!></div>');function ks(n){var i=gs(),a=y(q(i),8);Oi(a,{});var l=y(a,2);vs(l,{});var p=y(l,2);zi(p,{});var s=y(p,2);Gi(s,{});var f=y(s,2);ds(f,{}),L(i),A(n,i)}export{ks as component};
