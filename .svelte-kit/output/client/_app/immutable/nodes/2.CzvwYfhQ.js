import{f as oe,a as D,c as rt,t as $e}from"../chunks/DidSmI2s.js";import"../chunks/BfDn8e9k.js";import{G as fs,v as Be,w as ds,g as e,av as us,I as vs,J as ps,K as Ea,L as Aa,M as fa,D as On,a3 as hs,aq as gs,aa as ms,x as gt,C as ma,B as Ga,F as _s,Q as ae,a1 as qa,ao as Ua,aI as Ma,aJ as ws,y as Ya,A as bs,aK as ys,aL as xs,aM as da,ak as Ms,aN as ks,aO as Ss,an as Cs,z as Ps,aP as ka,N as $s,R as Ts,aQ as Is,aR as Ds,aS as Xa,aT as Es,aU as As,aV as qs,P as Fs,aW as Ls,aX as Os,b as He,O as Ba,aG as Rs,p as yn,j as xn,s as g,k as $,l as T,aY as Te,aZ as Sa,i as qe,U as S,t as Se,a_ as fe,ab as Hn,a$ as Va}from"../chunks/CkcJ_p-v.js";import{e as j,s as pe}from"../chunks/EstrOUTn.js";import{i as Nn}from"../chunks/BeJGQpUk.js";import{w as ve,o as Ca,a as Hs,g as Yt}from"../chunks/BzLubvRb.js";import{i as ne,s as Gn,a as Y,b as Fa,d as ua}from"../chunks/CgM4jgzu.js";function zs(n,s,a){for(var l=[],u=s.length,i=0;i<u;i++)ks(s[i].e,l,!0);Ss(l,()=>{var f=l.length===0&&a!==null;if(f){var p=a,M=p.parentNode;Cs(M),M.append(p),n.items.clear(),tt(n,s[0].prev,s[u-1].next)}for(var v=0;v<u;v++){var c=s[v];f||(n.items.delete(c.k),tt(n,c.prev,c.next)),Ps(c.e,!f)}n.first===s[0]&&(n.first=s[0].prev)})}function Ws(n,s,a,l,u,i=null){var f=n,p=new Map,M=null;Be&&ds();var v=null,c=us(()=>{var o=a();return Ma(o)?o:o==null?[]:Ua(o)}),b,w=!0;function E(){js(m,b,f,s,l),v!==null&&(b.length===0?(v.fragment?(f.before(v.fragment),v.fragment=null):Ya(v.effect),P.first=v.effect):bs(v.effect,()=>{v=null}))}var P=fs(()=>{b=e(c);var o=b.length;let h=!1;if(Be){var _=vs(f)===ps;_!==(o===0)&&(f=Ea(),Aa(f),fa(!1),h=!0)}for(var F=new Set,A=gt,O=null,de=_s(),x=0;x<o;x+=1){Be&&On.nodeType===hs&&On.data===gs&&(f=On,h=!0,fa(!1));var C=b[x],t=l(C,x),se=w?null:p.get(t);se?(ms(se.v,C),se.i=x,de&&A.skipped_effects.delete(se.e)):(se=Ns(w?f:null,O,C,t,x,u,s,a),w&&(se.o=!0,O===null?M=se:O.next=se,O=se),p.set(t,se)),F.add(t)}if(o===0&&i&&!v)if(w)v={fragment:null,effect:ma(()=>i(f))};else{var z=document.createDocumentFragment(),be=Ga();z.append(be),v={fragment:z,effect:ma(()=>i(be))}}if(Be&&o>0&&Aa(Ea()),!w)if(de){for(const[Z,K]of p)F.has(Z)||A.skipped_effects.add(K.e);A.oncommit(E),A.ondiscard(()=>{})}else E();h&&fa(!0),e(c)}),m={effect:P,items:p,first:M};w=!1,Be&&(f=On)}function js(n,s,a,l,u){var i=s.length,f=n.items,p=n.first,M,v=null,c=[],b=[],w,E,P,m;for(m=0;m<i;m+=1){if(w=s[m],E=u(w,m),P=f.get(E),n.first??=P,!P.o){P.o=!0;var o=v?v.next:p;tt(n,v,P),tt(n,P,o),va(P,o,a),v=P,c=[],b=[],p=v.next;continue}if((P.e.f&da)!==0&&Ya(P.e),P!==p){if(M!==void 0&&M.has(P)){if(c.length<b.length){var h=b[0],_;v=h.prev;var F=c[0],A=c[c.length-1];for(_=0;_<c.length;_+=1)va(c[_],h,a);for(_=0;_<b.length;_+=1)M.delete(b[_]);tt(n,F.prev,A.next),tt(n,v,F),tt(n,A,h),p=h,v=A,m-=1,c=[],b=[]}else M.delete(P),va(P,p,a),tt(n,P.prev,P.next),tt(n,P,v===null?n.first:v.next),tt(n,v,P),v=P;continue}for(c=[],b=[];p!==null&&p.k!==E;)(p.e.f&da)===0&&(M??=new Set).add(p),b.push(p),p=p.next;if(p===null)continue;P=p}c.push(P),v=P,p=P.next}let O=f.size>i;if(p!==null||M!==void 0){for(var de=M===void 0?[]:Ua(M);p!==null;)(p.e.f&da)===0&&de.push(p),p=p.next;var x=de.length;if(O=f.size-x>i,x>0){var C=null;zs(n,de,C)}}if(O)for(const t of f.values())t.o||(tt(n,v,t),v=t);n.effect.last=v&&v.e}function Ns(n,s,a,l,u,i,f,p){var M=(f&ys)!==0,v=(f&xs)===0,c=M?v?ae(a,!1,!1):qa(a):a,b=(f&ws)===0?u:qa(u),w={i:b,v:c,k:l,a:null,e:null,o:!1,prev:s,next:null};try{if(n===null){var E=document.createDocumentFragment();E.append(n=Ga())}return w.e=ma(()=>i(n,c,b,p)),s!==null&&(s.next=w),w}finally{}}function va(n,s,a){for(var l=n.next?n.next.e.nodes_start:a,u=s?s.e.nodes_start:a,i=n.e.nodes_start;i!==null&&i!==l;){var f=Ms(i);u.before(i),i=f}}function tt(n,s,a){s===null?(n.first=a,n.effect.first=a&&a.e):(s.e.next&&(s.e.next.prev=null),s.next=a,s.e.next=a&&a.e),a!==null&&(a.e.prev&&(a.e.prev.next=null),a.prev=s,a.e.prev=s&&s.e)}function Ja(n){var s,a,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var u=n.length;for(s=0;s<u;s++)n[s]&&(a=Ja(n[s]))&&(l&&(l+=" "),l+=a)}else for(a in n)n[a]&&(l&&(l+=" "),l+=a);return l}function Gs(){for(var n,s,a=0,l="",u=arguments.length;a<u;a++)(n=arguments[a])&&(s=Ja(n))&&(l&&(l+=" "),l+=s);return l}function La(n){return typeof n=="object"?Gs(n):n??""}const Oa=[...` 	
\r\fÂ \v\uFEFF`];function Us(n,s,a){var l=n==null?"":""+n;if(s&&(l=l?l+" "+s:s),a){for(var u in a)if(a[u])l=l?l+" "+u:u;else if(l.length)for(var i=u.length,f=0;(f=l.indexOf(u,f))>=0;){var p=f+i;(f===0||Oa.includes(l[f-1]))&&(p===l.length||Oa.includes(l[p]))?l=(f===0?"":l.substring(0,f))+l.substring(p+1):f=p}}return l===""?null:l}function Ys(n,s){return n==null?null:String(n)}function zn(n,s,a,l,u,i){var f=n.__className;if(Be||f!==a||f===void 0){var p=Us(a,l,i);(!Be||p!==n.getAttribute("class"))&&(p==null?n.removeAttribute("class"):n.className=p),n.__className=a}else if(i&&u!==i)for(var M in i){var v=!!i[M];(u==null||v!==!!u[M])&&n.classList.toggle(M,v)}return i}function it(n,s,a,l){var u=n.__style;if(Be||u!==s){var i=Ys(s);(!Be||i!==n.getAttribute("style"))&&(i==null?n.removeAttribute("style"):n.style.cssText=i),n.__style=s}return l}function Za(n,s,a=!1){if(n.multiple){if(s==null)return;if(!Ma(s))return Is();for(var l of n.options)l.selected=s.includes(gn(l));return}for(l of n.options){var u=gn(l);if(Ds(u,s)){l.selected=!0;return}}(!a||s!==void 0)&&(n.selectedIndex=-1)}function Xs(n){var s=new MutationObserver(()=>{Za(n,n.__value)});s.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ts(()=>{s.disconnect()})}function Ka(n,s,a=s){var l=new WeakSet,u=!0;ka(n,"change",i=>{var f=i?"[selected]":":checked",p;if(n.multiple)p=[].map.call(n.querySelectorAll(f),gn);else{var M=n.querySelector(f)??n.querySelector("option:not([disabled])");p=M&&gn(M)}a(p),gt!==null&&l.add(gt)}),$s(()=>{var i=s();if(n===document.activeElement){var f=Xa??gt;if(l.has(f))return}if(Za(n,i,u),u&&i===void 0){var p=n.querySelector(":checked");p!==null&&(i=gn(p),a(i))}n.__value=i,u=!1}),Xs(n)}function gn(n){return"__value"in n?n.__value:n.value}const Bs=Symbol("is custom element"),Vs=Symbol("is html");function Lt(n){if(Be){var s=!1,a=()=>{if(!s){if(s=!0,n.hasAttribute("value")){var l=n.value;jn(n,"value",null),n.value=l}if(n.hasAttribute("checked")){var u=n.checked;jn(n,"checked",null),n.checked=u}}};n.__on_r=a,Fs(a),Ls()}}function Ra(n,s){var a=Pa(n);a.value===(a.value=s??void 0)||n.value===s&&(s!==0||n.nodeName!=="PROGRESS")||(n.value=s??"")}function Js(n,s){var a=Pa(n);a.checked!==(a.checked=s??void 0)&&(n.checked=s)}function jn(n,s,a,l){var u=Pa(n);Be&&(u[s]=n.getAttribute(s),s==="src"||s==="srcset"||s==="href"&&n.nodeName==="LINK")||u[s]!==(u[s]=a)&&(s==="loading"&&(n[Os]=a),a==null?n.removeAttribute(s):typeof a!="string"&&Zs(n).includes(s)?n[s]=a:n.setAttribute(s,a))}function Pa(n){return n.__attributes??={[Bs]:n.nodeName.includes("-"),[Vs]:n.namespaceURI===Es}}var Ha=new Map;function Zs(n){var s=n.getAttribute("is")||n.nodeName,a=Ha.get(s);if(a)return a;Ha.set(s,a=[]);for(var l,u=n,i=Element.prototype;i!==u;){l=qs(u);for(var f in l)l[f].set&&a.push(f);u=As(u)}return a}function za(n,s,a=s){var l=new WeakSet;ka(n,"input",async u=>{var i=u?n.defaultValue:n.value;if(i=pa(n)?ha(i):i,a(i),gt!==null&&l.add(gt),await Rs(),i!==(i=s())){var f=n.selectionStart,p=n.selectionEnd,M=n.value.length;if(n.value=i??"",p!==null){var v=n.value.length;f===p&&p===M&&v>M?(n.selectionStart=v,n.selectionEnd=v):(n.selectionStart=f,n.selectionEnd=Math.min(p,v))}}}),(Be&&n.defaultValue!==n.value||He(s)==null&&n.value)&&(a(pa(n)?ha(n.value):n.value),gt!==null&&l.add(gt)),Ba(()=>{var u=s();if(n===document.activeElement){var i=Xa??gt;if(l.has(i))return}pa(n)&&u===ha(n.value)||n.type==="date"&&!u&&!n.value||u!==n.value&&(n.value=u??"")})}function Wa(n,s,a=s){ka(n,"change",l=>{var u=l?n.defaultChecked:n.checked;a(u)}),(Be&&n.defaultChecked!==n.checked||He(s)==null)&&a(n.checked),Ba(()=>{var l=s();n.checked=!!l})}function pa(n){var s=n.type;return s==="number"||s==="range"}function ha(n){return n===""?null:+n}function ke(n){return function(...s){var a=s[0];return a.stopPropagation(),n?.apply(this,s)}}function Mt(n){return function(...s){var a=s[0];return a.preventDefault(),n?.apply(this,s)}}function ot(n,s){var a=n.$$events?.[s.type],l=Ma(a)?a.slice():a==null?[]:[a];for(var u of l)u.call(this,s)}const $a=ve(null),Vt=ve(null),ja=ve(null),Rt=ve(!1),lt=ve(0),Wn=ve(1),Ot=ve(!1),wn=ve(null),bn=ve(0),mn=ve(1),Un=ve([]),_a=ve(!1),kt=ve(!1),Ht=ve(!1),wa=ve({translateX:0,translateY:0,scale:1}),hn=ve({active:!1,progress:0,startTime:0}),ba=ve(null),ya=ve(!1),et=ve(50),xa=ve(!1),zt=ve(null),St=ve(0),_n=ve("move-center"),Xt=ve(!1),Bt=ve("#000000");var Ks=oe('<label>Choose image: <input type="file" accept="image/*"/></label>');function Qs(n,s){yn(s,!1);function a(i){const f=i.target.files[0];if(!f)return;const p=URL.createObjectURL(f);wn.set(null),bn.set(0),Un.set([]),Ht.set(!1),kt.set(!1),St.set(0),_n.set("move-center"),lt.set(0),mn.set(1),zt.set(null),Ot.set(!1),Xt.set(!1),Bt.set("#000000"),$a.set(p),Vt.set(p),Rt.set(!1)}Nn();var l=Ks(),u=g($(l));T(l),j("change",u,a),D(n,l),xn()}var ei=oe('<div class="preview svelte-1th6cal"><img alt="Selected disc preview" class="svelte-1th6cal"/></div>');function ti(n,s){yn(s,!1);const a=()=>Y($a,"$previewUrl",l),[l,u]=Gn(),i=ae();Te(()=>a(),()=>{S(i,a())}),Sa();var f=rt(),p=qe(f);{var M=v=>{var c=ei(),b=$(c);T(c),Se(()=>jn(b,"src",e(i))),D(v,c)};ne(p,v=>{e(i)&&v(M)})}D(n,f),xn(),u()}var ni=oe('<div class="speed-hud svelte-byh4af"> </div>'),ai=oe('<span class="flicker-icon svelte-byh4af">ðŸ”´</span> <span class="flicker-label svelte-byh4af">Visible Flicker</span> <span class="flicker-value svelte-byh4af"> </span>',1),si=oe('<span class="flicker-icon svelte-byh4af">ðŸŸ¡</span> <span class="flicker-label svelte-byh4af">Fusion Zone</span> <span class="flicker-value svelte-byh4af"> </span>',1),ii=oe('<span class="flicker-icon svelte-byh4af">ðŸŸ¢</span> <span class="flicker-label svelte-byh4af">Smooth Motion</span> <span class="flicker-value svelte-byh4af"> </span>',1),ri=oe('<div class="flicker-fusion-overlay svelte-byh4af"><div class="flicker-fusion-content svelte-byh4af"><!></div></div>'),oi=oe('<div class="crosshair-overlay svelte-byh4af"><div class="crosshair-vertical svelte-byh4af"></div> <div class="crosshair-horizontal svelte-byh4af"></div> <div class="crosshair-center-dot svelte-byh4af"></div> <div class="crosshair-circle svelte-byh4af"></div></div>'),li=oe('<div class="edit-mode-indicator svelte-byh4af"><!></div> <!> <div class="frame-counter svelte-byh4af"><div class="frame-info svelte-byh4af"><div style="font-size: 0.7em; color: #aaa; margin-bottom: 4px; text-align: center;" class="svelte-byh4af">How many scenes on the disc?</div> <div style="font-size: 0.65em; color: #888; text-align: center; margin-bottom: 8px;" class="svelte-byh4af">Set frame count = number of animation scenes</div></div> <div style="display: flex; align-items: center; gap: 8px;" class="svelte-byh4af"><button class="frame-btn svelte-byh4af" title="Decrease frame count">âˆ’</button> <div class="frame-display svelte-byh4af"><div class="frame-number svelte-byh4af"> </div> <div class="frame-label svelte-byh4af">frames</div></div> <button class="frame-btn svelte-byh4af" title="Increase frame count">+</button></div></div>',1),ci=oe('<div><canvas class="svelte-byh4af"></canvas> <!> <!> <!></div>');function fi(n,s){yn(s,!1);const a=()=>Y(kt,"$editMode",O),l=()=>Y(Rt,"$isPlaying",O),u=()=>Y(et,"$flickerFrequency",O),i=()=>Y(ya,"$flickerEnabled",O),f=()=>Y(Vt,"$imageUrl",O),p=()=>Y(zt,"$gifFrameCount",O),M=()=>Y(xa,"$isMobile",O),v=()=>Y(lt,"$rotationSpeed",O),c=()=>Y(_n,"$editModeInteraction",O),b=()=>Y(St,"$sliceRotationAngle",O),w=()=>Y(hn,"$detectionAnimation",O),E=()=>Y(Wn,"$rotationDirection",O),P=()=>Y(Xt,"$fillOuterCircle",O),m=()=>Y(wn,"$detectedCircle",O),o=()=>Y(Bt,"$outerCircleFillColor",O),h=()=>Y(_a,"$overlayVisible",O),_=()=>Y(bn,"$detectedCount",O),F=()=>Y(Un,"$detectedPositions",O),A=()=>Y(Ht,"$confirmedDetection",O),[O,de]=Gn();let x=ae(),C=ae(),t,se=0,z=ae(1);const be=1,Z=4;let K=ae(0),Q=ae(0);const le=new Map;let Fe=1,ze=0,Ve=0,nt=0,De=ae(),mt=1,Mn=0,ct=ae(0),Ct=0,kn=1,We=ae(!1),Ie,Jt=0,Zt=0,G=0,Pt=0,$t=0,_t=ae(null),Tt=ae(null),It=!1,Sn=0,Kt=0,ft=ae(!1),Ge=ae(),Wt=ae(u()),V=ae(null),Ze=ae(!1),dt;function Yn(d){S(Ze,!1),S(V,new Image),fe(V,e(V).crossOrigin="anonymous"),fe(V,e(V).onload=()=>{console.log("Image loaded:",d,"Size:",e(V).width,"x",e(V).height),S(Ze,!0),Dt(),Pe()}),fe(V,e(V).onerror=k=>{console.error("Erreur chargement:",d,k),S(Ze,!1)}),fe(V,e(V).src=d)}function Dt(){if(!e(C)||!e(x))return;const d=e(x).getBoundingClientRect(),k=window.devicePixelRatio||1;if(e(V)&&e(V).width&&e(V).height){const U=e(V).width,te=e(V).height,ie=Math.min(1400,Math.max(150,Math.round(d.width*Math.sqrt(U*U+te*te)/U)));fe(x,e(x).style.height=ie+"px");const B=e(x).getBoundingClientRect();fe(C,e(C).style.width=B.width+"px"),fe(C,e(C).style.height=B.height+"px"),fe(C,e(C).width=Math.round(B.width*k)),fe(C,e(C).height=Math.round(B.height*k))}else fe(C,e(C).style.width=d.width+"px"),fe(C,e(C).style.height=d.height+"px"),fe(C,e(C).width=Math.round(d.width*k)),fe(C,e(C).height=Math.round(d.height*k));t&&t.setTransform(k,0,0,k,0,0),Pe()}Ca(()=>{const d=()=>{const U="ontouchstart"in window||navigator.maxTouchPoints>0||window.innerWidth<768;xa.set(U)};if(d(),window.addEventListener("resize",d),e(C)){if(ba.set(e(C)),t=e(C).getContext("2d"),e(x)){const k=()=>{M()?e(z)>1||a()?fe(x,e(x).style.touchAction="none"):fe(x,e(x).style.touchAction="pan-y"):fe(x,e(x).style.touchAction="none")};k(),wa.subscribe(k),kt.subscribe(k)}e(x)&&e(x).addEventListener("wheel",tn,{passive:!1}),Dt(),dt=new ResizeObserver(()=>Dt()),e(x)&&dt.observe(e(x)),e(x)&&(e(x).addEventListener("pointerdown",ut),e(x).addEventListener("pointermove",Qt),e(x).addEventListener("pointerup",Cn),e(x).addEventListener("pointerleave",en))}return()=>{dt&&dt.disconnect(),window.removeEventListener("resize",d),document.removeEventListener("pointermove",nn),document.removeEventListener("pointerup",Et)}});function ut(d){if(!e(x))return;(a()||e(z)>1)&&(d.preventDefault(),d.stopPropagation()),e(x).setPointerCapture(d.pointerId),le.set(d.pointerId,{x:d.clientX,y:d.clientY});const k=Date.now(),U=d.clientX-Zt,te=d.clientY-G,ie=Math.sqrt(U*U+te*te);if(k-Jt<300&&ie<50){a()?(_n.update(B=>B==="move-center"?"rotate-slices":"move-center"),Pe()):Rt.update(B=>!B),le.clear(),Jt=0;return}if(Jt=k,Zt=d.clientX,G=d.clientY,le.size===1&&(Ve=d.clientX,nt=d.clientY,Ct=d.clientY,kn=v()||1,a()&&c()==="rotate-slices")){const B=e(x).getBoundingClientRect(),ce=e(C).clientWidth,_e=e(C).clientHeight,Ce=B.left+ce/2,ye=B.top+_e/2,R=d.clientX-Ce,W=d.clientY-ye;$t=Math.atan2(W,R),Pt=b()}if(le.size===2){const B=Array.from(le.values());Fe=e(z),mt=e(z),ze=Math.hypot(B[0].x-B[1].x,B[0].y-B[1].y)}}function Qt(d){if(e(x)){if((a()||e(z)>1)&&le.has(d.pointerId)&&(d.preventDefault(),d.stopPropagation()),le.has(d.pointerId)&&le.set(d.pointerId,{x:d.clientX,y:d.clientY}),le.size===2){const k=Array.from(le.values()),U=k[0],te=k[1],B=Math.hypot(U.x-te.x,U.y-te.y)/ze;let ce=Math.max(be,Math.min(Z,Fe*B));M()&&(mt=ce,ce=e(z)+(mt-e(z))*.3);const _e={x:(U.x+te.x)/2,y:(U.y+te.y)/2},Ce=e(C).clientWidth,ye=e(C).clientHeight,R=e(x).getBoundingClientRect(),W=_e.x-(R.left+Ce/2)-e(K),H=_e.y-(R.top+ye/2)-e(Q),q=e(z),L=ce;if(S(K,e(K)-(L/q-1)*W),S(Q,e(Q)-(L/q-1)*H),S(z,ce),M()){const I=Date.now();I-Mn>16&&(Pe(),Mn=I)}else Pe();S(We,!0),clearTimeout(Ie);return}if(le.size===1){if(le.values().next().value,a()&&c()==="rotate-slices"){const k=e(x).getBoundingClientRect(),U=e(C).clientWidth,te=e(C).clientHeight,ie=k.left+U/2,B=k.top+te/2,ce=d.clientX-ie,_e=d.clientY-B,ye=Math.atan2(_e,ce)-$t;St.set(Pt+ye),Pe();return}if(e(z)>1||a()&&c()==="move-center"){const k=d.clientX-Ve,U=d.clientY-nt;S(K,e(K)+k),S(Q,e(Q)+U),Ve=d.clientX,nt=d.clientY,Pe();return}else if(!M()){const k=Ct-d.clientY,te=Math.round(k*8),ie=Math.max(10,Math.min(1e4,Math.round(kn+te)));lt.set(ie),Ot.set(!0),S(We,!0),clearTimeout(Ie)}}}}function Cn(d){if(e(x)){try{e(x).releasePointerCapture(d.pointerId)}catch{}clearTimeout(Ie),S(We,!0),Ie=setTimeout(()=>{S(We,!1)},4e3),le.delete(d.pointerId),le.size===0&&(clearTimeout(Ie),S(We,!1),ze=0,mt=e(z))}}function en(){clearTimeout(Ie),S(We,!0),Ie=setTimeout(()=>{S(We,!1)},4e3)}function tn(d){if(!e(x)||!d.ctrlKey&&!d.metaKey)return;d.preventDefault();const U=1+(-d.deltaY>0?.1:-.1),te=Math.max(be,Math.min(Z,e(z)*U)),ie=e(x).getBoundingClientRect(),B=d.clientX-(ie.left+e(C).clientWidth/2)-e(K),ce=d.clientY-(ie.top+e(C).clientHeight/2)-e(Q);S(K,e(K)-(te/e(z)-1)*B),S(Q,e(Q)-(te/e(z)-1)*ce),S(z,te),Pe()}function Xn(d){M()&&(d.stopPropagation(),d.preventDefault(),It=!0,Sn=d.clientX-(e(_t)||0),Kt=d.clientY-(e(Tt)||0),document.addEventListener("pointermove",nn),document.addEventListener("pointerup",Et))}function nn(d){It&&(d.stopPropagation(),d.preventDefault(),S(_t,d.clientX-Sn),S(Tt,d.clientY-Kt))}function Et(d){It&&(d.stopPropagation(),d.preventDefault()),It=!1,document.removeEventListener("pointermove",nn),document.removeEventListener("pointerup",Et)}Hs(()=>{e(De)&&cancelAnimationFrame(e(De)),dt&&dt.disconnect(),Ie&&clearTimeout(Ie),e(Ge)&&clearTimeout(e(Ge)),e(x)&&(e(x).removeEventListener("pointerdown",ut),e(x).removeEventListener("pointermove",Qt),e(x).removeEventListener("pointerup",Cn),e(x).removeEventListener("pointerleave",en),e(x)&&e(x).removeEventListener("wheel",tn)),ba.set(null)});function jt(d){const k=l()||w().active||a();if(!k||!e(Ze)){S(ct,0),!k&&e(De)&&(cancelAnimationFrame(e(De)),S(De,null));return}e(ct)||S(ct,d);const U=d-e(ct);if(S(ct,d),l()&&!a()){const te=v()||0;se+=te*(E()||1)*(U/1e3)}Pe(),S(De,requestAnimationFrame(jt))}function Pe(){if(!e(Ze)||!t||!e(V)||!e(C)){console.log("DrawFrame skipped:",{imageReady:e(Ze),ctx:!!t,htmlImg:!!e(V),canvas:!!e(C)});return}const d=e(C).clientWidth,k=e(C).clientHeight;t.clearRect(0,0,d,k),P()&&m()&&(t.save(),t.fillStyle=o(),t.fillRect(0,0,d,k),t.restore()),t.save();const U=e(V).width/e(V).height,te=d/k;let ie,B;U>te?(ie=d,B=d/U):(B=k,ie=k*U);const ce=ie*e(z),_e=B*e(z);let Ce=0,ye=0;if(m()){const R=ie/e(V).width;Ce=(m().x-e(V).width/2)*R*e(z),ye=(m().y-e(V).height/2)*R*e(z)}if(t.translate(d/2+e(K),k/2+e(Q)),t.translate(Ce,ye),t.rotate(se*Math.PI/180),t.translate(-Ce,-ye),t.drawImage(e(V),-ce/2,-_e/2,ce,_e),h()&&m())try{const R=m(),W=ie*e(z)/e(V).width,H=(R.x-e(V).width/2)*W,q=(R.y-e(V).height/2)*W,L=R.r*W,I=Date.now()/1e3,ge=I*Math.PI*.5%(Math.PI*2),at=I*2.5*Math.PI*2,re=Math.abs(Math.sin(at)),bt=I*.8%2,In=Math.sin(I*3)*.1,Jn=Math.tan(I*.5)*.05,Dn=L*(.8+bt*.4+In+Math.min(Math.max(Jn,-.1),.1)),an=Math.max(0,.3*(1-bt/2)*re);t.beginPath(),t.strokeStyle=`rgba(0, 255, 255, ${an})`,t.lineWidth=2,t.arc(H,q,Dn,0,Math.PI*2),t.stroke();const Gt=16;for(let he=0;he<Gt;he++){const we=he/Gt*Math.PI*2,Ke=Math.sin(I*2+he*.5)*.2,Ee=we+Ke,Je=L*(.7+Math.sin(I*3+he)*.2)*re;t.save(),t.translate(H,q),t.strokeStyle=`rgba(0, 255, 255, ${re*.3})`,t.lineWidth=1,t.beginPath(),t.moveTo(0,0),t.lineTo(Math.cos(Ee)*Je,Math.sin(Ee)*Je),t.stroke(),t.restore()}t.save(),t.translate(H,q),t.rotate(ge);const En=.4+re*.3;t.strokeStyle=`rgba(0, 255, 255, ${En})`,t.lineWidth=2+re*2,t.beginPath(),t.moveTo(0,0),t.lineTo(L*1.1,0),t.stroke(),t.restore(),t.strokeStyle=`rgba(0, 255, 255, ${.1+re*.15})`,t.lineWidth=1;for(let he=0;he<8;he++){const we=he/8*Math.PI*2,Ke=Math.tan(I+he*.3)*.1,Ee=L*(1+Math.min(Math.max(Ke,-.15),.15));if(t.beginPath(),t.moveTo(H,q),t.lineTo(H+Math.cos(we)*Ee,q+Math.sin(we)*Ee),t.stroke(),he%2===0){const Je=Math.round(we*180/Math.PI%360),xt=L*1.12,on=H+Math.cos(we)*xt,ln=q+Math.sin(we)*xt;t.font="bold 10px monospace",t.fillStyle=`rgba(0, 255, 255, ${.7*re})`,t.textAlign="center",t.textBaseline="middle",t.fillText(`${Je}Â°`,on,ln)}}const Zn=.6+re*.3;t.font="11px monospace",t.textAlign="left";const An=H+L*.3,qn=q-L*.8,sn=14,rn=(Math.sin(I*3)*100).toFixed(1),Kn=(Math.tan(I*.8)*10).toFixed(1),Ut=[`r = ${Math.round(R.r)}px`,`Î¸ = ${Math.round(ge*180/Math.PI%360)}Â°`,`Ï‰ = ${v()}Â°/s`,`sin(t) = ${rn}`,`tan(t) = ${Kn}`,`n = ${_()||0}`];t.fillStyle=`rgba(0, 0, 0, ${.7+re*.2})`,t.fillRect(An-2,qn-8,110,Ut.length*sn),Ut.forEach((he,we)=>{const Ke=qn+we*sn,Ee=["rgba(0, 255, 255, ","rgba(255, 0, 255, ","rgba(255, 255, 0, "],Je=Zn+Math.sin(I*2+we)*.2;t.fillStyle=Ee[we%3]+Je+")",t.fillText(he,An,Ke)}),t.font="bold 10px sans-serif",t.textAlign="center";const Fn=q+L+25;t.fillStyle=`rgba(0, 0, 0, ${.7+re*.2})`,t.fillRect(H-70,Fn-8,140,16),t.fillStyle=`rgba(100, 255, 200, ${.8+re*.2})`,t.fillText("STROBOSCOPIC ANALYSIS",H,Fn);for(let he=0;he<6;he++){const we=he/6*Math.PI*2+I*.3,Ke=Math.sin(I*4+he*1.5)*.1,Ee=L*(1+Ke),Je=H+Math.cos(we)*Ee,xt=q+Math.sin(we)*Ee,on=2+re*2;t.beginPath(),t.arc(Je,xt,on,0,Math.PI*2),t.fillStyle=he%2===0?`rgba(0, 255, 255, ${re})`:`rgba(255, 0, 255, ${re})`,t.fill()}t.beginPath(),t.lineWidth=2+re,t.strokeStyle=`rgba(0, 255, 255, ${.8+re*.2})`,t.arc(H,q,L,0,Math.PI*2),t.stroke(),t.lineWidth=2;const yt=Math.max(15,L*.15)*(1+re*.3);if(t.beginPath(),t.strokeStyle=`rgba(0, 255, 255, ${.9*re})`,t.moveTo(H-yt,q),t.lineTo(H+yt,q),t.moveTo(H,q-yt),t.lineTo(H,q+yt),t.stroke(),F()&&F().length){t.fillStyle=`rgba(255, 0, 255, ${.9*re})`;for(const he of F()){const we=he.angle,Ke=H+Math.cos(we)*L,Ee=q+Math.sin(we)*L,Je=2.5+re*1.5;t.beginPath(),t.arc(Ke,Ee,Je,0,Math.PI*2),t.fill()}}}catch(R){console.warn("overlay draw failed",R)}if(a()&&!A())try{let R;if(a()){const W=w().startTime||0;R=(W>0?Date.now()-W:Date.now())%2e3/2e3}else R=Math.min(1,(Date.now()-w().startTime)/2e3);if(t.fillStyle=a()?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.3)",t.fillRect(-ie/2-100,-B/2-100,ie+200,B+200),m()){const W=m(),H=ie*e(z)/e(V).width,q=(W.x-e(V).width/2)*H,L=(W.y-e(V).height/2)*H,I=W.r*H;t.strokeStyle=`rgba(100, 200, 255, ${.8*(1-R)})`,t.lineWidth=2;for(let re=0;re<3;re++){const bt=I*(.3+R*1.2+re*.3);t.beginPath(),t.arc(q,L,bt,0,Math.PI*2),t.stroke()}t.strokeStyle="rgba(100, 200, 255, 0.9)",t.lineWidth=3;const ge=R*Math.PI*6,Le=I*1.8;t.beginPath(),t.moveTo(q,L),t.lineTo(q+Math.cos(ge)*Le,L+Math.sin(ge)*Le),t.stroke();const at=4+Math.sin(R*Math.PI*4)*2;t.fillStyle=`rgba(100, 200, 255, ${.9*Math.sin(R*Math.PI)})`,t.beginPath(),t.arc(q,L,at,0,Math.PI*2),t.fill(),t.fillStyle=`rgba(100, 200, 255, ${Math.sin(R*Math.PI)})`,t.font="bold 14px sans-serif",t.textAlign="center",t.fillText("SCANNING...",q,L-I-20)}else{const W=Math.max(ie,B)/2;t.strokeStyle=`rgba(100, 200, 255, ${.6})`,t.lineWidth=2;for(let q=0;q<4;q++){const L=W*(R+q*.25)%1,I=1-L;t.strokeStyle=`rgba(100, 200, 255, ${I*.6})`,t.beginPath(),t.arc(0,0,L*W,0,Math.PI*2),t.stroke()}t.strokeStyle="rgba(100, 200, 255, 0.8)",t.lineWidth=3;const H=R*Math.PI*4;t.beginPath(),t.moveTo(0,0),t.lineTo(Math.cos(H)*W,Math.sin(H)*W),t.stroke(),t.fillStyle=`rgba(100, 200, 255, ${.8+.2*Math.sin(R*Math.PI*4)})`,t.font="bold 18px sans-serif",t.textAlign="center",a()?c()==="move-center"?(t.fillText("âš™ï¸ EDIT MODE - ADJUST POSITION & ZOOM",0,-60),t.font="bold 16px sans-serif",t.fillStyle="rgba(255, 200, 100, 0.95)",t.fillText("ðŸŽ¯ Align crosshair with rotation center",0,-20),t.font="14px sans-serif",t.fillStyle="rgba(200, 255, 200, 0.9)",t.fillText("ðŸ‘† Drag to move  â€¢  ðŸ” Scroll/Pinch to zoom",0,20),t.font="bold 14px sans-serif",t.fillStyle="rgba(100, 255, 100, 0.9)",t.fillText('Click "Confirm Detection" when ready',0,60)):(t.fillText("ðŸ”„ ROTATE SLICES MODE",0,-60),t.font="bold 16px sans-serif",t.fillStyle="rgba(255, 200, 100, 0.95)",t.fillText("ðŸ“ Divide according to the scenes",0,-20),t.font="14px sans-serif",t.fillStyle="rgba(200, 255, 200, 0.9)",t.fillText("ðŸ‘† Drag to rotate divisions",0,20),t.font="bold 14px sans-serif",t.fillStyle="rgba(100, 255, 100, 0.9)",t.fillText("Double-tap to switch back to move mode",0,60)):(t.fillText("ANALYZING IMAGE...",0,-20),t.font="12px sans-serif",t.fillText(`${Math.round(R*100)}%`,0,10))}}catch(R){console.warn("radar animation failed",R)}if(i()&&l()){const R=1e3/u(),W=e(ct)%R/R,H=Math.max(0,Math.min(1,(u()-40)/30));let q;if(H<.33?q=W>.5?.85:0:H<.67?q=Math.sin(W*Math.PI*2)*.5+.5>.6?.6:0:q=(Math.sin(W*Math.PI*2)*.5+.5)*.3,q>.05){const L=t.createRadialGradient(d/2,k/2,0,d/2,k/2,Math.max(d,k)*.8);L.addColorStop(0,`rgba(0, 0, 0, ${q*.7})`),L.addColorStop(.5,`rgba(0, 0, 0, ${q})`),L.addColorStop(1,`rgba(0, 0, 0, ${q*.9})`),t.fillStyle=L,t.fillRect(-d,-k,d*3,k*3),H<.5&&(t.fillStyle=`rgba(20, 20, 40, ${q*.15})`,t.fillRect(-d,-k,d*3,k*3))}if(e(ft)){t.save(),t.translate(d/2,k/2);const L=-d/2+15,I=-k/2+15;let ge,Le;u()<50?(ge="rgba(255, 100, 100, 0.9)",Le="FLICKER"):u()<60?(ge="rgba(255, 180, 50, 0.9)",Le="THRESHOLD"):(ge="rgba(100, 220, 100, 0.9)",Le="FUSED"),t.fillStyle="rgba(0, 0, 0, 0.75)",t.beginPath(),t.roundRect(L,I,85,18,4),t.fill(),t.font="bold 11px monospace",t.fillStyle=ge,t.textAlign="left",t.textBaseline="middle",t.fillText(`${u()}Hz`,L+5,I+9),t.font="9px sans-serif",t.fillStyle="rgba(255, 255, 255, 0.7)",t.fillText(Le,L+42,I+9),t.restore()}}if(t.restore(),a()||A()){const R=Date.now()%1e3/1e3,W=.7+.3*Math.sin(R*Math.PI*2);t.save(),t.translate(d/2,k/2);const H=p()||_()||12;if(a()&&H>0){const L=Math.min(d,k)*.3,I=Math.PI*2/H,ge=b();for(let Le=0;Le<H;Le++){const at=Le*I-Math.PI/2+ge,re=at+I,bt=.15+.1*(Le%2*.5);t.fillStyle=`rgba(100, 200, 255, ${bt})`,t.beginPath(),t.moveTo(0,0),t.arc(0,0,L,at,re),t.closePath(),t.fill(),t.strokeStyle=`rgba(100, 200, 255, ${.4*W})`,t.lineWidth=2,t.beginPath(),t.moveTo(0,0),t.lineTo(Math.cos(at)*L,Math.sin(at)*L),t.stroke()}t.strokeStyle=`rgba(100, 200, 255, ${.5*W})`,t.lineWidth=3,t.beginPath(),t.arc(0,0,L,0,Math.PI*2),t.stroke()}t.strokeStyle=`rgba(255, 100, 0, ${W})`,t.lineWidth=4;const q=Math.min(d,k)*.1;t.beginPath(),t.arc(0,0,q*.7,0,Math.PI*2),t.stroke(),t.lineWidth=3,t.beginPath(),t.moveTo(-q,0),t.lineTo(q,0),t.stroke(),t.beginPath(),t.moveTo(0,-q),t.lineTo(0,q),t.stroke(),t.beginPath(),t.arc(0,0,10+3*Math.sin(R*Math.PI*2),0,Math.PI*2),t.fillStyle=`rgba(255, 100, 0, ${W})`,t.fill(),t.strokeStyle="rgba(255, 255, 255, 0.9)",t.lineWidth=2,t.stroke(),t.beginPath(),t.arc(0,0,3,0,Math.PI*2),t.fillStyle="rgba(255, 255, 255, 0.95)",t.fill(),t.restore()}}Te(()=>(a(),St),()=>{a()?(S(K,0),S(Q,0),S(z,1),_n.set("move-center"),Pe()):St.set(0)}),Te(()=>(e(K),e(Q),e(z)),()=>{wa.set({translateX:e(K),translateY:e(Q),scale:e(z)})}),Te(()=>(l(),Ht),()=>{l()&&Ht.set(!1)}),Te(()=>(i(),u(),e(Wt),e(Ge)),()=>{i()&&u()!==e(Wt)&&(S(Wt,u()),S(ft,!0),clearTimeout(e(Ge)),S(Ge,setTimeout(()=>{S(ft,!1)},1e3)))}),Te(()=>(i(),e(Ge)),()=>{i()&&(S(ft,!0),clearTimeout(e(Ge)),S(Ge,setTimeout(()=>{S(ft,!1)},1e3)))}),Te(()=>(i(),e(Ge)),()=>{i()||(S(ft,!1),clearTimeout(e(Ge)))}),Te(()=>(f(),e(V)),()=>{f()?Yn(f()):(e(V)&&S(V,null),S(Ze,!1),Pe())}),Te(()=>p(),()=>{p()!==void 0&&Pe()}),Te(()=>(l(),w(),a(),e(De)),()=>{l()||w().active||a()?e(De)||S(De,requestAnimationFrame(jt)):e(De)&&(cancelAnimationFrame(e(De)),S(De,null),S(ct,0))}),Sa(),Nn();var At=ci(),Nt=$(At);Fa(Nt,d=>S(C,d),()=>e(C));var wt=g(Nt,2);{var Pn=d=>{var k=ni(),U=$(k);T(k),Se(te=>{it(k,M()&&e(_t)!==null?`right: auto; top: auto; left: ${e(_t)}px; top: ${e(Tt)}px;`:""),pe(U,`Speed: ${te??""}Â°/s`)},[()=>(v(),He(()=>v().toFixed(0)))]),j("pointerdown",k,Xn),D(d,k)};ne(wt,d=>{(e(We)||M())&&d(Pn)})}var $n=g(wt,2);{var Bn=d=>{var k=ri(),U=$(k),te=$(U);{var ie=ce=>{var _e=ai(),Ce=g(qe(_e),4),ye=$(Ce);T(Ce),Se(()=>pe(ye,`${u()??""} Hz`)),D(ce,_e)},B=ce=>{var _e=rt(),Ce=qe(_e);{var ye=W=>{var H=si(),q=g(qe(H),4),L=$(q);T(q),Se(()=>pe(L,`${u()??""} Hz`)),D(W,H)},R=W=>{var H=ii(),q=g(qe(H),4),L=$(q);T(q),Se(()=>pe(L,`${u()??""} Hz`)),D(W,H)};ne(Ce,W=>{u()<58?W(ye):W(R,!1)},!0)}D(ce,_e)};ne(te,ce=>{u()<48?ce(ie):ce(B,!1)})}T(U),T(k),D(d,k)};ne($n,d=>{e(ft)&&i()&&d(Bn)})}var Vn=g($n,2);{var Tn=d=>{var k=li(),U=qe(k),te=$(U);{var ie=I=>{var ge=$e("ðŸŽ¯ EDIT MODE - Drag to position â€¢ Scroll to zoom â€¢ Double-tap to rotate slices");D(I,ge)},B=I=>{var ge=$e("ðŸ”„ ROTATE SLICES - Drag to rotate â€¢ Double-tap to move center");D(I,ge)};ne(te,I=>{c()==="move-center"?I(ie):I(B,!1)})}T(U);var ce=g(U,2);{var _e=I=>{var ge=oi();D(I,ge)};ne(ce,I=>{c()==="move-center"&&I(_e)})}var Ce=g(ce,2),ye=g($(Ce),2),R=$(ye),W=g(R,2),H=$(W),q=$(H,!0);T(H),Hn(2),T(W);var L=g(W,2);T(ye),T(Ce),Se(()=>pe(q,p()||12)),j("click",R,ke(()=>zt.set(Math.max(6,(p()||12)-1)))),j("pointerdown",R,ke(function(I){ot.call(this,s,I)})),j("pointermove",R,ke(function(I){ot.call(this,s,I)})),j("pointerup",R,ke(function(I){ot.call(this,s,I)})),j("click",L,ke(()=>zt.set(Math.min(100,(p()||12)+1)))),j("pointerdown",L,ke(function(I){ot.call(this,s,I)})),j("pointermove",L,ke(function(I){ot.call(this,s,I)})),j("pointerup",L,ke(function(I){ot.call(this,s,I)})),D(d,k)};ne(Vn,d=>{a()&&d(Tn)})}T(At),Fa(At,d=>S(x,d),()=>e(x)),Se(()=>zn(At,1,`canvas-wrapper ${a()?"edit-mode":""}`,"svelte-byh4af")),D(n,At),xn(),de()}async function di(n,s,a={}){const{x:l,y:u,r:i}=s||{x:n.width/2,y:n.height/2,r:Math.min(n.width,n.height)/2},f=a.samples||720,p=a.innerOffset||-Math.max(2,Math.round(i*.06)),M=a.outerOffset||Math.max(2,Math.round(i*.06)),v=a.thresholdFactor||.6,c=document.createElement("canvas");c.width=n.width,c.height=n.height;const b=c.getContext("2d");b.drawImage(n,0,0);const w=b.getImageData(0,0,c.width,c.height).data,E=c.width,P=c.height;function m(Z,K){const Q=Math.round(Z),le=Math.round(K);if(Q<0||Q>=E||le<0||le>=P)return 0;const Fe=(le*E+Q)*4,ze=w[Fe],Ve=w[Fe+1],nt=w[Fe+2];return .2126*ze+.7152*Ve+.0722*nt}const o=new Array(f);for(let Z=0;Z<f;Z++){const K=Z/f*Math.PI*2,Q=[],le=3;for(let ze=0;ze<le;ze++){const Ve=ze/(le-1),nt=i+p+(M-p)*Ve,De=l+nt*Math.cos(K),mt=u+nt*Math.sin(K);Q.push(m(De,mt))}const Fe=Q.reduce((ze,Ve)=>ze+Ve,0)/Q.length;o[Z]=Fe}const h=o.reduce((Z,K)=>Z+K,0)/o.length,_=Math.sqrt(o.reduce((Z,K)=>Z+(K-h)**2,0)/o.length),F=h+_*v,A=o.map(Z=>Z>F);let O=0,de=!1,x=[],C=0;for(let Z=0;Z<A.length*2;Z++){const K=Z%A.length;if(A[K]?(C++,de=!0):(de&&(x.push(C),C=0),de=!1),Z>=A.length&&!de)break}de&&C>0&&x.push(C);const t=Math.max(2,Math.round(f/360*(a.minDegrees||5))),se=x.filter(Z=>Z>=t);O=se.length;const z=[];let be=0;for(const Z of x){const K=be%f,Q=(be+Z-1)%f,le=(K+Math.floor(Z/2))%f;z.push({start:K,end:Q,mid:le,angle:le/f*2*Math.PI}),be+=Z+1}return{count:O,samples:o,mask:A,groups:se,positions:z,canvas:c}}function ui(n,s=24,a={}){const l=[],{width:u,height:i}=n,f=a.circle||{x:u/2,y:i/2,r:Math.min(u,i)/2},p=a.margin??1.05,M=Math.round(f.r*p),v=M*2,c=a.outputSize||Math.max(32,Math.round(v)),b=a.fps||24,w=typeof a.rotationSpeed=="number"?a.rotationSpeed:0,E=a.direction==null?1:a.direction,P=a.initialRotation||0,m=a.fillOuterCircle||!1,o=a.fillColor||"#000000",h=document.createElement("canvas");h.width=v,h.height=v;const _=h.getContext("2d"),F=Math.round(f.x-M),A=Math.round(f.y-M);try{_.drawImage(n,F,A,v,v,0,0,v,v)}catch{_.drawImage(n,0,0)}const de=w/b*Math.PI/180*E;Math.round(v*(a.zoom||1));for(let x=0;x<s;x++){const C=x*de+P,t=document.createElement("canvas");t.width=c,t.height=c;const se=t.getContext("2d");m&&(se.fillStyle=o,se.fillRect(0,0,c,c)),se.translate(c/2,c/2),se.rotate(C);const z=Math.round(v*(a.zoom||1)),be=z;se.drawImage(h,-z/2,-be/2,z,be),l.push(t)}return l}function vi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Rn(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ga={exports:{}},Na;function pi(){return Na||(Na=1,(function(n,s){(function(a){n.exports=a()})(function(){return(function a(l,u,i){function f(v,c){if(!u[v]){if(!l[v]){var b=typeof Rn=="function"&&Rn;if(!c&&b)return b(v,!0);if(p)return p(v,!0);var w=new Error("Cannot find module '"+v+"'");throw w.code="MODULE_NOT_FOUND",w}var E=u[v]={exports:{}};l[v][0].call(E.exports,function(P){var m=l[v][1][P];return f(m||P)},E,E.exports,a,l,u,i)}return u[v].exports}for(var p=typeof Rn=="function"&&Rn,M=0;M<i.length;M++)f(i[M]);return f})({1:[function(a,l,u){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}l.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(c){if(!p(c)||c<0||isNaN(c))throw TypeError("n must be a positive number");return this._maxListeners=c,this},i.prototype.emit=function(c){var b,w,E,P,m,o;if(this._events||(this._events={}),c==="error"&&(!this._events.error||M(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var h=new Error('Uncaught, unspecified "error" event. ('+b+")");throw h.context=b,h}if(w=this._events[c],v(w))return!1;if(f(w))switch(arguments.length){case 1:w.call(this);break;case 2:w.call(this,arguments[1]);break;case 3:w.call(this,arguments[1],arguments[2]);break;default:P=Array.prototype.slice.call(arguments,1),w.apply(this,P)}else if(M(w))for(P=Array.prototype.slice.call(arguments,1),o=w.slice(),E=o.length,m=0;m<E;m++)o[m].apply(this,P);return!0},i.prototype.addListener=function(c,b){var w;if(!f(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",c,f(b.listener)?b.listener:b),this._events[c]?M(this._events[c])?this._events[c].push(b):this._events[c]=[this._events[c],b]:this._events[c]=b,M(this._events[c])&&!this._events[c].warned&&(v(this._maxListeners)?w=i.defaultMaxListeners:w=this._maxListeners,w&&w>0&&this._events[c].length>w&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),typeof console.trace=="function"&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(c,b){if(!f(b))throw TypeError("listener must be a function");var w=!1;function E(){this.removeListener(c,E),w||(w=!0,b.apply(this,arguments))}return E.listener=b,this.on(c,E),this},i.prototype.removeListener=function(c,b){var w,E,P,m;if(!f(b))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;if(w=this._events[c],P=w.length,E=-1,w===b||f(w.listener)&&w.listener===b)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,b);else if(M(w)){for(m=P;m-- >0;)if(w[m]===b||w[m].listener&&w[m].listener===b){E=m;break}if(E<0)return this;w.length===1?(w.length=0,delete this._events[c]):w.splice(E,1),this._events.removeListener&&this.emit("removeListener",c,b)}return this},i.prototype.removeAllListeners=function(c){var b,w;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[c]&&delete this._events[c],this;if(arguments.length===0){for(b in this._events)b!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(w=this._events[c],f(w))this.removeListener(c,w);else if(w)for(;w.length;)this.removeListener(c,w[w.length-1]);return delete this._events[c],this},i.prototype.listeners=function(c){var b;return!this._events||!this._events[c]?b=[]:f(this._events[c])?b=[this._events[c]]:b=this._events[c].slice(),b},i.prototype.listenerCount=function(c){if(this._events){var b=this._events[c];if(f(b))return 1;if(b)return b.length}return 0},i.listenerCount=function(c,b){return c.listenerCount(b)};function f(c){return typeof c=="function"}function p(c){return typeof c=="number"}function M(c){return typeof c=="object"&&c!==null}function v(c){return c===void 0}},{}],2:[function(a,l,u){var i,f,p,M,v;v=navigator.userAgent.toLowerCase(),M=navigator.platform.toLowerCase(),i=v.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],p=i[1]==="ie"&&document.documentMode,f={name:i[1]==="version"?i[3]:i[1],version:p||parseFloat(i[1]==="opera"&&i[4]?i[4]:i[2]),platform:{name:v.match(/ip(?:ad|od|hone)/)?"ios":(v.match(/(?:webos|android)/)||M.match(/mac|win|linux/)||["other"])[0]}},f[f.name]=!0,f[f.name+parseInt(f.version,10)]=!0,f.platform[f.platform.name]=!0,l.exports=f},{}],3:[function(a,l,u){var i,f,p,M=function(w,E){for(var P in E)v.call(E,P)&&(w[P]=E[P]);function m(){this.constructor=w}return m.prototype=E.prototype,w.prototype=new m,w.__super__=E.prototype,w},v={}.hasOwnProperty,c=[].indexOf||function(w){for(var E=0,P=this.length;E<P;E++)if(E in this&&this[E]===w)return E;return-1},b=[].slice;i=a("events").EventEmitter,p=a("./browser.coffee"),f=(function(w){var E,P;M(m,w),E={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},P={delay:500,copy:!1};function m(o){var h,_,F;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(o);for(_ in E)F=E[_],(h=this.options)[_]==null&&(h[_]=F)}return m.prototype.setOption=function(o,h){if(this.options[o]=h,this._canvas!=null&&(o==="width"||o==="height"))return this._canvas[o]=h},m.prototype.setOptions=function(o){var h,_,F;_=[];for(h in o)v.call(o,h)&&(F=o[h],_.push(this.setOption(h,F)));return _},m.prototype.addFrame=function(o,h){var _,F;h==null&&(h={}),_={},_.transparent=this.options.transparent;for(F in P)_[F]=h[F]||P[F];if(this.options.width==null&&this.setOption("width",o.width),this.options.height==null&&this.setOption("height",o.height),typeof ImageData<"u"&&ImageData!==null&&o instanceof ImageData)_.data=o.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&o instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&o instanceof WebGLRenderingContext)h.copy?_.data=this.getContextData(o):_.context=o;else if(o.childNodes!=null)h.copy?_.data=this.getImageData(o):_.image=o;else throw new Error("Invalid image");return this.frames.push(_)},m.prototype.render=function(){var o,h,_;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var F,A,O;for(O=[],F=0,A=this.frames.length;0<=A?F<A:F>A;0<=A?++F:--F)O.push(null);return O}).call(this),h=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(o=0,_=h;0<=_?o<_:o>_;0<=_?++o:--o)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},m.prototype.abort=function(){for(var o;o=this.activeWorkers.shift(),o!=null;)this.log("killing active worker"),o.terminate();return this.running=!1,this.emit("abort")},m.prototype.spawnWorkers=function(){var o,h,_;return o=Math.min(this.options.workers,this.frames.length),(function(){_=[];for(var F=h=this.freeWorkers.length;h<=o?F<o:F>o;h<=o?F++:F--)_.push(F);return _}).apply(this).forEach((function(F){return function(A){var O;return F.log("spawning worker "+A),O=new Worker(F.options.workerScript),O.onmessage=function(de){return F.activeWorkers.splice(F.activeWorkers.indexOf(O),1),F.freeWorkers.push(O),F.frameFinished(de.data)},F.freeWorkers.push(O)}})(this)),o},m.prototype.frameFinished=function(o){var h,_;if(this.log("frame "+o.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[o.index]=o,this.options.globalPalette===!0&&(this.options.globalPalette=o.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(h=1,_=this.freeWorkers.length;1<=_?h<_:h>_;1<=_?++h:--h)this.renderNextFrame();return c.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},m.prototype.finishRendering=function(){var o,h,_,F,A,O,de,x,C,t,se,z,be,Z,K,Q;for(x=0,Z=this.imageParts,A=0,C=Z.length;A<C;A++)h=Z[A],x+=(h.data.length-1)*h.pageSize+h.cursor;for(x+=h.pageSize-h.cursor,this.log("rendering finished - filesize "+Math.round(x/1e3)+"kb"),o=new Uint8Array(x),z=0,K=this.imageParts,O=0,t=K.length;O<t;O++)for(h=K[O],Q=h.data,_=de=0,se=Q.length;de<se;_=++de)be=Q[_],o.set(be,z),_===h.data.length-1?z+=h.cursor:z+=h.pageSize;return F=new Blob([o],{type:"image/gif"}),this.emit("finished",F,o)},m.prototype.renderNextFrame=function(){var o,h,_;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return o=this.frames[this.nextFrame++],_=this.freeWorkers.shift(),h=this.getTask(o),this.log("starting frame "+(h.index+1)+" of "+this.frames.length),this.activeWorkers.push(_),_.postMessage(h)},m.prototype.getContextData=function(o){return o.getImageData(0,0,this.options.width,this.options.height).data},m.prototype.getImageData=function(o){var h;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),h=this._canvas.getContext("2d"),h.setFill=this.options.background,h.fillRect(0,0,this.options.width,this.options.height),h.drawImage(o,0,0),this.getContextData(h)},m.prototype.getTask=function(o){var h,_;if(h=this.frames.indexOf(o),_={index:h,last:h===this.frames.length-1,delay:o.delay,transparent:o.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:p.name==="chrome"},o.data!=null)_.data=o.data;else if(o.context!=null)_.data=this.getContextData(o.context);else if(o.image!=null)_.data=this.getImageData(o.image);else throw new Error("Invalid frame");return _},m.prototype.log=function(){var o;if(o=1<=arguments.length?b.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,o)},m})(i),l.exports=f},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(ga)),ga.exports}var hi=pi();const gi=vi(hi),mi=""+new URL("../assets/gif.worker.CjkyQP34.js",import.meta.url).href;async function _i(n,s=24){if(!n||n.length===0)throw new Error("No frames to export");const a=new gi({workers:2,quality:10,width:n[0].width,height:n[0].height,workerScript:mi,repeat:0,background:null,comment:"Created with Phenakistoscope Lab - https://tclaret.github.io/phenaki-lab/"}),l=Math.round(1e3/s);for(const u of n){const i=u.width,f=u.height,p=document.createElement("canvas");p.width=i,p.height=f;const M=p.getContext("2d");M.fillStyle="#ffffff",M.fillRect(0,0,i,f),M.drawImage(u,0,0),a.addFrame(p,{delay:l,copy:!0})}return new Promise((u,i)=>{a.on("finished",function(f){const p=URL.createObjectURL(f);u(p)}),a.on("error",i),a.render()})}var wi=oe('<div class="export-overlay svelte-14nyow8" role="status" aria-live="polite"><div class="export-box svelte-14nyow8"><div class="spinner svelte-14nyow8" aria-hidden="true"></div> <div class="export-text svelte-14nyow8">Workingâ€¦ Exporting GIF â€” please wait</div></div></div>'),bi=oe('<button class="confirm-btn svelte-14nyow8">Confirm Detection</button> <button class="svelte-14nyow8">Cancel</button>',1),yi=oe("<button>Detect Circle & Count</button>"),xi=oe('<span style="background: #4a9eff; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.75em; font-weight: bold; margin-left: 4px;" class="svelte-14nyow8"> </span>'),Mi=oe('<input type="color" style="width:40px;height:28px;border:1px solid #555;border-radius:4px;cursor:pointer;margin-left:4px;" title="Choose fill color" class="svelte-14nyow8"/>'),ki=oe('<div style="margin-top: 16px; padding: 12px; background: rgba(74, 158, 255, 0.08); border-radius: 6px; border: 1px solid rgba(74, 158, 255, 0.2);" class="svelte-14nyow8"><div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;" class="svelte-14nyow8"><div style="font-weight: 600; color: #4a9eff; font-size: 0.95em;" class="svelte-14nyow8">âš¡ Flicker Fusion Threshold</div> <a href="https://en.wikipedia.org/wiki/Flicker_fusion_threshold" target="_blank" rel="noopener noreferrer" style="display: flex; align-items: center; gap: 4px; font-size: 0.75em; color: #aaa; text-decoration: none; opacity: 0.7; transition: opacity 0.2s;" title="Learn more on Wikipedia" class="svelte-14nyow8"><svg width="14" height="14" viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg" class="svelte-14nyow8"><path fill="currentColor" d="M120 0C53.8 0 0 53.8 0 120s53.8 120 120 120 120-53.8 120-120S186.2 0 120 0zm0 217.5c-53.8 0-97.5-43.7-97.5-97.5S66.2 22.5 120 22.5s97.5 43.7 97.5 97.5-43.7 97.5-97.5 97.5zm-7.5-165h15v90h-15zm0 105h15v15h-15z" class="svelte-14nyow8"></path></svg> <span class="svelte-14nyow8">Wikipedia</span></a></div> <div style="font-size: 0.8em; color: #888; font-style: italic; margin-bottom: 10px;" class="svelte-14nyow8">Note: This test only affects visualization, not the exported GIF</div> <div style="margin-bottom: 12px;" class="svelte-14nyow8"><div style="font-size: 0.85em; color: #aaa; margin-bottom: 6px;" class="svelte-14nyow8">Quick Presets:</div> <div style="display: flex; gap: 6px; flex-wrap: wrap;" class="svelte-14nyow8"><button class="flicker-preset-btn svelte-14nyow8">30 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">42 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">50 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">55 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">60 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">70 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">80 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">100 Hz</button></div></div> <div style="margin-top: 12px;" class="svelte-14nyow8"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;" class="svelte-14nyow8"><span style="font-size: 0.85em; color: #ccc;" class="svelte-14nyow8">Fine Tune:</span> <span style="font-size: 1.1em; font-weight: bold; color: #4a9eff;" class="svelte-14nyow8"> </span></div> <input type="range" min="20" max="100" step="0.5" style="width: 100%; cursor: pointer;" class="svelte-14nyow8"/> <div style="display: flex; justify-content: space-between; font-size: 0.7em; color: #666; margin-top: 4px;" class="svelte-14nyow8"><span class="svelte-14nyow8">20 Hz</span> <span style="color: #4a9eff; font-weight: 500;" class="svelte-14nyow8"><!></span> <span class="svelte-14nyow8">100 Hz</span></div></div> <div style="margin-top: 10px; padding: 8px; background: rgba(74, 158, 255, 0.12); border-radius: 4px; font-size: 0.8em;" class="svelte-14nyow8"><div style="font-weight: 500; color: #4a9eff; margin-bottom: 3px;" class="svelte-14nyow8"><!></div> <div style="color: #aaa; font-size: 0.9em;" class="svelte-14nyow8"><!></div></div></div>'),Si=oe('<div class="drag-handle svelte-14nyow8" title="Drag to move">â‹®â‹®</div>'),Ci=oe('<div><!> <div style="display:flex;gap:12px;align-items:center;" class="svelte-14nyow8"><button class="speed-btn svelte-14nyow8">âˆ’</button> <div style="text-align:center;min-width:120px;" class="svelte-14nyow8"><div class="speed-display svelte-14nyow8"> </div> <div style="font-size:11px;opacity:0.6;margin-top:4px;" class="svelte-14nyow8">Rotation Speed</div></div> <button class="speed-btn svelte-14nyow8">+</button></div></div>'),Pi=oe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Use +/âˆ’ buttons above to adjust speed)</em>'),$i=oe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Touch: drag up to speed up, down to slow down)</em>'),Ti=oe('<div class="svelte-14nyow8"><strong class="svelte-14nyow8">Outer circle fill:</strong> </div>'),Ii=oe('<div class="svelte-14nyow8"><strong class="svelte-14nyow8">Edit mode:</strong> Active</div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Canvas transform:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Slice rotation:</strong> </div>',1),Di=oe('<div class="svelte-14nyow8"><strong class="svelte-14nyow8">Circle:</strong> </div>'),Ei=oe('<div class="panel svelte-14nyow8"><!> <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><button> </button> <button class="svelte-14nyow8">Reverse</button> <!> <button class="svelte-14nyow8">Apply Suggested Speed</button> <div class="gif-export-group svelte-14nyow8"><button class="save-gif-btn svelte-14nyow8"> </button> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">Frames:</span> <input type="number" min="6" step="1" style="width:80px;padding:4px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <span style="font-size:11px;opacity:0.6;" title="Leave empty for auto-detection" class="svelte-14nyow8"><!></span></label> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">FPS:</span> <select style="padding:4px;border-radius:4px;border:1px solid #ccc;background:#333;color:white;" class="svelte-14nyow8"><option class="svelte-14nyow8">3 (Ultra Slow)</option><option class="svelte-14nyow8">5 (Very Slow)</option><option class="svelte-14nyow8">8 (Slow)</option><option class="svelte-14nyow8">10 (Classic)</option><option class="svelte-14nyow8">15 (Natural)</option><option class="svelte-14nyow8">20 (Smooth)</option><option class="svelte-14nyow8">24 (Cinema)</option><option class="svelte-14nyow8">30 (Fast)</option></select></label></div> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Show Overlay</span></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Flicker Effect</span> <!></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Fill Outer Circle</span> <!></label></div> <!> <!> <div style="margin-top:12px;" class="svelte-14nyow8"><div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><div class="svelte-14nyow8"><strong class="svelte-14nyow8">Current Speed:</strong> <!></div> <div style="display:flex;gap:6px;align-items:center;" class="svelte-14nyow8"><label for="manual-speed-input" style="font-size:12px;" class="svelte-14nyow8">Type speed:</label> <input id="manual-speed-input" type="number" min="1" step="1" style="width:100px;padding:6px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <button class="svelte-14nyow8">Set</button></div></div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Selected scenes count:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Detected objects:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Suggested speed:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Current speed:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Reverse:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Overlay visible:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Flicker effect:</strong> </div> <!> <!> <!></div></div>');function Ai(n,s){yn(s,!1);const a=()=>Y(Rt,"$isPlaying",A),l=()=>Y(wn,"$detectedCircle",A),u=()=>Y(lt,"$rotationSpeed",A),i=()=>Y(Vt,"$imageUrl",A),f=()=>Y(wa,"$canvasTransform",A),p=()=>Y(ba,"$playerCanvas",A),M=()=>Y(zt,"$gifFrameCount",A),v=()=>Y(xa,"$isMobile",A),c=()=>Y(bn,"$detectedCount",A),b=()=>Y(mn,"$suggestedRotationSpeed",A),w=()=>Y(_a,"$overlayVisible",A),E=()=>Y(kt,"$editMode",A),P=()=>Y(ya,"$flickerEnabled",A),m=()=>Y(et,"$flickerFrequency",A),o=()=>Y(Xt,"$fillOuterCircle",A),h=()=>Y(Bt,"$outerCircleFillColor",A),_=()=>Y(Wn,"$rotationDirection",A),F=()=>Y(St,"$sliceRotationAngle",A),[A,O]=Gn(),de=ae(),x=ae(),C=ae(),t=ae(),se=ae(),z=ae();let be=ae(!1),Z=ae(!1);async function K(){Rt.update(r=>!r)}let Q=null;function le(r){r==="increase"?ze():Ve(),Q&&clearInterval(Q),Q=setInterval(()=>{r==="increase"?ze():Ve()},100)}function Fe(){Q&&(clearInterval(Q),Q=null)}function ze(){lt.update(r=>Math.min(1e4,r+60)),Ot.set(!0)}function Ve(){lt.update(r=>Math.max(10,r-60)),Ot.set(!0)}function nt(){Wn.update(r=>r*-1)}async function De(){if(!i())return;const y=Date.now();hn.set({active:!0,progress:0,startTime:y}),kt.set(!0)}async function mt(){const r=i();if(!r)return;S(be,!0);const y=f();kt.set(!1);const N=Date.now();hn.set({active:!0,progress:0,startTime:N}),a()||requestAnimationFrame(()=>{});try{const X=await V(r);let J=null;const ee=p();if(ee){const Qe=ee.clientWidth,vt=ee.clientHeight,pt=X.width/X.height,cn=Qe/vt;let je,qt;pt>cn?(je=Qe,qt=Qe/pt):(qt=vt,je=vt*pt);const Ln=-y.translateX,ea=-y.translateY,ta=Ln/y.scale,na=ea/y.scale,fn=X.width/je,dn=ta*fn+X.width/2,aa=na*fn+X.height/2;J={x:dn,y:aa,r:Math.min(X.width,X.height)/2*.9}}J||(J={x:X.width/2,y:X.height/2,r:Math.min(X.width,X.height)/2*.9});const ue=await di(X,J,{samples:720}),Re=2e3-(Date.now()-N);Re>0&&await new Promise(Qe=>setTimeout(Qe,Re)),wn.set(J),bn.set(ue.count),Un.set(ue.positions||[]);const st=(ue.count>0?360/ue.count:1)*30;mn.set(st),hn.set({active:!1,progress:1,startTime:N}),Ht.set(!0),Rt.set(!1)}finally{S(be,!1)}}function Mn(){mn.subscribe(r=>{r&&(lt.set(r),Ot.set(!0))})()}function ct(){kt.set(!1),Ht.set(!1),hn.set({active:!1,progress:0,startTime:0})}let Ct=ae(0);function kn(){const r=Number(e(Ct))||0;r<0||(lt.set(r),Ot.set(!0))}let We=ae(!1),Ie=ae(15);async function Jt(){const r=i()||Yt(Vt);if(!r)return alert("No image loaded to export.");if(!e(C))return alert("Please detect the circle before exporting the GIF.");const y=await V(r),N=document.createElement("canvas");N.width=y.width,N.height=y.height,N.getContext("2d").drawImage(y,0,0,y.width,y.height),S(We,!0);try{let J;e(x)&&e(x)!==e(t)*2?J=e(x):e(t)&&e(t)>0?J=Math.max(12,e(t)*2):J=e(x)||24;const ee=e(C),ue=Number(Yt(lt)||0),Oe=Number(Yt(Wn)||1),Re=360/J,Ae=Math.abs(ue/Re),xe=Ae>0?Ae:e(Ie),st=Yt(St)||0,Qe=Yt(Xt),vt=Yt(Bt),pt=ui(N,J,{circle:ee,margin:1.1,zoom:1,fps:e(Ie),rotationSpeed:Re*e(Ie),direction:Oe,initialRotation:st,fillOuterCircle:Qe,fillColor:vt}),cn=await _i(pt,xe),je=document.createElement("a");je.href=cn;const qt=new Date().toISOString().slice(0,19).replace(/:/g,"-");je.download=`phenaki-lab_${qt}_${pt.length}frames_${e(Ie)}fps.gif`,document.body.appendChild(je),je.click(),je.remove()}catch(J){console.error("GIF export failed",J),alert("GIF export failed: "+(J&&J.message))}finally{S(We,!1)}}const Zt="phenaki.speedControlPos";let G=ae({left:null,top:null}),Pt=ae(!1),$t=ae(!1),_t={x:0,y:0},Tt={left:0,top:0},It=0;function Sn(){try{const r=localStorage.getItem(Zt);r&&S(G,JSON.parse(r))}catch{}}function Kt(){try{localStorage.setItem(Zt,JSON.stringify(e(G)))}catch{}}function ft(r){const y=Date.now(),N=y-It<300;if(It=y,r.target&&r.target.closest&&r.target.closest("button"))return;const X=r.target&&r.target.closest&&r.target.closest(".drag-handle"),J=v(),ee=r.target&&r.target.closest&&(r.target.classList.contains("speed-display")||r.target.closest(".speed-display"));if(!(!X&&!N&&!J&&!ee)&&!(J&&!X&&!ee)){S(Pt,!0),S($t,!0),_t={x:r.clientX,y:r.clientY},Tt={left:e(G).left??Math.round((window.innerWidth-200)/2),top:e(G).top??Math.round((window.innerHeight-80)/2)};try{r.target.setPointerCapture(r.pointerId)}catch{}window.addEventListener("pointermove",Ge),window.addEventListener("pointerup",Wt)}}function Ge(r){if(!e($t))return;const y=r.clientX-_t.x,N=r.clientY-_t.y;v()||fe(G,e(G).left=Math.round(Tt.left+y)),fe(G,e(G).top=Math.round(Tt.top+N));const X=160,J=8,ee=Math.max(J,window.innerHeight-X-8);if(fe(G,e(G).top=Math.min(Math.max(e(G).top,J),ee)),!v()){const Re=Math.max(8,window.innerWidth-200-8);fe(G,e(G).left=Math.min(Math.max(e(G).left,8),Re))}}function Wt(r){S($t,!1),S(Pt,!1);try{r.target.releasePointerCapture&&r.target.releasePointerCapture(r.pointerId)}catch{}window.removeEventListener("pointermove",Ge),window.removeEventListener("pointerup",Wt),Kt()}Ca(()=>{Sn(),e(G).left==null&&fe(G,e(G).left=Math.round((window.innerWidth-200)/2)),e(G).top==null&&fe(G,e(G).top=Math.round((window.innerHeight-80)/2));function r(){const ue=Math.max(8,window.innerWidth-200-8),Oe=Math.max(8,window.innerHeight-80-8);e(G).left==null&&fe(G,e(G).left=ue),e(G).top==null&&fe(G,e(G).top=Oe),fe(G,e(G).left=Math.min(Math.max(e(G).left,8),ue)),fe(G,e(G).top=Math.min(Math.max(e(G).top,8),Oe))}r();const y=()=>{r(),Kt()};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)});function V(r){return new Promise((y,N)=>{const X=new Image;X.crossOrigin="anonymous",X.onload=()=>y(X),X.onerror=N,X.src=r})}Te(()=>a(),()=>{a()&&S(Z,!0)}),Te(()=>(l(),a(),u()),()=>{S(de,!!l()&&a()&&u()>0)}),Te(()=>u(),()=>{S(Ct,Number(u()||0))}),Te(()=>M(),()=>{S(x,M())}),Te(()=>l(),()=>{S(C,l())}),Te(()=>c(),()=>{S(t,c())}),Te(()=>b(),()=>{S(se,b())}),Te(()=>w(),()=>{S(z,w())}),Sa(),Nn();var Ze=Ei(),dt=$(Ze);{var Yn=r=>{var y=wi();D(r,y)};ne(dt,r=>{e(We)&&r(Yn)})}var Dt=g(dt,2),ut=$(Dt);let Qt;var Cn=$(ut,!0);T(ut);var en=g(ut,2),tn=g(en,2);{var Xn=r=>{var y=bi(),N=qe(y),X=g(N,2);Se(()=>N.disabled=e(be)),j("click",N,mt),j("click",X,ct),D(r,y)},nn=r=>{var y=yi();Se(()=>{zn(y,1,La(e(C)?"":"detect-btn-required"),"svelte-14nyow8"),y.disabled=e(be)||!i()||a()}),j("click",y,De),D(r,y)};ne(tn,r=>{E()?r(Xn):r(nn,!1)})}var Et=g(tn,2),jt=g(Et,2),Pe=$(jt),At=$(Pe,!0);T(Pe);var Nt=g(Pe,2),wt=g($(Nt),2);Lt(wt);var Pn=g(wt,2),$n=$(Pn);{var Bn=r=>{var y=$e("Manual");D(r,y)},Vn=r=>{var y=rt(),N=qe(y);{var X=ee=>{var ue=$e("Auto (x2)");D(ee,ue)},J=ee=>{var ue=$e("Auto");D(ee,ue)};ne(N,ee=>{e(t)?ee(X):ee(J,!1)},!0)}D(r,y)};ne($n,r=>{e(x)?r(Bn):r(Vn,!1)})}T(Pn),T(Nt);var Tn=g(Nt,2),d=g($(Tn),2);Se(()=>{e(Ie),Va(()=>{})});var k=$(d);k.value=k.__value=3;var U=g(k);U.value=U.__value=5;var te=g(U);te.value=te.__value=8;var ie=g(te);ie.value=ie.__value=10;var B=g(ie);B.value=B.__value=15;var ce=g(B);ce.value=ce.__value=20;var _e=g(ce);_e.value=_e.__value=24;var Ce=g(_e);Ce.value=Ce.__value=30,T(d),T(Tn),T(jt);var ye=g(jt,2),R=$(ye);Lt(R),Hn(2),T(ye);var W=g(ye,2),H=$(W);Lt(H);var q=g(H,4);{var L=r=>{var y=xi(),N=$(y);T(y),Se(()=>pe(N,`${m()??""} Hz`)),D(r,y)};ne(q,r=>{P()&&r(L)})}T(W);var I=g(W,2),ge=$(I);Lt(ge);var Le=g(ge,4);{var at=r=>{var y=Mi();Lt(y),za(y,h,N=>ua(Bt,N)),D(r,y)};ne(Le,r=>{o()&&r(at)})}T(I),T(Dt);var re=g(Dt,2);{var bt=r=>{var y=ki(),N=g($(y),4),X=g($(N),2),J=$(X),ee=g(J,2),ue=g(ee,2),Oe=g(ue,2),Re=g(Oe,2),Ae=g(Re,2),xe=g(Ae,2),st=g(xe,2);T(X),T(N);var Qe=g(N,2),vt=$(Qe),pt=g($(vt),2),cn=$(pt);T(pt),T(vt);var je=g(vt,2);Lt(je);var qt=g(je,2),Ln=g($(qt),2),ea=$(Ln);{var ta=me=>{var Ne=$e("ðŸ”´ Flicker");D(me,Ne)},na=me=>{var Ne=rt(),un=qe(Ne);{var vn=Me=>{var Ue=$e("ðŸŸ¡ Fusion");D(Me,Ue)},pn=Me=>{var Ue=$e("ðŸŸ¢ Smooth");D(Me,Ue)};ne(un,Me=>{m()<60?Me(vn):Me(pn,!1)},!0)}D(me,Ne)};ne(ea,me=>{m()<40?me(ta):me(na,!1)})}T(Ln),Hn(2),T(qt),T(Qe);var fn=g(Qe,2),dn=$(fn),aa=$(dn);{var is=me=>{var Ne=$e("âš¡ Strong Flicker");D(me,Ne)},rs=me=>{var Ne=rt(),un=qe(Ne);{var vn=Me=>{var Ue=$e("ðŸŽ¯ Critical Threshold");D(Me,Ue)},pn=Me=>{var Ue=rt(),sa=qe(Ue);{var ia=Ye=>{var ht=$e("âœ¨ Near-Fusion");D(Ye,ht)},ra=Ye=>{var ht=rt(),oa=qe(ht);{var la=Xe=>{var Ft=$e("ðŸŽ¬ Cinema (60 Hz)");D(Xe,Ft)},ca=Xe=>{var Ft=$e("ðŸŒŸ Ultra Smooth");D(Xe,Ft)};ne(oa,Xe=>{m()<62?Xe(la):Xe(ca,!1)},!0)}D(Ye,ht)};ne(sa,Ye=>{m()<58?Ye(ia):Ye(ra,!1)},!0)}D(Me,Ue)};ne(un,Me=>{m()<52?Me(vn):Me(pn,!1)},!0)}D(me,Ne)};ne(aa,me=>{m()<48?me(is):me(rs,!1)})}T(dn);var Da=g(dn,2),os=$(Da);{var ls=me=>{var Ne=$e("Noticeable flicker - classic phenakistoscope effect");D(me,Ne)},cs=me=>{var Ne=rt(),un=qe(Ne);{var vn=Me=>{var Ue=$e("Flicker begins to fuse - critical threshold");D(Me,Ue)},pn=Me=>{var Ue=rt(),sa=qe(Ue);{var ia=Ye=>{var ht=$e("Subtle pulsing - artistic sweet spot");D(Ye,ht)},ra=Ye=>{var ht=rt(),oa=qe(ht);{var la=Xe=>{var Ft=$e("Standard cinema/TV rate - minimal flicker");D(Xe,Ft)},ca=Xe=>{var Ft=$e("Above fusion threshold - very smooth");D(Xe,Ft)};ne(oa,Xe=>{m()<62?Xe(la):Xe(ca,!1)},!0)}D(Ye,ht)};ne(sa,Ye=>{m()<58?Ye(ia):Ye(ra,!1)},!0)}D(Me,Ue)};ne(un,Me=>{m()<52?Me(vn):Me(pn,!1)},!0)}D(me,Ne)};ne(os,me=>{m()<48?me(ls):me(cs,!1)})}T(Da),T(fn),T(y),Se(()=>{it(J,`border: 1px solid ${m()===30?"#c92a2a":"#555"}; background: ${m()===30?"#c92a2a":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),it(ee,`border: 1px solid ${m()===42?"#ff6b6b":"#555"}; background: ${m()===42?"#ff6b6b":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),it(ue,`border: 1px solid ${m()===50?"#ffa500":"#555"}; background: ${m()===50?"#ffa500":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),it(Oe,`border: 1px solid ${m()===55?"#4a9eff":"#555"}; background: ${m()===55?"#4a9eff":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),it(Re,`border: 1px solid ${m()===60?"#51cf66":"#555"}; background: ${m()===60?"#51cf66":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),it(Ae,`border: 1px solid ${m()===70?"#845ef7":"#555"}; background: ${m()===70?"#845ef7":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),it(xe,`border: 1px solid ${m()===80?"#20c997":"#555"}; background: ${m()===80?"#20c997":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),it(st,`border: 1px solid ${m()===100?"#12b886":"#555"}; background: ${m()===100?"#12b886":"#333"}; color: white; border-radius: 6px; cursor: pointer;`),pe(cn,`${m()??""} Hz`),Ra(je,m())}),j("click",J,()=>et.set(30)),j("click",ee,()=>et.set(42)),j("click",ue,()=>et.set(50)),j("click",Oe,()=>et.set(55)),j("click",Re,()=>et.set(60)),j("click",Ae,()=>et.set(70)),j("click",xe,()=>et.set(80)),j("click",st,()=>et.set(100)),j("input",je,me=>et.set(+me.target.value)),D(r,y)};ne(re,r=>{P()&&r(bt)})}var In=g(re,2);{var Jn=r=>{var y=Ci(),N=$(y);{var X=xe=>{var st=Si();D(xe,st)};ne(N,xe=>{(e(Pt)||v())&&xe(X)})}var J=g(N,2),ee=$(J),ue=g(ee,2),Oe=$(ue),Re=$(Oe);T(Oe),Hn(2),T(ue);var Ae=g(ue,2);T(J),T(y),Se((xe,st)=>{zn(y,1,`speed-control ${e(Pt)?"dragMode":""} ${e($t)?"dragging":""} ${v()?"mobile":""}`,"svelte-14nyow8"),it(y,xe),pe(Re,`${st??""}Â°/s`)},[()=>(v(),e(G),He(()=>v()?`top: ${e(G).top??Math.round((window.innerHeight-80)/2)}px;`:`left: ${e(G).left??Math.round((window.innerWidth-200)/2)}px; top: ${e(G).top??Math.round((window.innerHeight-80)/2)}px;`)),()=>(u(),He(()=>u().toFixed(0)))]),j("pointerdown",ee,Mt(ke(()=>le("decrease")))),j("pointerup",ee,Mt(ke(Fe))),j("pointerleave",ee,ke(Fe)),j("pointercancel",ee,ke(Fe)),j("touchstart",ee,Mt(ke(function(xe){ot.call(this,s,xe)}))),j("touchend",ee,Mt(ke(function(xe){ot.call(this,s,xe)}))),j("pointerdown",Ae,Mt(ke(()=>le("increase")))),j("pointerup",Ae,Mt(ke(Fe))),j("pointerleave",Ae,ke(Fe)),j("pointercancel",Ae,ke(Fe)),j("touchstart",Ae,Mt(ke(function(xe){ot.call(this,s,xe)}))),j("touchend",Ae,Mt(ke(function(xe){ot.call(this,s,xe)}))),j("pointerdown",y,ft),D(r,y)};ne(In,r=>{l()&&r(Jn)})}var Dn=g(In,2),an=$(Dn),Gt=$(an),En=g($(Gt)),Zn=g(En);{var An=r=>{var y=Pi();D(r,y)},qn=r=>{var y=$i();D(r,y)};ne(Zn,r=>{v()?r(An):r(qn,!1)})}T(Gt);var sn=g(Gt,2),rn=g($(sn),2);Lt(rn);var Kn=g(rn,2);T(sn),T(an);var Ut=g(an,2),Fn=g($(Ut));T(Ut);var yt=g(Ut,2),he=g($(yt));T(yt);var we=g(yt,2),Ke=g($(we));T(we);var Ee=g(we,2),Je=g($(Ee));T(Ee);var xt=g(Ee,2),on=g($(xt));T(xt);var ln=g(xt,2),Qa=g($(ln));T(ln);var Qn=g(ln,2),es=g($(Qn));T(Qn);var Ta=g(Qn,2);{var ts=r=>{var y=Ti(),N=g($(y));T(y),Se(()=>pe(N,` ${h()??""}`)),D(r,y)};ne(Ta,r=>{o()&&r(ts)})}var Ia=g(Ta,2);{var ns=r=>{var y=Ii(),N=g(qe(y),2),X=g($(N));T(N);var J=g(N,2),ee=g($(J));T(J),Se((ue,Oe,Re,Ae)=>{pe(X,` scale=${ue??""}, x=${Oe??""}, y=${Re??""}`),pe(ee,` ${Ae??""}Â°`)},[()=>(f(),He(()=>f().scale.toFixed(2))),()=>(f(),He(()=>Math.round(f().translateX))),()=>(f(),He(()=>Math.round(f().translateY))),()=>(F(),He(()=>(F()*180/Math.PI).toFixed(1)))]),D(r,y)};ne(Ia,r=>{E()&&r(ns)})}var as=g(Ia,2);{var ss=r=>{var y=Di(),N=g($(y));T(y),Se((X,J,ee)=>pe(N,` x=${X??""}, y=${J??""}, r=${ee??""}`),[()=>(e(C),He(()=>Math.round(e(C).x))),()=>(e(C),He(()=>Math.round(e(C).y))),()=>(e(C),He(()=>Math.round(e(C).r)))]),D(r,y)};ne(as,r=>{e(C)&&r(ss)})}T(Dn),T(Ze),Se((r,y,N)=>{Qt=zn(ut,1,La(e(C)&&!a()?"play-highlight":""),"svelte-14nyow8",Qt,{"pause-subtle":a()&&!e(C)}),ut.disabled=!i(),pe(Cn,a()?"Pause":"Play"),Et.disabled=!e(se),Pe.disabled=!e(de)||e(We),pe(At,e(We)?"â³ Exporting...":"ðŸ’¾ Save GIF"),jn(wt,"placeholder",e(t)?`Auto (${e(t)*2})`:"Auto (24)"),Ra(wt,M()),Js(R,e(z)),pe(En,` ${r??""}Â°/s | `),pe(Fn,` ${M()??12??""}`),pe(he,` ${(e(t)||0)??""}`),pe(Ke,` ${y??""}Â°/s`),pe(Je,` ${N??""}Â°/s`),pe(on,` ${_()===-1?"true":"false"}`),pe(Qa,` ${e(z)?"true":"false"}`),pe(es,` ${P()?`Enabled (${m()} Hz)`:"Disabled"}`)},[()=>(u(),He(()=>u().toFixed(0))),()=>(e(se),He(()=>e(se)?e(se).toFixed(0):"â€”")),()=>(u(),He(()=>Math.round(u())))]),j("click",ut,K),j("click",en,nt),j("click",Et,Mn),j("click",Pe,Jt),j("input",wt,r=>zt.set(r.target.value?Number(r.target.value):null)),Ka(d,()=>e(Ie),r=>S(Ie,r)),j("change",R,r=>_a.set(r.target.checked)),Wa(H,P,r=>ua(ya,r)),Wa(ge,o,r=>ua(Xt,r)),za(rn,()=>e(Ct),r=>S(Ct,r)),j("click",Kn,kn),D(n,Ze),xn(),O()}var qi=oe('<span class="current-image svelte-ai08gq" title="Currently loaded image"> </span>'),Fi=oe("<option> </option>"),Li=oe('<div class="selector svelte-ai08gq"><label for="samples" class="svelte-ai08gq">Sample Images:</label> <!> <select id="samples" class="svelte-ai08gq"><option>-- Choose a sample --</option><!></select></div>');function Oi(n,s){yn(s,!1);const a=()=>Y(ja,"$selectedImageName",l),[l,u]=Gn(),i="https://raw.githubusercontent.com/tclaret/phenakistoscope-simulator/main/images",f="https://raw.githubusercontent.com/tclaret/phenaki-lab/main/img",p=[{name:"Colors",file:"colors.png",repo:"new"},{name:"Medium 1990",file:"medium_1990_5036_7181_6_1.png",repo:"new"},{name:"Cats et Donkey",file:"optical-toy-phenakistiscope-disc-avec-cats-et-donkey-ca-1830-2efx315.jpg",repo:"new"},{name:"Dancing Man Animated",file:"Optical_Toy,_Phenakistiscope_Disc_with_Dancing_Man,_ca._1835-Animated.jpg",repo:"new"},{name:"PhÃ©nakistiscope 2",file:"phÃ©nakistiscope2.png",repo:"new"},{name:"Disque Animation 29",file:"phenakistiscope-disque-animation-29.jpg",repo:"new"},{name:"S-L1600 1",file:"s-l1600_1.jpg",repo:"new"},{name:"S-L1600",file:"s-l1600.jpg",repo:"new"},{name:"Hash 045377",file:"045377654e8832d31b850c8c4b7f948b.png",repo:"new"},{name:"Hash 062901",file:"062901e866b6aca4078ae7ff0be74c24.png",repo:"new"},{name:"Hash 0a23fe",file:"0a23fe78862b095518e46a3472238510.png",repo:"new"},{name:"Hash 14ea08",file:"14ea08f701861d967d455220ea8ca7ed.jpg",repo:"new"},{name:"Hash 1928bd",file:"1928bda6cad5fd3cd27d13ce70a502dc.jpg",repo:"new"},{name:"Hash 2d003d",file:"2d003d9b4e81a933bbfbdd55c8b1e261.png",repo:"new"},{name:"Hash 2e4cd2",file:"2e4cd248fbe57af9798c7e3c1c23b58c.jpg",repo:"new"},{name:"Hash 40bd2a",file:"40bd2aead0fc9a6e77d23871555a2998.png",repo:"new"},{name:"Hash 43efde",file:"43efdef999a2fa3200506f97d9e1ef10.png",repo:"new"},{name:"Hash 494697",file:"49469753b75adf62fe324641a2869c53.png",repo:"new"},{name:"Hash 4ca70e",file:"4ca70ec79b59935fb0eed9992045e4fb.jpg",repo:"new"},{name:"Hash 4e6b0c",file:"4e6b0c0e4fde0ad2ad8f4797304b037b.jpg",repo:"new"},{name:"Hash 4f3ab9",file:"4f3ab9e63d43062d25dfc6e4108635fb.png",repo:"new"},{name:"Hash 686b5e",file:"686b5e679b990dd996d0a4a3fb943d2d.png",repo:"new"},{name:"Hash 6f5755",file:"6f57558627d849a8d2b3f9a430bacba2.jpg",repo:"new"},{name:"Hash 75fd29",file:"75fd29a0318c3cf0fdaf8a41d1406cf2.png",repo:"new"},{name:"Hash 8efd4b",file:"8efd4b2b51765d9efdde621251b08968.jpg",repo:"new"},{name:"Hash 90cbee",file:"90cbeedafdef22534d24d04bc44b518f.jpg",repo:"new"},{name:"Hash 954abf",file:"954abf22a1f89759204818d3c0592234.png",repo:"new"},{name:"Hash 9799d6",file:"9799d6d1766b1add766629adec031867.png",repo:"new"},{name:"Hash a0767f",file:"a0767fc0712f1a9eeac238e72b6b2721.png",repo:"new"},{name:"Hash b18a11",file:"b18a11d1a8355081b70a3d91347236b1.jpg",repo:"new"},{name:"Hash bf2932",file:"bf29325ee951619c061902200c8e1143.png",repo:"new"},{name:"Hash e1de4a",file:"e1de4a32cb1bafa33166d51bf8ae2f35.png",repo:"new"},{name:"Hash e59f95",file:"e59f952d6ef4e9c391ea10e143e55b23.png",repo:"new"},{name:"Hash e6582e",file:"e6582e848b0aca99c134d23365c08fdb.png",repo:"new"},{name:"Hash ebd3d3",file:"ebd3d33285d243f86e54df78b9cc69ac.png",repo:"new"},{name:"Woman Chopping Tree",file:"WomanChoppingTree.jpg",repo:"old"},{name:"Dancing",file:"Dancing.jpg",repo:"old"},{name:"Jongleur",file:"Jongleur.png",repo:"old"},{name:"a_cheval",file:"a_cheval.png",repo:"old"},{name:"McLean_1",file:"McLean_1.png",repo:"old"},{name:"Gernamy_1949",file:"Gernamy_1949_R_Balzer.png",repo:"old"},{name:"AEO175939",file:"AEO175939_PhenakistoscopeGiroux60.jpg",repo:"old"},{name:"AEO185553",file:"AEO185553_PhenakistiscopeDisc_ManInBlueAndRed.jpg",repo:"old"},{name:"medium_1990_5036_3369",file:"medium_1990_5036_3369.jpg",repo:"old"},{name:"medium_a001813b",file:"medium_a001813b.jpg",repo:"old"},{name:"tumblr_obd6fh",file:"tumblr_obd6fhGFSZ1r9jbwno1_500.png",repo:"old"},{name:"tumblr_oc1cz",file:"tumblr_oc1czn99ZM1r9jbwno1_500.png",repo:"old"},{name:"Phantasmascope Faces",file:"Phantasmascope_faces.png",repo:"old"},{name:"722a6790240569.5e126845d9b56",file:"722a6790240569.5e126845d9b56.png",repo:"old"},{name:"Fantascope Disc 1833",file:"fantascope-disc-1833.png",repo:"old"},{name:"Face",file:"a_face__.jpg",repo:"new"},{name:"Culbute",file:"culbute.jpg",repo:"new"},{name:"Grenouille",file:"Grenouille__.jpg",repo:"new"},{name:"Oh Soccer",file:"oh_soccer.jpg",repo:"new"},{name:"Un Grand Un Petit",file:"un_grand_un_petit.jpg",repo:"new"},{name:"Autre Culbutte",file:"autre_culbutte.jpg",repo:"new"},{name:"Dancing 2",file:"dancing_.jpg",repo:"new"},{name:"Il Pompe de l'eau",file:"il_pompe_de_leau.jpg",repo:"new"},{name:"Porceline",file:"porceline.jpg",repo:"new"},{name:"Volants",file:"volants_.png",repo:"new"},{name:"Ce Qui",file:"ce_qui.jpg",repo:"new"},{name:"Des Anges",file:"des_anges.jpg",repo:"new"},{name:"Moulin",file:"moulin_.jpg",repo:"new"},{name:"Rats",file:"rats__.jpg",repo:"new"},{name:"Corde Ã  Danser",file:"corde_a_denser_.jpg",repo:"new"},{name:"Ecureuil",file:"ecureuil.jpg",repo:"new"},{name:"Noel Noel",file:"noel_noel.jpg",repo:"new"},{name:"Tirreur",file:"tirreur_.jpg",repo:"new"},{name:"C Pastel",file:"c_pastel.jpg",repo:"new"},{name:"GÃ©omÃ©trique",file:"geometrique.jpg",repo:"new"},{name:"Nuages en Scie",file:"nuages_en_scie.jpg",repo:"new"},{name:"Tons Pastels",file:"tons_pastels.jpg",repo:"new"},{name:"Des Ouiseaux",file:"DesOuaisaux.png",repo:"new"},{name:"Feels Like Flying",file:"feels_like_flying.png",repo:"new"},{name:"Gros Meusieur",file:"GrosMeusieur.png",repo:"new"},{name:"Jongle avec les Otaries",file:"Jongle_avec_les_otaries.png",repo:"new"},{name:"CinÃ©mathÃ¨que 1",file:"cinemateque_francaise_1.png",repo:"new"},{name:"CinÃ©mathÃ¨que 2",file:"cinemateque_francaise_2.png",repo:"new"},{name:"CinÃ©mathÃ¨que 3",file:"cinemateque_francaise_3.png",repo:"new"},{name:"CinÃ©mathÃ¨que 4",file:"cinemateque_francaise_4.png",repo:"new"},{name:"CinÃ©mathÃ¨que 5",file:"cinemateque_francaise_5.png",repo:"new"},{name:"CinÃ©mathÃ¨que 6",file:"cinemateque_francaise_6.png",repo:"new"},{name:"CinÃ©mathÃ¨que 7",file:"cinemateque_francaise_7.png",repo:"new"},{name:"CinÃ©mathÃ¨que 8",file:"cinemateque_francaise_8.png",repo:"new"},{name:"CinÃ©mathÃ¨que 9",file:"cinemateque_francaise_9.png",repo:"new"},{name:"CinÃ©mathÃ¨que 10",file:"cinemateque_francaise_10.png",repo:"new"},{name:"CinÃ©mathÃ¨que 11",file:"cinemateque_francaise_11.png",repo:"new"},{name:"CinÃ©mathÃ¨que 12",file:"cinemateque_francaise_12.png",repo:"new"},{name:"CinÃ©mathÃ¨que 13",file:"cinemateque_francaise_13.png",repo:"new"},{name:"CinÃ©mathÃ¨que 14",file:"cinemateque_francaise_14.png",repo:"new"},{name:"CinÃ©mathÃ¨que 15",file:"cinemateque_francaise_15.png",repo:"new"},{name:"CinÃ©mathÃ¨que 16",file:"cinemateque_francaise_16.png",repo:"new"},{name:"CinÃ©mathÃ¨que 17",file:"cinemateque_francaise_17.png",repo:"new"},{name:"CinÃ©mathÃ¨que 18",file:"cinemateque_francaise_18.png",repo:"new"},{name:"CinÃ©mathÃ¨que 19",file:"cinemateque_francaise_19.png",repo:"new"},{name:"CinÃ©mathÃ¨que 20",file:"cinemateque_francaise_20.png",repo:"new"},{name:"CinÃ©mathÃ¨que 21",file:"cinemateque_francaise_21.png",repo:"new"},{name:"CinÃ©mathÃ¨que 22",file:"cinemateque_francaise_22.png",repo:"new"},{name:"CinÃ©mathÃ¨que 23",file:"cinemateque_francaise_23.png",repo:"new"},{name:"CinÃ©mathÃ¨que 24",file:"cinemateque_francaise_24.png",repo:"new"},{name:"CinÃ©mathÃ¨que 25",file:"cinemateque_francaise_25.png",repo:"new"},{name:"CinÃ©mathÃ¨que 26",file:"cinemateque_francaise_26.png",repo:"new"},{name:"CinÃ©mathÃ¨que 27",file:"cinemateque_francaise_27.png",repo:"new"},{name:"CinÃ©mathÃ¨que 28",file:"cinemateque_francaise_28.png",repo:"new"},{name:"CinÃ©mathÃ¨que 29",file:"cinemateque_francaise_29.png",repo:"new"},{name:"CinÃ©mathÃ¨que 30",file:"cinemateque_francaise_30.png",repo:"new"},{name:"CinÃ©mathÃ¨que 31",file:"cinemateque_francaise_31.png",repo:"new"},{name:"CinÃ©mathÃ¨que 32",file:"cinemateque_francaise_32.png",repo:"new"},{name:"CinÃ©mathÃ¨que 33",file:"cinemateque_francaise_33.png",repo:"new"},{name:"CinÃ©mathÃ¨que 34",file:"cinemateque_francaise_34.png",repo:"new"},{name:"Phenakistoscope 3g07692a",file:"Phenakistoscope_3g07692a.jpg",repo:"new"},{name:"Phenakistoscope 3g07692u",file:"Phenakistoscope_3g07692u.jpg",repo:"new"},{name:"Lebensrad 01",file:"Lebensrad01.jpg",repo:"new"},{name:"Dance Dance",file:"Dance_dance.png",repo:"new"},{name:"Download",file:"download.png",repo:"new"},{name:"Serpent",file:"serpent.png",repo:"new"},{name:"Zoopraxiscope 0",file:"zoopraxiscope-0.png",repo:"new"},{name:"S-L1600 PNG",file:"s-l1600.png",repo:"new"},{name:"1200px Cats and Donkey",file:"1200px-Optical_Toy,_Phenakistiscope_Disc_with_Cats_and_Donkey,_ca._1830_(CH_18607981).jpg",repo:"new"},{name:"Photographic Pastimes",file:"Photographic_pastimes_-_a_series_of_interesting_experiments_for_amateurs_for_obtaining_novel_and_curious_effects_with_the_aid_of_the_camera_(1891)_(14766082535).jpg",repo:"new"},{name:"IL 1588 2019925483",file:"il_1588xN.2019925483_gcfc.jpg",repo:"new"},{name:"IL 1588 7127245108",file:"il_1588xN.7127245108_4tnw.png",repo:"new"},{name:"IL 1588 7287092618",file:"il_1588xN.7287092618_bs1i.png",repo:"new"}];let M=ae("");function v(o){const _=`${o.repo==="new"?f:i}/${o.file}`;wn.set(null),bn.set(0),Un.set([]),Ht.set(!1),kt.set(!1),St.set(0),_n.set("move-center"),lt.set(0),mn.set(1),zt.set(null),Ot.set(!1),Xt.set(!1),Bt.set("#000000"),Vt.set(_),$a.set(_),Rt.set(!1),ja.set(o.name),S(M,o.file)}Ca(()=>{let o=!1;if(Vt.subscribe(_=>{_&&(o=!0)})(),!o){const _=p[Math.floor(Math.random()*p.length)];_&&v(_)}}),Nn();var c=Li(),b=g($(c),2);{var w=o=>{var h=qi(),_=$(h);T(h),Se(()=>pe(_,`ðŸ“· ${a()??""}`)),D(o,h)};ne(b,o=>{a()&&o(w)})}var E=g(b,2);Se(()=>{e(M),Va(()=>{})});var P=$(E);P.value=P.__value="";var m=g(P);Ws(m,1,()=>p,o=>o.file,(o,h)=>{var _=Fi(),F=$(_,!0);T(_);var A={};Se(()=>{pe(F,e(h).name),A!==(A=e(h).file)&&(_.value=(_.__value=e(h).file)??"")}),D(o,_)}),T(E),T(c),Ka(E,()=>e(M),o=>S(M,o)),j("change",E,o=>{const h=o.target.selectedIndex-1;h>=0&&v(p[h])}),D(n,c),xn(),u()}var Ri=oe('<div class="container svelte-1uha8ag"><h1 class="svelte-1uha8ag">Phenakistoscope Lab</h1> <p class="sub svelte-1uha8ag">Convert old phenakistoscope discs into animated GIFs</p> <div class="wiki-link svelte-1uha8ag"><a href="https://en.wikipedia.org/wiki/Phenakistiscope" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">â„¹ï¸ Learn about Phenakistoscopes</a></div> <div class="intro svelte-1uha8ag"><p class="svelte-1uha8ag">To create an animated GIF from a phenakistoscope image, select the correct number of frames according to the image, adjust the rotation speed, and then save it as a fast, slow, or normal animated GIF depending on your settings.</p></div> <!> <!> <!> <!> <!></div>');function Yi(n){var s=Ri(),a=g($(s),8);Qs(a,{});var l=g(a,2);Oi(l,{});var u=g(l,2);ti(u,{});var i=g(u,2);fi(i,{});var f=g(i,2);Ai(f,{}),T(s),D(n,s)}export{Yi as component};
