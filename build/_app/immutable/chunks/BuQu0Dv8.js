import{x as _,y as k,z as o,A as m,B as b,C as p,v as d,D as T,E as S,F as A,G as E,w,H as M,I as N,J as D,K as F,L as R,M as v,N as x,O as B,b as O,P as C,S as I,Q as L,R as U,n as g,T as H,g as P,U as Y}from"./zw_chER5.js";import{s as q,g as z}from"./BQFw1Q7y.js";class G{anchor;#s=new Map;#t=new Map;#e=new Map;#r=new Set;#a=!0;constructor(s,a=!0){this.anchor=s,this.#a=a}#i=()=>{var s=_;if(this.#s.has(s)){var a=this.#s.get(s),e=this.#t.get(a);if(e)k(e),this.#r.delete(a);else{var i=this.#e.get(a);i&&(this.#t.set(a,i.effect),this.#e.delete(a),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),e=i.effect)}for(const[t,n]of this.#s){if(this.#s.delete(t),t===s)break;const f=this.#e.get(n);f&&(o(f.effect),this.#e.delete(n))}for(const[t,n]of this.#t){if(t===a||this.#r.has(t))continue;const f=()=>{if(Array.from(this.#s.values()).includes(t)){var u=document.createDocumentFragment();S(n,u),u.append(b()),this.#e.set(t,{effect:n,fragment:u})}else o(n);this.#r.delete(t),this.#t.delete(t)};this.#a||!e?(this.#r.add(t),m(n,f,!1)):f()}}};#n=s=>{this.#s.delete(s);const a=Array.from(this.#s.values());for(const[e,i]of this.#e)a.includes(e)||(o(i.effect),this.#e.delete(e))};ensure(s,a){var e=_,i=A();if(a&&!this.#t.has(s)&&!this.#e.has(s))if(i){var t=document.createDocumentFragment(),n=b();t.append(n),this.#e.set(s,{effect:p(()=>a(n)),fragment:t})}else this.#t.set(s,p(()=>a(this.anchor)));if(this.#s.set(e,s),i){for(const[f,c]of this.#t)f===s?e.skipped_effects.delete(c):e.skipped_effects.add(c);for(const[f,c]of this.#e)f===s?e.skipped_effects.delete(c.effect):e.skipped_effects.add(c.effect);e.oncommit(this.#i),e.ondiscard(this.#n)}else d&&(this.anchor=T),this.#i()}}function Q(r,s,a=!1){d&&w();var e=new G(r),i=a?M:0;function t(n,f){if(d){const u=N(r)===D;if(n===u){var c=F();R(c),e.anchor=c,v(!1),e.ensure(n,f),v(!0);return}}e.ensure(n,f)}E(()=>{var n=!1;s((f,c=!0)=>{n=!0,t(c,f)}),n||t(!1,null)},i)}function y(r,s){return r===s||r?.[I]===s}function $(r={},s,a,e){return x(()=>{var i,t;return B(()=>{i=t,t=[],O(()=>{r!==a(...t)&&(s(r,...t),i&&y(a(...i),r)&&s(null,...i))})}),()=>{C(()=>{t&&y(a(...t),r)&&s(null,...t)})}}),r}let h=!1,l=Symbol();function j(r,s,a){const e=a[s]??={store:null,source:H(void 0),unsubscribe:g};if(e.store!==r&&!(l in a))if(e.unsubscribe(),e.store=r??null,r==null)e.source.v=void 0,e.unsubscribe=g;else{var i=!0;e.unsubscribe=q(r,t=>{i?e.source.v=t:Y(e.source,t)}),i=!1}return r&&l in a?z(r):P(e.source)}function V(){const r={};function s(){L(()=>{for(var a in r)r[a].unsubscribe();U(r,l,{enumerable:!1,value:!0})})}return[r,s]}function W(r){var s=h;try{return h=!1,[r(),h]}finally{h=s}}export{G as B,j as a,$ as b,W as c,Q as i,V as s};
