import{f as pe,a as D,c as pt,t as _e}from"../chunks/DidSmI2s.js";import"../chunks/BfDn8e9k.js";import{G as Xa,v as He,w as Ba,g as t,av as Va,I as Ja,J as Ka,K as ya,L as xa,M as ea,D as En,a3 as Za,aq as Qa,aa as ei,x as ht,C as oa,B as Da,F as ti,Q as ie,a1 as Ma,ao as Fa,aI as ha,aJ as ni,y as La,A as ai,aK as ii,aL as si,aM as ta,ak as ri,aN as oi,aO as li,an as ci,z as fi,aP as va,N as di,R as ui,aQ as pi,aR as hi,aS as qa,aT as vi,aU as gi,aV as mi,P as bi,aW as wi,aX as _i,b as Qe,O as Oa,aG as yi,p as mn,j as bn,s as y,k as F,l as L,aY as Ie,aZ as ga,i as Ke,U as P,t as Te,a_ as de,ab as Dn,a$ as Ra}from"../chunks/CkcJ_p-v.js";import{e as N,s as ze}from"../chunks/EstrOUTn.js";import{i as qn}from"../chunks/BeJGQpUk.js";import{w as fe,o as ma,a as xi,g as Nt}from"../chunks/BzLubvRb.js";import{i as le,s as On,a as j,b as ka,d as na}from"../chunks/CgM4jgzu.js";function Mi(n,i,a){for(var l=[],p=i.length,s=0;s<p;s++)oi(i[s].e,l,!0);li(l,()=>{var f=l.length===0&&a!==null;if(f){var v=a,x=v.parentNode;ci(x),x.append(v),n.items.clear(),Ze(n,i[0].prev,i[p-1].next)}for(var g=0;g<p;g++){var c=i[g];f||(n.items.delete(c.k),Ze(n,c.prev,c.next)),fi(c.e,!f)}n.first===i[0]&&(n.first=i[0].prev)})}function ki(n,i,a,l,p,s=null){var f=n,v=new Map,x=null;He&&Ba();var g=null,c=Va(()=>{var r=a();return ha(r)?r:r==null?[]:Fa(r)}),w,b=!0;function k(){Si(m,w,f,i,l),g!==null&&(w.length===0?(g.fragment?(f.before(g.fragment),g.fragment=null):La(g.effect),S.first=g.effect):ai(g.effect,()=>{g=null}))}var S=Xa(()=>{w=t(c);var r=w.length;let h=!1;if(He){var u=Ja(f)===Ka;u!==(r===0)&&(f=ya(),xa(f),ea(!1),h=!0)}for(var E=new Set,R=ht,T=null,G=ti(),_=0;_<r;_+=1){He&&En.nodeType===Za&&En.data===Qa&&(f=En,h=!0,ea(!1));var $=w[_],e=l($,_),ee=b?null:v.get(e);ee?(ei(ee.v,$),ee.i=_,G&&R.skipped_effects.delete(ee.e)):(ee=Ci(b?f:null,T,$,e,_,p,i,a),b&&(ee.o=!0,T===null?x=ee:T.next=ee,T=ee),v.set(e,ee)),E.add(e)}if(r===0&&s&&!g)if(b)g={fragment:null,effect:oa(()=>s(f))};else{var z=document.createDocumentFragment(),ye=Da();z.append(ye),g={fragment:z,effect:oa(()=>s(ye))}}if(He&&r>0&&xa(ya()),!b)if(G){for(const[W,Y]of v)E.has(W)||R.skipped_effects.add(Y.e);R.oncommit(k),R.ondiscard(()=>{})}else k();h&&ea(!0),t(c)}),m={effect:S,items:v,first:x};b=!1,He&&(f=En)}function Si(n,i,a,l,p){var s=i.length,f=n.items,v=n.first,x,g=null,c=[],w=[],b,k,S,m;for(m=0;m<s;m+=1){if(b=i[m],k=p(b,m),S=f.get(k),n.first??=S,!S.o){S.o=!0;var r=g?g.next:v;Ze(n,g,S),Ze(n,S,r),aa(S,r,a),g=S,c=[],w=[],v=g.next;continue}if((S.e.f&ta)!==0&&La(S.e),S!==v){if(x!==void 0&&x.has(S)){if(c.length<w.length){var h=w[0],u;g=h.prev;var E=c[0],R=c[c.length-1];for(u=0;u<c.length;u+=1)aa(c[u],h,a);for(u=0;u<w.length;u+=1)x.delete(w[u]);Ze(n,E.prev,R.next),Ze(n,g,E),Ze(n,R,h),v=h,g=R,m-=1,c=[],w=[]}else x.delete(S),aa(S,v,a),Ze(n,S.prev,S.next),Ze(n,S,g===null?n.first:g.next),Ze(n,g,S),g=S;continue}for(c=[],w=[];v!==null&&v.k!==k;)(v.e.f&ta)===0&&(x??=new Set).add(v),w.push(v),v=v.next;if(v===null)continue;S=v}c.push(S),g=S,v=S.next}let T=f.size>s;if(v!==null||x!==void 0){for(var G=x===void 0?[]:Fa(x);v!==null;)(v.e.f&ta)===0&&G.push(v),v=v.next;var _=G.length;if(T=f.size-_>s,_>0){var $=null;Mi(n,G,$)}}if(T)for(const e of f.values())e.o||(Ze(n,g,e),g=e);n.effect.last=g&&g.e}function Ci(n,i,a,l,p,s,f,v){var x=(f&ii)!==0,g=(f&si)===0,c=x?g?ie(a,!1,!1):Ma(a):a,w=(f&ni)===0?p:Ma(p),b={i:w,v:c,k:l,a:null,e:null,o:!1,prev:i,next:null};try{if(n===null){var k=document.createDocumentFragment();k.append(n=Da())}return b.e=oa(()=>s(n,c,w,v)),i!==null&&(i.next=b),b}finally{}}function aa(n,i,a){for(var l=n.next?n.next.e.nodes_start:a,p=i?i.e.nodes_start:a,s=n.e.nodes_start;s!==null&&s!==l;){var f=ri(s);p.before(s),s=f}}function Ze(n,i,a){i===null?(n.first=a,n.effect.first=a&&a.e):(i.e.next&&(i.e.next.prev=null),i.next=a,i.e.next=a&&a.e),a!==null&&(a.e.prev&&(a.e.prev.next=null),a.prev=i,a.e.prev=i&&i.e)}function za(n){var i,a,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var p=n.length;for(i=0;i<p;i++)n[i]&&(a=za(n[i]))&&(l&&(l+=" "),l+=a)}else for(a in n)n[a]&&(l&&(l+=" "),l+=a);return l}function Pi(){for(var n,i,a=0,l="",p=arguments.length;a<p;a++)(n=arguments[a])&&(i=za(n))&&(l&&(l+=" "),l+=i);return l}function Sa(n){return typeof n=="object"?Pi(n):n??""}const Ca=[...` 	
\r\fÂ \v\uFEFF`];function $i(n,i,a){var l=n==null?"":""+n;if(i&&(l=l?l+" "+i:i),a){for(var p in a)if(a[p])l=l?l+" "+p:p;else if(l.length)for(var s=p.length,f=0;(f=l.indexOf(p,f))>=0;){var v=f+s;(f===0||Ca.includes(l[f-1]))&&(v===l.length||Ca.includes(l[v]))?l=(f===0?"":l.substring(0,f))+l.substring(v+1):f=v}}return l===""?null:l}function Ii(n,i){return n==null?null:String(n)}function Fn(n,i,a,l,p,s){var f=n.__className;if(He||f!==a||f===void 0){var v=$i(a,l,s);(!He||v!==n.getAttribute("class"))&&(v==null?n.removeAttribute("class"):n.className=v),n.__className=a}else if(s&&p!==s)for(var x in s){var g=!!s[x];(p==null||g!==!!p[x])&&n.classList.toggle(x,g)}return s}function ot(n,i,a,l){var p=n.__style;if(He||p!==i){var s=Ii(i);(!He||s!==n.getAttribute("style"))&&(s==null?n.removeAttribute("style"):n.style.cssText=s),n.__style=i}return l}function Ha(n,i,a=!1){if(n.multiple){if(i==null)return;if(!ha(i))return pi();for(var l of n.options)l.selected=i.includes(un(l));return}for(l of n.options){var p=un(l);if(hi(p,i)){l.selected=!0;return}}(!a||i!==void 0)&&(n.selectedIndex=-1)}function Ti(n){var i=new MutationObserver(()=>{Ha(n,n.__value)});i.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ui(()=>{i.disconnect()})}function Wa(n,i,a=i){var l=new WeakSet,p=!0;va(n,"change",s=>{var f=s?"[selected]":":checked",v;if(n.multiple)v=[].map.call(n.querySelectorAll(f),un);else{var x=n.querySelector(f)??n.querySelector("option:not([disabled])");v=x&&un(x)}a(v),ht!==null&&l.add(ht)}),di(()=>{var s=i();if(n===document.activeElement){var f=qa??ht;if(l.has(f))return}if(Ha(n,s,p),p&&s===void 0){var v=n.querySelector(":checked");v!==null&&(s=un(v),a(s))}n.__value=s,p=!1}),Ti(n)}function un(n){return"__value"in n?n.__value:n.value}const Ei=Symbol("is custom element"),Ai=Symbol("is html");function Pt(n){if(He){var i=!1,a=()=>{if(!i){if(i=!0,n.hasAttribute("value")){var l=n.value;Ln(n,"value",null),n.value=l}if(n.hasAttribute("checked")){var p=n.checked;Ln(n,"checked",null),n.checked=p}}};n.__on_r=a,bi(a),wi()}}function Pa(n,i){var a=ba(n);a.value===(a.value=i??void 0)||n.value===i&&(i!==0||n.nodeName!=="PROGRESS")||(n.value=i??"")}function Di(n,i){var a=ba(n);a.checked!==(a.checked=i??void 0)&&(n.checked=i)}function Ln(n,i,a,l){var p=ba(n);He&&(p[i]=n.getAttribute(i),i==="src"||i==="srcset"||i==="href"&&n.nodeName==="LINK")||p[i]!==(p[i]=a)&&(i==="loading"&&(n[_i]=a),a==null?n.removeAttribute(i):typeof a!="string"&&Fi(n).includes(i)?n[i]=a:n.setAttribute(i,a))}function ba(n){return n.__attributes??={[Ei]:n.nodeName.includes("-"),[Ai]:n.namespaceURI===vi}}var $a=new Map;function Fi(n){var i=n.getAttribute("is")||n.nodeName,a=$a.get(i);if(a)return a;$a.set(i,a=[]);for(var l,p=n,s=Element.prototype;s!==p;){l=mi(p);for(var f in l)l[f].set&&a.push(f);p=gi(p)}return a}function Ia(n,i,a=i){var l=new WeakSet;va(n,"input",async p=>{var s=p?n.defaultValue:n.value;if(s=ia(n)?sa(s):s,a(s),ht!==null&&l.add(ht),await yi(),s!==(s=i())){var f=n.selectionStart,v=n.selectionEnd,x=n.value.length;if(n.value=s??"",v!==null){var g=n.value.length;f===v&&v===x&&g>x?(n.selectionStart=g,n.selectionEnd=g):(n.selectionStart=f,n.selectionEnd=Math.min(v,g))}}}),(He&&n.defaultValue!==n.value||Qe(i)==null&&n.value)&&(a(ia(n)?sa(n.value):n.value),ht!==null&&l.add(ht)),Oa(()=>{var p=i();if(n===document.activeElement){var s=qa??ht;if(l.has(s))return}ia(n)&&p===sa(n.value)||n.type==="date"&&!p&&!n.value||p!==n.value&&(n.value=p??"")})}function Ta(n,i,a=i){va(n,"change",l=>{var p=l?n.defaultChecked:n.checked;a(p)}),(He&&n.defaultChecked!==n.checked||Qe(i)==null)&&a(n.checked),Oa(()=>{var l=i();n.checked=!!l})}function ia(n){var i=n.type;return i==="number"||i==="range"}function sa(n){return n===""?null:+n}function Se(n){return function(...i){var a=i[0];return a.stopPropagation(),n?.apply(this,i)}}function jt(n,i){var a=n.$$events?.[i.type],l=ha(a)?a.slice():a==null?[]:[a];for(var p of l)p.call(this,i)}const wa=fe(null),Yt=fe(null),Ea=fe(null),Tt=fe(!1),lt=fe(0),la=fe(1),$t=fe(!1),vn=fe(null),gn=fe(0),pn=fe(1),Rn=fe([]),ca=fe(!1),wt=fe(!1),Et=fe(!1),fa=fe({translateX:0,translateY:0,scale:1}),dn=fe({active:!1,progress:0,startTime:0}),da=fe(null),ua=fe(!1),Je=fe(50),pa=fe(!1),At=fe(null),It=fe(0),hn=fe("move-center"),Gt=fe(!1),Ut=fe("#000000");var Li=pe('<label>Choose image: <input type="file" accept="image/*"/></label>');function qi(n,i){mn(i,!1);function a(s){const f=s.target.files[0];if(!f)return;const v=URL.createObjectURL(f);vn.set(null),gn.set(0),Rn.set([]),Et.set(!1),wt.set(!1),It.set(0),hn.set("move-center"),lt.set(0),pn.set(1),At.set(null),$t.set(!1),Gt.set(!1),Ut.set("#000000"),wa.set(v),Yt.set(v),Tt.set(!1)}qn();var l=Li(),p=y(F(l));L(l),N("change",p,a),D(n,l),bn()}var Oi=pe('<div class="preview svelte-1th6cal"><img alt="Selected disc preview" class="svelte-1th6cal"/></div>');function Ri(n,i){mn(i,!1);const a=()=>j(wa,"$previewUrl",l),[l,p]=On(),s=ie();Ie(()=>a(),()=>{P(s,a())}),ga();var f=pt(),v=Ke(f);{var x=g=>{var c=Oi(),w=F(c);L(c),Te(()=>Ln(w,"src",t(s))),D(g,c)};le(v,g=>{t(s)&&g(x)})}D(n,f),bn(),p()}var zi=pe('<div class="speed-hud svelte-byh4af"> </div>'),Hi=pe('<div class="crosshair-overlay svelte-byh4af"><div class="crosshair-vertical svelte-byh4af"></div> <div class="crosshair-horizontal svelte-byh4af"></div> <div class="crosshair-center-dot svelte-byh4af"></div> <div class="crosshair-circle svelte-byh4af"></div></div>'),Wi=pe('<div class="edit-mode-indicator svelte-byh4af"><!></div> <!> <div class="frame-counter svelte-byh4af"><div class="frame-info svelte-byh4af"><div style="font-size: 0.7em; color: #aaa; margin-bottom: 4px; text-align: center;" class="svelte-byh4af">How many scenes on the disc?</div> <div style="font-size: 0.65em; color: #888; text-align: center; margin-bottom: 8px;" class="svelte-byh4af">Set frame count = number of animation scenes</div></div> <div style="display: flex; align-items: center; gap: 8px;" class="svelte-byh4af"><button class="frame-btn svelte-byh4af" title="Decrease frame count">âˆ’</button> <div class="frame-display svelte-byh4af"><div class="frame-number svelte-byh4af"> </div> <div class="frame-label svelte-byh4af">frames</div></div> <button class="frame-btn svelte-byh4af" title="Increase frame count">+</button></div></div>',1),Ni=pe('<div><canvas class="svelte-byh4af"></canvas> <!> <!></div>');function ji(n,i){mn(i,!1);const a=()=>j(wt,"$editMode",T),l=()=>j(Tt,"$isPlaying",T),p=()=>j(Yt,"$imageUrl",T),s=()=>j(At,"$gifFrameCount",T),f=()=>j(pa,"$isMobile",T),v=()=>j(lt,"$rotationSpeed",T),x=()=>j(hn,"$editModeInteraction",T),g=()=>j(It,"$sliceRotationAngle",T),c=()=>j(dn,"$detectionAnimation",T),w=()=>j(la,"$rotationDirection",T),b=()=>j(Gt,"$fillOuterCircle",T),k=()=>j(vn,"$detectedCircle",T),S=()=>j(Ut,"$outerCircleFillColor",T),m=()=>j(ca,"$overlayVisible",T),r=()=>j(gn,"$detectedCount",T),h=()=>j(Rn,"$detectedPositions",T),u=()=>j(Et,"$confirmedDetection",T),E=()=>j(ua,"$flickerEnabled",T),R=()=>j(Je,"$flickerFrequency",T),[T,G]=On();let _=ie(),$=ie(),e,ee=0,z=ie(1);const ye=1,W=4;let Y=ie(0),J=ie(0);const re=new Map;let Ye=1,Fe=0,Xe=0,et=0,xe=ie(),vt=1,_t=0,ct=ie(0),gt=0,tt=1,nt=ie(!1),We,K=0,yt=0,xt=0,Dt=0,Ft=0,Mt=ie(null),Xt=ie(null),kt=!1,wn=0,Bt=0,U=ie(null),at=ie(!1),it;function _n(d){P(at,!1),P(U,new Image),de(U,t(U).crossOrigin="anonymous"),de(U,t(U).onload=()=>{console.log("Image loaded:",d,"Size:",t(U).width,"x",t(U).height),P(at,!0),Vt(),Me()}),de(U,t(U).onerror=C=>{console.error("Erreur chargement:",d,C),P(at,!1)}),de(U,t(U).src=d)}function Vt(){if(!t($)||!t(_))return;const d=t(_).getBoundingClientRect(),C=window.devicePixelRatio||1;if(t(U)&&t(U).width&&t(U).height){const X=t(U).width,te=t(U).height,oe=Math.min(1400,Math.max(150,Math.round(d.width*Math.sqrt(X*X+te*te)/X)));de(_,t(_).style.height=oe+"px");const B=t(_).getBoundingClientRect();de($,t($).style.width=B.width+"px"),de($,t($).style.height=B.height+"px"),de($,t($).width=Math.round(B.width*C)),de($,t($).height=Math.round(B.height*C))}else de($,t($).style.width=d.width+"px"),de($,t($).style.height=d.height+"px"),de($,t($).width=Math.round(d.width*C)),de($,t($).height=Math.round(d.height*C));e&&e.setTransform(C,0,0,C,0,0),Me()}ma(()=>{const d=()=>{const X="ontouchstart"in window||navigator.maxTouchPoints>0||window.innerWidth<768;pa.set(X)};if(d(),window.addEventListener("resize",d),t($)){if(da.set(t($)),e=t($).getContext("2d"),t(_)){const C=()=>{f()?t(z)>1||a()?de(_,t(_).style.touchAction="none"):de(_,t(_).style.touchAction="pan-y"):de(_,t(_).style.touchAction="none")};C(),fa.subscribe(C),wt.subscribe(C)}t(_)&&t(_).addEventListener("wheel",Kt,{passive:!1}),Vt(),it=new ResizeObserver(()=>Vt()),t(_)&&it.observe(t(_)),t(_)&&(t(_).addEventListener("pointerdown",Lt),t(_).addEventListener("pointermove",ft),t(_).addEventListener("pointerup",Jt),t(_).addEventListener("pointerleave",yn))}return()=>{it&&it.disconnect(),window.removeEventListener("resize",d),document.removeEventListener("pointermove",Zt),document.removeEventListener("pointerup",Qt)}});function Lt(d){if(!t(_))return;(a()||t(z)>1)&&(d.preventDefault(),d.stopPropagation()),t(_).setPointerCapture(d.pointerId),re.set(d.pointerId,{x:d.clientX,y:d.clientY});const C=Date.now(),X=d.clientX-yt,te=d.clientY-xt,oe=Math.sqrt(X*X+te*te);if(C-K<300&&oe<50){a()?(hn.update(B=>B==="move-center"?"rotate-slices":"move-center"),Me()):Tt.update(B=>!B),re.clear(),K=0;return}if(K=C,yt=d.clientX,xt=d.clientY,re.size===1&&(Xe=d.clientX,et=d.clientY,gt=d.clientY,tt=v()||1,a()&&x()==="rotate-slices")){const B=t(_).getBoundingClientRect(),ve=t($).clientWidth,Ce=t($).clientHeight,Pe=B.left+ve/2,ke=B.top+Ce/2,q=d.clientX-Pe,V=d.clientY-ke;Ft=Math.atan2(V,q),Dt=g()}if(re.size===2){const B=Array.from(re.values());Ye=t(z),vt=t(z),Fe=Math.hypot(B[0].x-B[1].x,B[0].y-B[1].y)}}function ft(d){if(t(_)){if((a()||t(z)>1)&&re.has(d.pointerId)&&(d.preventDefault(),d.stopPropagation()),re.has(d.pointerId)&&re.set(d.pointerId,{x:d.clientX,y:d.clientY}),re.size===2){const C=Array.from(re.values()),X=C[0],te=C[1],B=Math.hypot(X.x-te.x,X.y-te.y)/Fe;let ve=Math.max(ye,Math.min(W,Ye*B));f()&&(vt=ve,ve=t(z)+(vt-t(z))*.3);const Ce={x:(X.x+te.x)/2,y:(X.y+te.y)/2},Pe=t($).clientWidth,ke=t($).clientHeight,q=t(_).getBoundingClientRect(),V=Ce.x-(q.left+Pe/2)-t(Y),H=Ce.y-(q.top+ke/2)-t(J),A=t(z),O=ve;if(P(Y,t(Y)-(O/A-1)*V),P(J,t(J)-(O/A-1)*H),P(z,ve),f()){const I=Date.now();I-_t>16&&(Me(),_t=I)}else Me();P(nt,!0),clearTimeout(We);return}if(re.size===1){if(re.values().next().value,a()&&x()==="rotate-slices"){const C=t(_).getBoundingClientRect(),X=t($).clientWidth,te=t($).clientHeight,oe=C.left+X/2,B=C.top+te/2,ve=d.clientX-oe,Ce=d.clientY-B,ke=Math.atan2(Ce,ve)-Ft;It.set(Dt+ke),Me();return}if(t(z)>1||a()&&x()==="move-center"){const C=d.clientX-Xe,X=d.clientY-et;P(Y,t(Y)+C),P(J,t(J)+X),Xe=d.clientX,et=d.clientY,Me();return}else if(!f()){const C=gt-d.clientY,te=Math.round(C*8),oe=Math.max(10,Math.min(1e4,Math.round(tt+te)));lt.set(oe),$t.set(!0),P(nt,!0),clearTimeout(We)}}}}function Jt(d){if(t(_)){try{t(_).releasePointerCapture(d.pointerId)}catch{}clearTimeout(We),P(nt,!0),We=setTimeout(()=>{P(nt,!1)},4e3),re.delete(d.pointerId),re.size===0&&(clearTimeout(We),P(nt,!1),Fe=0,vt=t(z))}}function yn(){clearTimeout(We),P(nt,!0),We=setTimeout(()=>{P(nt,!1)},4e3)}function Kt(d){if(!t(_)||!d.ctrlKey&&!d.metaKey)return;d.preventDefault();const X=1+(-d.deltaY>0?.1:-.1),te=Math.max(ye,Math.min(W,t(z)*X)),oe=t(_).getBoundingClientRect(),B=d.clientX-(oe.left+t($).clientWidth/2)-t(Y),ve=d.clientY-(oe.top+t($).clientHeight/2)-t(J);P(Y,t(Y)-(te/t(z)-1)*B),P(J,t(J)-(te/t(z)-1)*ve),P(z,te),Me()}function xn(d){f()&&(d.stopPropagation(),d.preventDefault(),kt=!0,wn=d.clientX-(t(Mt)||0),Bt=d.clientY-(t(Xt)||0),document.addEventListener("pointermove",Zt),document.addEventListener("pointerup",Qt))}function Zt(d){kt&&(d.stopPropagation(),d.preventDefault(),P(Mt,d.clientX-wn),P(Xt,d.clientY-Bt))}function Qt(d){kt&&(d.stopPropagation(),d.preventDefault()),kt=!1,document.removeEventListener("pointermove",Zt),document.removeEventListener("pointerup",Qt)}xi(()=>{t(xe)&&cancelAnimationFrame(t(xe)),it&&it.disconnect(),We&&clearTimeout(We),t(_)&&(t(_).removeEventListener("pointerdown",Lt),t(_).removeEventListener("pointermove",ft),t(_).removeEventListener("pointerup",Jt),t(_).removeEventListener("pointerleave",yn),t(_)&&t(_).removeEventListener("wheel",Kt)),da.set(null)});function qt(d){const C=l()||c().active||a();if(!C||!t(at)){P(ct,0),!C&&t(xe)&&(cancelAnimationFrame(t(xe)),P(xe,null));return}t(ct)||P(ct,d);const X=d-t(ct);if(P(ct,d),l()&&!a()){const te=v()||0;ee+=te*(w()||1)*(X/1e3)}Me(),P(xe,requestAnimationFrame(qt))}function Me(){if(!t(at)||!e||!t(U)||!t($)){console.log("DrawFrame skipped:",{imageReady:t(at),ctx:!!e,htmlImg:!!t(U),canvas:!!t($)});return}const d=t($).clientWidth,C=t($).clientHeight;e.clearRect(0,0,d,C),b()&&k()&&(e.save(),e.fillStyle=S(),e.fillRect(0,0,d,C),e.restore()),e.save();const X=t(U).width/t(U).height,te=d/C;let oe,B;X>te?(oe=d,B=d/X):(B=C,oe=C*X);const ve=oe*t(z),Ce=B*t(z);let Pe=0,ke=0;if(k()){const q=oe/t(U).width;Pe=(k().x-t(U).width/2)*q*t(z),ke=(k().y-t(U).height/2)*q*t(z)}if(e.translate(d/2+t(Y),C/2+t(J)),e.translate(Pe,ke),e.rotate(ee*Math.PI/180),e.translate(-Pe,-ke),e.drawImage(t(U),-ve/2,-Ce/2,ve,Ce),m()&&k())try{const q=k(),V=oe*t(z)/t(U).width,H=(q.x-t(U).width/2)*V,A=(q.y-t(U).height/2)*V,O=q.r*V,I=Date.now()/1e3,ge=I*Math.PI*.5%(Math.PI*2),we=I*2.5*Math.PI*2,ne=Math.abs(Math.sin(we)),mt=I*.8%2,Hn=Math.sin(I*3)*.1,Sn=Math.tan(I*.5)*.05,Wn=O*(.8+mt*.4+Hn+Math.min(Math.max(Sn,-.1),.1)),Cn=Math.max(0,.3*(1-mt/2)*ne);e.beginPath(),e.strokeStyle=`rgba(0, 255, 255, ${Cn})`,e.lineWidth=2,e.arc(H,A,Wn,0,Math.PI*2),e.stroke();const Pn=16;for(let ce=0;ce<Pn;ce++){const be=ce/Pn*Math.PI*2,Le=Math.sin(I*2+ce*.5)*.2,Ee=be+Le,Ne=O*(.7+Math.sin(I*3+ce)*.2)*ne;e.save(),e.translate(H,A),e.strokeStyle=`rgba(0, 255, 255, ${ne*.3})`,e.lineWidth=1,e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(Ee)*Ne,Math.sin(Ee)*Ne),e.stroke(),e.restore()}e.save(),e.translate(H,A),e.rotate(ge);const $n=.4+ne*.3;e.strokeStyle=`rgba(0, 255, 255, ${$n})`,e.lineWidth=2+ne*2,e.beginPath(),e.moveTo(0,0),e.lineTo(O*1.1,0),e.stroke(),e.restore(),e.strokeStyle=`rgba(0, 255, 255, ${.1+ne*.15})`,e.lineWidth=1;for(let ce=0;ce<8;ce++){const be=ce/8*Math.PI*2,Le=Math.tan(I+ce*.3)*.1,Ee=O*(1+Math.min(Math.max(Le,-.15),.15));if(e.beginPath(),e.moveTo(H,A),e.lineTo(H+Math.cos(be)*Ee,A+Math.sin(be)*Ee),e.stroke(),ce%2===0){const Ne=Math.round(be*180/Math.PI%360),Wt=O*1.12,o=H+Math.cos(be)*Wt,M=A+Math.sin(be)*Wt;e.font="bold 10px monospace",e.fillStyle=`rgba(0, 255, 255, ${.7*ne})`,e.textAlign="center",e.textBaseline="middle",e.fillText(`${Ne}Â°`,o,M)}}const en=.6+ne*.3;e.font="11px monospace",e.textAlign="left";const Rt=H+O*.3,tn=A-O*.8,In=14,Nn=(Math.sin(I*3)*100).toFixed(1),jn=(Math.tan(I*.8)*10).toFixed(1),nn=[`r = ${Math.round(q.r)}px`,`Î¸ = ${Math.round(ge*180/Math.PI%360)}Â°`,`Ï‰ = ${v()}Â°/s`,`sin(t) = ${Nn}`,`tan(t) = ${jn}`,`n = ${r()||0}`];e.fillStyle=`rgba(0, 0, 0, ${.7+ne*.2})`,e.fillRect(Rt-2,tn-8,110,nn.length*In),nn.forEach((ce,be)=>{const Le=tn+be*In,Ee=["rgba(0, 255, 255, ","rgba(255, 0, 255, ","rgba(255, 255, 0, "],Ne=en+Math.sin(I*2+be)*.2;e.fillStyle=Ee[be%3]+Ne+")",e.fillText(ce,Rt,Le)}),e.font="bold 10px sans-serif",e.textAlign="center";const zt=A+O+25;e.fillStyle=`rgba(0, 0, 0, ${.7+ne*.2})`,e.fillRect(H-70,zt-8,140,16),e.fillStyle=`rgba(100, 255, 200, ${.8+ne*.2})`,e.fillText("STROBOSCOPIC ANALYSIS",H,zt);for(let ce=0;ce<6;ce++){const be=ce/6*Math.PI*2+I*.3,Le=Math.sin(I*4+ce*1.5)*.1,Ee=O*(1+Le),Ne=H+Math.cos(be)*Ee,Wt=A+Math.sin(be)*Ee,o=2+ne*2;e.beginPath(),e.arc(Ne,Wt,o,0,Math.PI*2),e.fillStyle=ce%2===0?`rgba(0, 255, 255, ${ne})`:`rgba(255, 0, 255, ${ne})`,e.fill()}e.beginPath(),e.lineWidth=2+ne,e.strokeStyle=`rgba(0, 255, 255, ${.8+ne*.2})`,e.arc(H,A,O,0,Math.PI*2),e.stroke(),e.lineWidth=2;const Ht=Math.max(15,O*.15)*(1+ne*.3);if(e.beginPath(),e.strokeStyle=`rgba(0, 255, 255, ${.9*ne})`,e.moveTo(H-Ht,A),e.lineTo(H+Ht,A),e.moveTo(H,A-Ht),e.lineTo(H,A+Ht),e.stroke(),h()&&h().length){e.fillStyle=`rgba(255, 0, 255, ${.9*ne})`;for(const ce of h()){const be=ce.angle,Le=H+Math.cos(be)*O,Ee=A+Math.sin(be)*O,Ne=2.5+ne*1.5;e.beginPath(),e.arc(Le,Ee,Ne,0,Math.PI*2),e.fill()}}}catch(q){console.warn("overlay draw failed",q)}if(a()&&!u())try{let q;if(a()){const V=c().startTime||0;q=(V>0?Date.now()-V:Date.now())%2e3/2e3}else q=Math.min(1,(Date.now()-c().startTime)/2e3);if(e.fillStyle=a()?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.3)",e.fillRect(-oe/2-100,-B/2-100,oe+200,B+200),k()){const V=k(),H=oe*t(z)/t(U).width,A=(V.x-t(U).width/2)*H,O=(V.y-t(U).height/2)*H,I=V.r*H;e.strokeStyle=`rgba(100, 200, 255, ${.8*(1-q)})`,e.lineWidth=2;for(let ne=0;ne<3;ne++){const mt=I*(.3+q*1.2+ne*.3);e.beginPath(),e.arc(A,O,mt,0,Math.PI*2),e.stroke()}e.strokeStyle="rgba(100, 200, 255, 0.9)",e.lineWidth=3;const ge=q*Math.PI*6,$e=I*1.8;e.beginPath(),e.moveTo(A,O),e.lineTo(A+Math.cos(ge)*$e,O+Math.sin(ge)*$e),e.stroke();const we=4+Math.sin(q*Math.PI*4)*2;e.fillStyle=`rgba(100, 200, 255, ${.9*Math.sin(q*Math.PI)})`,e.beginPath(),e.arc(A,O,we,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(100, 200, 255, ${Math.sin(q*Math.PI)})`,e.font="bold 14px sans-serif",e.textAlign="center",e.fillText("SCANNING...",A,O-I-20)}else{const V=Math.max(oe,B)/2;e.strokeStyle=`rgba(100, 200, 255, ${.6})`,e.lineWidth=2;for(let A=0;A<4;A++){const O=V*(q+A*.25)%1,I=1-O;e.strokeStyle=`rgba(100, 200, 255, ${I*.6})`,e.beginPath(),e.arc(0,0,O*V,0,Math.PI*2),e.stroke()}e.strokeStyle="rgba(100, 200, 255, 0.8)",e.lineWidth=3;const H=q*Math.PI*4;e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(H)*V,Math.sin(H)*V),e.stroke(),e.fillStyle=`rgba(100, 200, 255, ${.8+.2*Math.sin(q*Math.PI*4)})`,e.font="bold 18px sans-serif",e.textAlign="center",a()?x()==="move-center"?(e.fillText("âš™ï¸ EDIT MODE - ADJUST POSITION & ZOOM",0,-60),e.font="bold 16px sans-serif",e.fillStyle="rgba(255, 200, 100, 0.95)",e.fillText("ðŸŽ¯ Align crosshair with rotation center",0,-20),e.font="14px sans-serif",e.fillStyle="rgba(200, 255, 200, 0.9)",e.fillText("ðŸ‘† Drag to move  â€¢  ðŸ” Scroll/Pinch to zoom",0,20),e.font="bold 14px sans-serif",e.fillStyle="rgba(100, 255, 100, 0.9)",e.fillText('Click "Confirm Detection" when ready',0,60)):(e.fillText("ðŸ”„ ROTATE SLICES MODE",0,-60),e.font="bold 16px sans-serif",e.fillStyle="rgba(255, 200, 100, 0.95)",e.fillText("ðŸ“ Divide according to the scenes",0,-20),e.font="14px sans-serif",e.fillStyle="rgba(200, 255, 200, 0.9)",e.fillText("ðŸ‘† Drag to rotate divisions",0,20),e.font="bold 14px sans-serif",e.fillStyle="rgba(100, 255, 100, 0.9)",e.fillText("Double-tap to switch back to move mode",0,60)):(e.fillText("ANALYZING IMAGE...",0,-20),e.font="12px sans-serif",e.fillText(`${Math.round(q*100)}%`,0,10))}}catch(q){console.warn("radar animation failed",q)}if(E()&&l()){const q=1e3/R(),V=t(ct)%q/q,H=Math.max(0,Math.min(1,(R()-40)/30));let A;if(H<.33?A=V>.5?.85:0:H<.67?A=Math.sin(V*Math.PI*2)*.5+.5>.6?.6:0:A=(Math.sin(V*Math.PI*2)*.5+.5)*.3,A>.05){const we=e.createRadialGradient(d/2,C/2,0,d/2,C/2,Math.max(d,C)*.8);we.addColorStop(0,`rgba(0, 0, 0, ${A*.7})`),we.addColorStop(.5,`rgba(0, 0, 0, ${A})`),we.addColorStop(1,`rgba(0, 0, 0, ${A*.9})`),e.fillStyle=we,e.fillRect(-d,-C,d*3,C*3),H<.5&&(e.fillStyle=`rgba(20, 20, 40, ${A*.15})`,e.fillRect(-d,-C,d*3,C*3))}e.save(),e.translate(d/2,C/2);const O=-d/2+15,I=-C/2+15;let ge,$e;R()<50?(ge="rgba(255, 100, 100, 0.9)",$e="FLICKER"):R()<60?(ge="rgba(255, 180, 50, 0.9)",$e="THRESHOLD"):(ge="rgba(100, 220, 100, 0.9)",$e="FUSED"),e.fillStyle="rgba(0, 0, 0, 0.75)",e.beginPath(),e.roundRect(O,I,85,18,4),e.fill(),e.font="bold 11px monospace",e.fillStyle=ge,e.textAlign="left",e.textBaseline="middle",e.fillText(`${R()}Hz`,O+5,I+9),e.font="9px sans-serif",e.fillStyle="rgba(255, 255, 255, 0.7)",e.fillText($e,O+42,I+9),e.restore()}if(e.restore(),a()||u()){const q=Date.now()%1e3/1e3,V=.7+.3*Math.sin(q*Math.PI*2);e.save(),e.translate(d/2,C/2);const H=s()||r()||12;if(a()&&H>0){const O=Math.min(d,C)*.3,I=Math.PI*2/H,ge=g();for(let $e=0;$e<H;$e++){const we=$e*I-Math.PI/2+ge,ne=we+I,mt=.15+.1*($e%2*.5);e.fillStyle=`rgba(100, 200, 255, ${mt})`,e.beginPath(),e.moveTo(0,0),e.arc(0,0,O,we,ne),e.closePath(),e.fill(),e.strokeStyle=`rgba(100, 200, 255, ${.4*V})`,e.lineWidth=2,e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(we)*O,Math.sin(we)*O),e.stroke()}e.strokeStyle=`rgba(100, 200, 255, ${.5*V})`,e.lineWidth=3,e.beginPath(),e.arc(0,0,O,0,Math.PI*2),e.stroke()}e.strokeStyle=`rgba(255, 100, 0, ${V})`,e.lineWidth=4;const A=Math.min(d,C)*.1;e.beginPath(),e.arc(0,0,A*.7,0,Math.PI*2),e.stroke(),e.lineWidth=3,e.beginPath(),e.moveTo(-A,0),e.lineTo(A,0),e.stroke(),e.beginPath(),e.moveTo(0,-A),e.lineTo(0,A),e.stroke(),e.beginPath(),e.arc(0,0,10+3*Math.sin(q*Math.PI*2),0,Math.PI*2),e.fillStyle=`rgba(255, 100, 0, ${V})`,e.fill(),e.strokeStyle="rgba(255, 255, 255, 0.9)",e.lineWidth=2,e.stroke(),e.beginPath(),e.arc(0,0,3,0,Math.PI*2),e.fillStyle="rgba(255, 255, 255, 0.95)",e.fill(),e.restore()}}Ie(()=>(a(),It),()=>{a()?(P(Y,0),P(J,0),P(z,1),hn.set("move-center"),Me()):It.set(0)}),Ie(()=>(t(Y),t(J),t(z)),()=>{fa.set({translateX:t(Y),translateY:t(J),scale:t(z)})}),Ie(()=>(l(),Et),()=>{l()&&Et.set(!1)}),Ie(()=>(p(),t(U)),()=>{p()?_n(p()):(t(U)&&P(U,null),P(at,!1),Me())}),Ie(()=>s(),()=>{s()!==void 0&&Me()}),Ie(()=>(l(),c(),a(),t(xe)),()=>{l()||c().active||a()?t(xe)||P(xe,requestAnimationFrame(qt)):t(xe)&&(cancelAnimationFrame(t(xe)),P(xe,null),P(ct,0))}),ga(),qn();var Be=Ni(),Mn=F(Be);ka(Mn,d=>P($,d),()=>t($));var Ot=y(Mn,2);{var St=d=>{var C=zi(),X=F(C);L(C),Te(te=>{ot(C,f()&&t(Mt)!==null?`right: auto; top: auto; left: ${t(Mt)}px; top: ${t(Xt)}px;`:""),ze(X,`Speed: ${te??""}Â°/s`)},[()=>(v(),Qe(()=>v().toFixed(0)))]),N("pointerdown",C,xn),D(d,C)};le(Ot,d=>{(t(nt)||f())&&d(St)})}var kn=y(Ot,2);{var zn=d=>{var C=Wi(),X=Ke(C),te=F(X);{var oe=I=>{var ge=_e("ðŸŽ¯ EDIT MODE - Drag to position â€¢ Scroll to zoom â€¢ Double-tap to rotate slices");D(I,ge)},B=I=>{var ge=_e("ðŸ”„ ROTATE SLICES - Drag to rotate â€¢ Double-tap to move center");D(I,ge)};le(te,I=>{x()==="move-center"?I(oe):I(B,!1)})}L(X);var ve=y(X,2);{var Ce=I=>{var ge=Hi();D(I,ge)};le(ve,I=>{x()==="move-center"&&I(Ce)})}var Pe=y(ve,2),ke=y(F(Pe),2),q=F(ke),V=y(q,2),H=F(V),A=F(H,!0);L(H),Dn(2),L(V);var O=y(V,2);L(ke),L(Pe),Te(()=>ze(A,s()||12)),N("click",q,Se(()=>At.set(Math.max(6,(s()||12)-1)))),N("pointerdown",q,Se(function(I){jt.call(this,i,I)})),N("pointermove",q,Se(function(I){jt.call(this,i,I)})),N("pointerup",q,Se(function(I){jt.call(this,i,I)})),N("click",O,Se(()=>At.set(Math.min(100,(s()||12)+1)))),N("pointerdown",O,Se(function(I){jt.call(this,i,I)})),N("pointermove",O,Se(function(I){jt.call(this,i,I)})),N("pointerup",O,Se(function(I){jt.call(this,i,I)})),D(d,C)};le(kn,d=>{a()&&d(zn)})}L(Be),ka(Be,d=>P(_,d),()=>t(_)),Te(()=>Fn(Be,1,`canvas-wrapper ${a()?"edit-mode":""}`,"svelte-byh4af")),D(n,Be),bn(),G()}async function Gi(n,i,a={}){const{x:l,y:p,r:s}=i||{x:n.width/2,y:n.height/2,r:Math.min(n.width,n.height)/2},f=a.samples||720,v=a.innerOffset||-Math.max(2,Math.round(s*.06)),x=a.outerOffset||Math.max(2,Math.round(s*.06)),g=a.thresholdFactor||.6,c=document.createElement("canvas");c.width=n.width,c.height=n.height;const w=c.getContext("2d");w.drawImage(n,0,0);const b=w.getImageData(0,0,c.width,c.height).data,k=c.width,S=c.height;function m(W,Y){const J=Math.round(W),re=Math.round(Y);if(J<0||J>=k||re<0||re>=S)return 0;const Ye=(re*k+J)*4,Fe=b[Ye],Xe=b[Ye+1],et=b[Ye+2];return .2126*Fe+.7152*Xe+.0722*et}const r=new Array(f);for(let W=0;W<f;W++){const Y=W/f*Math.PI*2,J=[],re=3;for(let Fe=0;Fe<re;Fe++){const Xe=Fe/(re-1),et=s+v+(x-v)*Xe,xe=l+et*Math.cos(Y),vt=p+et*Math.sin(Y);J.push(m(xe,vt))}const Ye=J.reduce((Fe,Xe)=>Fe+Xe,0)/J.length;r[W]=Ye}const h=r.reduce((W,Y)=>W+Y,0)/r.length,u=Math.sqrt(r.reduce((W,Y)=>W+(Y-h)**2,0)/r.length),E=h+u*g,R=r.map(W=>W>E);let T=0,G=!1,_=[],$=0;for(let W=0;W<R.length*2;W++){const Y=W%R.length;if(R[Y]?($++,G=!0):(G&&(_.push($),$=0),G=!1),W>=R.length&&!G)break}G&&$>0&&_.push($);const e=Math.max(2,Math.round(f/360*(a.minDegrees||5))),ee=_.filter(W=>W>=e);T=ee.length;const z=[];let ye=0;for(const W of _){const Y=ye%f,J=(ye+W-1)%f,re=(Y+Math.floor(W/2))%f;z.push({start:Y,end:J,mid:re,angle:re/f*2*Math.PI}),ye+=W+1}return{count:T,samples:r,mask:R,groups:ee,positions:z,canvas:c}}function Ui(n,i=24,a={}){const l=[],{width:p,height:s}=n,f=a.circle||{x:p/2,y:s/2,r:Math.min(p,s)/2},v=a.margin??1.05,x=Math.round(f.r*v),g=x*2,c=a.outputSize||Math.max(32,Math.round(g)),w=a.fps||24,b=typeof a.rotationSpeed=="number"?a.rotationSpeed:0,k=a.direction==null?1:a.direction,S=a.initialRotation||0,m=a.fillOuterCircle||!1,r=a.fillColor||"#000000",h=document.createElement("canvas");h.width=g,h.height=g;const u=h.getContext("2d"),E=Math.round(f.x-x),R=Math.round(f.y-x);try{u.drawImage(n,E,R,g,g,0,0,g,g)}catch{u.drawImage(n,0,0)}const G=b/w*Math.PI/180*k;Math.round(g*(a.zoom||1));for(let _=0;_<i;_++){const $=_*G+S,e=document.createElement("canvas");e.width=c,e.height=c;const ee=e.getContext("2d");m&&(ee.fillStyle=r,ee.fillRect(0,0,c,c)),ee.translate(c/2,c/2),ee.rotate($);const z=Math.round(g*(a.zoom||1)),ye=z;ee.drawImage(h,-z/2,-ye/2,z,ye),l.push(e)}return l}function Yi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function An(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ra={exports:{}},Aa;function Xi(){return Aa||(Aa=1,(function(n,i){(function(a){n.exports=a()})(function(){return(function a(l,p,s){function f(g,c){if(!p[g]){if(!l[g]){var w=typeof An=="function"&&An;if(!c&&w)return w(g,!0);if(v)return v(g,!0);var b=new Error("Cannot find module '"+g+"'");throw b.code="MODULE_NOT_FOUND",b}var k=p[g]={exports:{}};l[g][0].call(k.exports,function(S){var m=l[g][1][S];return f(m||S)},k,k.exports,a,l,p,s)}return p[g].exports}for(var v=typeof An=="function"&&An,x=0;x<s.length;x++)f(s[x]);return f})({1:[function(a,l,p){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}l.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(c){if(!v(c)||c<0||isNaN(c))throw TypeError("n must be a positive number");return this._maxListeners=c,this},s.prototype.emit=function(c){var w,b,k,S,m,r;if(this._events||(this._events={}),c==="error"&&(!this._events.error||x(this._events.error)&&!this._events.error.length)){if(w=arguments[1],w instanceof Error)throw w;var h=new Error('Uncaught, unspecified "error" event. ('+w+")");throw h.context=w,h}if(b=this._events[c],g(b))return!1;if(f(b))switch(arguments.length){case 1:b.call(this);break;case 2:b.call(this,arguments[1]);break;case 3:b.call(this,arguments[1],arguments[2]);break;default:S=Array.prototype.slice.call(arguments,1),b.apply(this,S)}else if(x(b))for(S=Array.prototype.slice.call(arguments,1),r=b.slice(),k=r.length,m=0;m<k;m++)r[m].apply(this,S);return!0},s.prototype.addListener=function(c,w){var b;if(!f(w))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",c,f(w.listener)?w.listener:w),this._events[c]?x(this._events[c])?this._events[c].push(w):this._events[c]=[this._events[c],w]:this._events[c]=w,x(this._events[c])&&!this._events[c].warned&&(g(this._maxListeners)?b=s.defaultMaxListeners:b=this._maxListeners,b&&b>0&&this._events[c].length>b&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),typeof console.trace=="function"&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(c,w){if(!f(w))throw TypeError("listener must be a function");var b=!1;function k(){this.removeListener(c,k),b||(b=!0,w.apply(this,arguments))}return k.listener=w,this.on(c,k),this},s.prototype.removeListener=function(c,w){var b,k,S,m;if(!f(w))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;if(b=this._events[c],S=b.length,k=-1,b===w||f(b.listener)&&b.listener===w)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,w);else if(x(b)){for(m=S;m-- >0;)if(b[m]===w||b[m].listener&&b[m].listener===w){k=m;break}if(k<0)return this;b.length===1?(b.length=0,delete this._events[c]):b.splice(k,1),this._events.removeListener&&this.emit("removeListener",c,w)}return this},s.prototype.removeAllListeners=function(c){var w,b;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[c]&&delete this._events[c],this;if(arguments.length===0){for(w in this._events)w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events={},this}if(b=this._events[c],f(b))this.removeListener(c,b);else if(b)for(;b.length;)this.removeListener(c,b[b.length-1]);return delete this._events[c],this},s.prototype.listeners=function(c){var w;return!this._events||!this._events[c]?w=[]:f(this._events[c])?w=[this._events[c]]:w=this._events[c].slice(),w},s.prototype.listenerCount=function(c){if(this._events){var w=this._events[c];if(f(w))return 1;if(w)return w.length}return 0},s.listenerCount=function(c,w){return c.listenerCount(w)};function f(c){return typeof c=="function"}function v(c){return typeof c=="number"}function x(c){return typeof c=="object"&&c!==null}function g(c){return c===void 0}},{}],2:[function(a,l,p){var s,f,v,x,g;g=navigator.userAgent.toLowerCase(),x=navigator.platform.toLowerCase(),s=g.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],v=s[1]==="ie"&&document.documentMode,f={name:s[1]==="version"?s[3]:s[1],version:v||parseFloat(s[1]==="opera"&&s[4]?s[4]:s[2]),platform:{name:g.match(/ip(?:ad|od|hone)/)?"ios":(g.match(/(?:webos|android)/)||x.match(/mac|win|linux/)||["other"])[0]}},f[f.name]=!0,f[f.name+parseInt(f.version,10)]=!0,f.platform[f.platform.name]=!0,l.exports=f},{}],3:[function(a,l,p){var s,f,v,x=function(b,k){for(var S in k)g.call(k,S)&&(b[S]=k[S]);function m(){this.constructor=b}return m.prototype=k.prototype,b.prototype=new m,b.__super__=k.prototype,b},g={}.hasOwnProperty,c=[].indexOf||function(b){for(var k=0,S=this.length;k<S;k++)if(k in this&&this[k]===b)return k;return-1},w=[].slice;s=a("events").EventEmitter,v=a("./browser.coffee"),f=(function(b){var k,S;x(m,b),k={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},S={delay:500,copy:!1};function m(r){var h,u,E;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(r);for(u in k)E=k[u],(h=this.options)[u]==null&&(h[u]=E)}return m.prototype.setOption=function(r,h){if(this.options[r]=h,this._canvas!=null&&(r==="width"||r==="height"))return this._canvas[r]=h},m.prototype.setOptions=function(r){var h,u,E;u=[];for(h in r)g.call(r,h)&&(E=r[h],u.push(this.setOption(h,E)));return u},m.prototype.addFrame=function(r,h){var u,E;h==null&&(h={}),u={},u.transparent=this.options.transparent;for(E in S)u[E]=h[E]||S[E];if(this.options.width==null&&this.setOption("width",r.width),this.options.height==null&&this.setOption("height",r.height),typeof ImageData<"u"&&ImageData!==null&&r instanceof ImageData)u.data=r.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&r instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&r instanceof WebGLRenderingContext)h.copy?u.data=this.getContextData(r):u.context=r;else if(r.childNodes!=null)h.copy?u.data=this.getImageData(r):u.image=r;else throw new Error("Invalid image");return this.frames.push(u)},m.prototype.render=function(){var r,h,u;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var E,R,T;for(T=[],E=0,R=this.frames.length;0<=R?E<R:E>R;0<=R?++E:--E)T.push(null);return T}).call(this),h=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(r=0,u=h;0<=u?r<u:r>u;0<=u?++r:--r)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},m.prototype.abort=function(){for(var r;r=this.activeWorkers.shift(),r!=null;)this.log("killing active worker"),r.terminate();return this.running=!1,this.emit("abort")},m.prototype.spawnWorkers=function(){var r,h,u;return r=Math.min(this.options.workers,this.frames.length),(function(){u=[];for(var E=h=this.freeWorkers.length;h<=r?E<r:E>r;h<=r?E++:E--)u.push(E);return u}).apply(this).forEach((function(E){return function(R){var T;return E.log("spawning worker "+R),T=new Worker(E.options.workerScript),T.onmessage=function(G){return E.activeWorkers.splice(E.activeWorkers.indexOf(T),1),E.freeWorkers.push(T),E.frameFinished(G.data)},E.freeWorkers.push(T)}})(this)),r},m.prototype.frameFinished=function(r){var h,u;if(this.log("frame "+r.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[r.index]=r,this.options.globalPalette===!0&&(this.options.globalPalette=r.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(h=1,u=this.freeWorkers.length;1<=u?h<u:h>u;1<=u?++h:--h)this.renderNextFrame();return c.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},m.prototype.finishRendering=function(){var r,h,u,E,R,T,G,_,$,e,ee,z,ye,W,Y,J;for(_=0,W=this.imageParts,R=0,$=W.length;R<$;R++)h=W[R],_+=(h.data.length-1)*h.pageSize+h.cursor;for(_+=h.pageSize-h.cursor,this.log("rendering finished - filesize "+Math.round(_/1e3)+"kb"),r=new Uint8Array(_),z=0,Y=this.imageParts,T=0,e=Y.length;T<e;T++)for(h=Y[T],J=h.data,u=G=0,ee=J.length;G<ee;u=++G)ye=J[u],r.set(ye,z),u===h.data.length-1?z+=h.cursor:z+=h.pageSize;return E=new Blob([r],{type:"image/gif"}),this.emit("finished",E,r)},m.prototype.renderNextFrame=function(){var r,h,u;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return r=this.frames[this.nextFrame++],u=this.freeWorkers.shift(),h=this.getTask(r),this.log("starting frame "+(h.index+1)+" of "+this.frames.length),this.activeWorkers.push(u),u.postMessage(h)},m.prototype.getContextData=function(r){return r.getImageData(0,0,this.options.width,this.options.height).data},m.prototype.getImageData=function(r){var h;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),h=this._canvas.getContext("2d"),h.setFill=this.options.background,h.fillRect(0,0,this.options.width,this.options.height),h.drawImage(r,0,0),this.getContextData(h)},m.prototype.getTask=function(r){var h,u;if(h=this.frames.indexOf(r),u={index:h,last:h===this.frames.length-1,delay:r.delay,transparent:r.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:v.name==="chrome"},r.data!=null)u.data=r.data;else if(r.context!=null)u.data=this.getContextData(r.context);else if(r.image!=null)u.data=this.getImageData(r.image);else throw new Error("Invalid frame");return u},m.prototype.log=function(){var r;if(r=1<=arguments.length?w.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,r)},m})(s),l.exports=f},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(ra)),ra.exports}var Bi=Xi();const Vi=Yi(Bi),Ji=""+new URL("../assets/gif.worker.CjkyQP34.js",import.meta.url).href;async function Ki(n,i=24){if(!n||n.length===0)throw new Error("No frames to export");const a=new Vi({workers:2,quality:10,width:n[0].width,height:n[0].height,workerScript:Ji,repeat:0,background:null,comment:"Created with Phenakistoscope Lab - https://tclaret.github.io/phenaki-lab/"}),l=Math.round(1e3/i);for(const p of n){const s=p.width,f=p.height,v=document.createElement("canvas");v.width=s,v.height=f;const x=v.getContext("2d");x.fillStyle="#ffffff",x.fillRect(0,0,s,f),x.drawImage(p,0,0),a.addFrame(v,{delay:l,copy:!0})}return new Promise((p,s)=>{a.on("finished",function(f){const v=URL.createObjectURL(f);p(v)}),a.on("error",s),a.render()})}var Zi=pe('<div class="export-overlay svelte-14nyow8" role="status" aria-live="polite"><div class="export-box svelte-14nyow8"><div class="spinner svelte-14nyow8" aria-hidden="true"></div> <div class="export-text svelte-14nyow8">Workingâ€¦ Exporting GIF â€” please wait</div></div></div>'),Qi=pe('<button class="confirm-btn svelte-14nyow8">Confirm Detection</button> <button class="svelte-14nyow8">Cancel</button>',1),es=pe("<button>Detect Circle & Count</button>"),ts=pe('<span style="background: #4a9eff; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.75em; font-weight: bold; margin-left: 4px;" class="svelte-14nyow8"> </span>'),ns=pe('<input type="color" style="width:40px;height:28px;border:1px solid #555;border-radius:4px;cursor:pointer;margin-left:4px;" title="Choose fill color" class="svelte-14nyow8"/>'),as=pe('<div style="margin-top: 16px; padding: 12px; background: rgba(74, 158, 255, 0.08); border-radius: 6px; border: 1px solid rgba(74, 158, 255, 0.2);" class="svelte-14nyow8"><div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;" class="svelte-14nyow8"><div style="font-weight: 600; color: #4a9eff; font-size: 0.95em;" class="svelte-14nyow8">âš¡ Flicker Fusion Threshold</div> <a href="https://en.wikipedia.org/wiki/Flicker_fusion_threshold" target="_blank" rel="noopener noreferrer" style="display: flex; align-items: center; gap: 4px; font-size: 0.75em; color: #aaa; text-decoration: none; opacity: 0.7; transition: opacity 0.2s;" title="Learn more on Wikipedia" class="svelte-14nyow8"><svg width="14" height="14" viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg" class="svelte-14nyow8"><path fill="currentColor" d="M120 0C53.8 0 0 53.8 0 120s53.8 120 120 120 120-53.8 120-120S186.2 0 120 0zm0 217.5c-53.8 0-97.5-43.7-97.5-97.5S66.2 22.5 120 22.5s97.5 43.7 97.5 97.5-43.7 97.5-97.5 97.5zm-7.5-165h15v90h-15zm0 105h15v15h-15z" class="svelte-14nyow8"></path></svg> <span class="svelte-14nyow8">Wikipedia</span></a></div> <div style="font-size: 0.8em; color: #888; font-style: italic; margin-bottom: 10px;" class="svelte-14nyow8">Note: This test only affects visualization, not the exported GIF</div> <div style="margin-bottom: 12px;" class="svelte-14nyow8"><div style="font-size: 0.85em; color: #aaa; margin-bottom: 6px;" class="svelte-14nyow8">Quick Presets:</div> <div style="display: flex; gap: 6px; flex-wrap: wrap;" class="svelte-14nyow8"><button class="flicker-preset-btn svelte-14nyow8">30 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">42 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">50 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">55 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">60 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">70 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">80 Hz</button> <button class="flicker-preset-btn svelte-14nyow8">100 Hz</button></div></div> <div style="margin-top: 12px;" class="svelte-14nyow8"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;" class="svelte-14nyow8"><span style="font-size: 0.85em; color: #ccc;" class="svelte-14nyow8">Fine Tune:</span> <span style="font-size: 1.1em; font-weight: bold; color: #4a9eff;" class="svelte-14nyow8"> </span></div> <input type="range" min="20" max="100" step="0.5" style="width: 100%; cursor: pointer;" class="svelte-14nyow8"/> <div style="display: flex; justify-content: space-between; font-size: 0.7em; color: #666; margin-top: 4px;" class="svelte-14nyow8"><span class="svelte-14nyow8">20 Hz</span> <span style="color: #4a9eff; font-weight: 500;" class="svelte-14nyow8"><!></span> <span class="svelte-14nyow8">100 Hz</span></div></div> <div style="margin-top: 10px; padding: 8px; background: rgba(74, 158, 255, 0.12); border-radius: 4px; font-size: 0.8em;" class="svelte-14nyow8"><div style="font-weight: 500; color: #4a9eff; margin-bottom: 3px;" class="svelte-14nyow8"><!></div> <div style="color: #aaa; font-size: 0.9em;" class="svelte-14nyow8"><!></div></div></div>'),is=pe('<div class="drag-handle svelte-14nyow8" title="Drag to move">â‹®â‹®</div>'),ss=pe('<div><!> <div style="display:flex;gap:12px;align-items:center;" class="svelte-14nyow8"><button class="speed-btn svelte-14nyow8">âˆ’</button> <div style="text-align:center;min-width:120px;" class="svelte-14nyow8"><div class="speed-display svelte-14nyow8"> </div> <div style="font-size:11px;opacity:0.6;margin-top:4px;" class="svelte-14nyow8">Rotation Speed</div></div> <button class="speed-btn svelte-14nyow8">+</button></div></div>'),rs=pe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Use +/âˆ’ buttons above to adjust speed)</em>'),os=pe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Touch: drag up to speed up, down to slow down)</em>'),ls=pe('<div class="svelte-14nyow8"><strong class="svelte-14nyow8">Circle:</strong> </div>'),cs=pe('<div class="panel svelte-14nyow8"><!> <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><button> </button> <button class="svelte-14nyow8">Reverse</button> <!> <button class="svelte-14nyow8">Apply Suggested Speed</button> <div class="gif-export-group svelte-14nyow8"><button class="save-gif-btn svelte-14nyow8"> </button> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">Frames:</span> <input type="number" min="6" step="1" style="width:80px;padding:4px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <span style="font-size:11px;opacity:0.6;" title="Leave empty for auto-detection" class="svelte-14nyow8"><!></span></label> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">FPS:</span> <select style="padding:4px;border-radius:4px;border:1px solid #ccc;background:#333;color:white;" class="svelte-14nyow8"><option class="svelte-14nyow8">3 (Ultra Slow)</option><option class="svelte-14nyow8">5 (Very Slow)</option><option class="svelte-14nyow8">8 (Slow)</option><option class="svelte-14nyow8">10 (Classic)</option><option class="svelte-14nyow8">15 (Natural)</option><option class="svelte-14nyow8">20 (Smooth)</option><option class="svelte-14nyow8">24 (Cinema)</option><option class="svelte-14nyow8">30 (Fast)</option></select></label></div> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Show Overlay</span></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Flicker Effect</span> <!></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Fill Outer Circle</span> <!></label></div> <!> <!> <div style="margin-top:12px;" class="svelte-14nyow8"><div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><div class="svelte-14nyow8"><strong class="svelte-14nyow8">Current Speed:</strong> <!></div> <div style="display:flex;gap:6px;align-items:center;" class="svelte-14nyow8"><label for="manual-speed-input" style="font-size:12px;" class="svelte-14nyow8">Type speed:</label> <input id="manual-speed-input" type="number" min="1" step="1" style="width:100px;padding:6px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <button class="svelte-14nyow8">Set</button></div></div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Selected scenes count:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Suggested speed:</strong> </div> <!></div></div>');function fs(n,i){mn(i,!1);const a=()=>j(Tt,"$isPlaying",u),l=()=>j(vn,"$detectedCircle",u),p=()=>j(lt,"$rotationSpeed",u),s=()=>j(Yt,"$imageUrl",u),f=()=>j(fa,"$canvasTransform",u),v=()=>j(da,"$playerCanvas",u),x=()=>j(At,"$gifFrameCount",u),g=()=>j(pa,"$isMobile",u),c=()=>j(gn,"$detectedCount",u),w=()=>j(pn,"$suggestedRotationSpeed",u),b=()=>j(ca,"$overlayVisible",u),k=()=>j(wt,"$editMode",u),S=()=>j(ua,"$flickerEnabled",u),m=()=>j(Je,"$flickerFrequency",u),r=()=>j(Gt,"$fillOuterCircle",u),h=()=>j(Ut,"$outerCircleFillColor",u),[u,E]=On(),R=ie(),T=ie(),G=ie(),_=ie(),$=ie(),e=ie();let ee=ie(!1),z=ie(!1);async function ye(){Tt.update(o=>!o)}let W=null;function Y(o){o==="increase"?re():Ye(),W&&clearInterval(W),W=setInterval(()=>{o==="increase"?re():Ye()},100)}function J(){W&&(clearInterval(W),W=null)}function re(){lt.update(o=>Math.min(1e4,o+60)),$t.set(!0)}function Ye(){lt.update(o=>Math.max(10,o-60)),$t.set(!0)}function Fe(){la.update(o=>o*-1)}async function Xe(){if(!s())return;const M=Date.now();dn.set({active:!0,progress:0,startTime:M}),wt.set(!0)}async function et(){const o=s();if(!o)return;P(ee,!0);const M=f();wt.set(!1);const Z=Date.now();dn.set({active:!0,progress:0,startTime:Z}),a()||requestAnimationFrame(()=>{});try{const Q=await at(o);let ae=null;const se=v();if(se){const Ae=se.clientWidth,dt=se.clientHeight,Ue=Q.width/Q.height,an=Ae/dt;let bt,sn;Ue>an?(bt=Ae,sn=Ae/Ue):(sn=dt,bt=dt*Ue);const Tn=-M.translateX,Gn=-M.translateY,Un=Tn/M.scale,Yn=Gn/M.scale,rn=Q.width/bt,on=Un*rn+Q.width/2,Xn=Yn*rn+Q.height/2;ae={x:on,y:Xn,r:Math.min(Q.width,Q.height)/2*.9}}ae||(ae={x:Q.width/2,y:Q.height/2,r:Math.min(Q.width,Q.height)/2*.9});const he=await Gi(Q,ae,{samples:720}),st=2e3-(Date.now()-Z);st>0&&await new Promise(Ae=>setTimeout(Ae,st)),vn.set(ae),gn.set(he.count),Rn.set(he.positions||[]);const rt=(he.count>0?360/he.count:1)*30;pn.set(rt),dn.set({active:!1,progress:1,startTime:Z}),Et.set(!0),Tt.set(!1)}finally{P(ee,!1)}}function xe(){pn.subscribe(o=>{o&&(lt.set(o),$t.set(!0))})()}function vt(){wt.set(!1),Et.set(!1),dn.set({active:!1,progress:0,startTime:0})}let _t=ie(0);function ct(){const o=Number(t(_t))||0;o<0||(lt.set(o),$t.set(!0))}let gt=ie(!1),tt=ie(15);async function nt(){const o=s()||Nt(Yt);if(!o)return alert("No image loaded to export.");if(!t(G))return alert("Please detect the circle before exporting the GIF.");const M=await at(o),Z=document.createElement("canvas");Z.width=M.width,Z.height=M.height,Z.getContext("2d").drawImage(M,0,0,M.width,M.height),P(gt,!0);try{let ae;t(T)&&t(T)!==t(_)*2?ae=t(T):t(_)&&t(_)>0?ae=Math.max(12,t(_)*2):ae=t(T)||24;const se=t(G),he=Number(Nt(lt)||0),je=Number(Nt(la)||1),st=360/ae,Ve=Nt(It)||0,Ge=Nt(Gt),rt=Nt(Ut),Ae=Ui(Z,ae,{circle:se,margin:1.1,zoom:1,fps:t(tt),rotationSpeed:st*t(tt),direction:je,initialRotation:Ve,fillOuterCircle:Ge,fillColor:rt}),dt=await Ki(Ae,t(tt)),Ue=document.createElement("a");Ue.href=dt;const an=new Date().toISOString().slice(0,19).replace(/:/g,"-");Ue.download=`phenaki-lab_${an}_${Ae.length}frames_${t(tt)}fps.gif`,document.body.appendChild(Ue),Ue.click(),Ue.remove()}catch(ae){console.error("GIF export failed",ae),alert("GIF export failed: "+(ae&&ae.message))}finally{P(gt,!1)}}const We="phenaki.speedControlPos";let K=ie({left:null,top:null}),yt=ie(!1),xt=ie(!1),Dt={x:0,y:0},Ft={left:0,top:0},Mt=0;function Xt(){try{const o=localStorage.getItem(We);o&&P(K,JSON.parse(o))}catch{}}function kt(){try{localStorage.setItem(We,JSON.stringify(t(K)))}catch{}}function wn(o){const M=Date.now(),Z=M-Mt<300;if(Mt=M,o.target&&o.target.closest&&o.target.closest("button"))return;const Q=o.target&&o.target.closest&&o.target.closest(".drag-handle"),ae=g(),se=o.target&&o.target.closest&&(o.target.classList.contains("speed-display")||o.target.closest(".speed-display"));if(!(!Q&&!Z&&!ae&&!se)&&!(ae&&!Q&&!se)){P(yt,!0),P(xt,!0),Dt={x:o.clientX,y:o.clientY},Ft={left:t(K).left??Math.round((window.innerWidth-200)/2),top:t(K).top??Math.round((window.innerHeight-80)/2)};try{o.target.setPointerCapture(o.pointerId)}catch{}window.addEventListener("pointermove",Bt),window.addEventListener("pointerup",U)}}function Bt(o){if(!t(xt))return;const M=o.clientX-Dt.x,Z=o.clientY-Dt.y;de(K,t(K).left=Math.round(Ft.left+M)),de(K,t(K).top=Math.round(Ft.top+Z))}function U(o){P(xt,!1),P(yt,!1);try{o.target.releasePointerCapture&&o.target.releasePointerCapture(o.pointerId)}catch{}window.removeEventListener("pointermove",Bt),window.removeEventListener("pointerup",U),kt()}ma(()=>{Xt(),t(K).left==null&&de(K,t(K).left=Math.round((window.innerWidth-200)/2)),t(K).top==null&&de(K,t(K).top=Math.round((window.innerHeight-80)/2));function o(){const he=Math.max(8,window.innerWidth-200-8),je=Math.max(8,window.innerHeight-80-8);t(K).left==null&&de(K,t(K).left=he),t(K).top==null&&de(K,t(K).top=je),de(K,t(K).left=Math.min(Math.max(t(K).left,8),he)),de(K,t(K).top=Math.min(Math.max(t(K).top,8),je))}o();const M=()=>{o(),kt()};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)});function at(o){return new Promise((M,Z)=>{const Q=new Image;Q.crossOrigin="anonymous",Q.onload=()=>M(Q),Q.onerror=Z,Q.src=o})}Ie(()=>a(),()=>{a()&&P(z,!0)}),Ie(()=>(l(),a(),p()),()=>{P(R,!!l()&&a()&&p()>0)}),Ie(()=>p(),()=>{P(_t,Number(p()||0))}),Ie(()=>x(),()=>{P(T,x())}),Ie(()=>l(),()=>{P(G,l())}),Ie(()=>c(),()=>{P(_,c())}),Ie(()=>w(),()=>{P($,w())}),Ie(()=>b(),()=>{P(e,b())}),ga(),qn();var it=cs(),_n=F(it);{var Vt=o=>{var M=Zi();D(o,M)};le(_n,o=>{t(gt)&&o(Vt)})}var Lt=y(_n,2),ft=F(Lt);let Jt;var yn=F(ft,!0);L(ft);var Kt=y(ft,2),xn=y(Kt,2);{var Zt=o=>{var M=Qi(),Z=Ke(M),Q=y(Z,2);Te(()=>Z.disabled=t(ee)),N("click",Z,et),N("click",Q,vt),D(o,M)},Qt=o=>{var M=es();Te(()=>{Fn(M,1,Sa(t(G)?"":"detect-btn-required"),"svelte-14nyow8"),M.disabled=t(ee)||!s()||a()}),N("click",M,Xe),D(o,M)};le(xn,o=>{k()?o(Zt):o(Qt,!1)})}var qt=y(xn,2),Me=y(qt,2),Be=F(Me),Mn=F(Be,!0);L(Be);var Ot=y(Be,2),St=y(F(Ot),2);Pt(St);var kn=y(St,2),zn=F(kn);{var d=o=>{var M=_e("Manual");D(o,M)},C=o=>{var M=pt(),Z=Ke(M);{var Q=se=>{var he=_e("Auto (x2)");D(se,he)},ae=se=>{var he=_e("Auto");D(se,he)};le(Z,se=>{t(_)?se(Q):se(ae,!1)},!0)}D(o,M)};le(zn,o=>{t(T)?o(d):o(C,!1)})}L(kn),L(Ot);var X=y(Ot,2),te=y(F(X),2);Te(()=>{t(tt),Ra(()=>{})});var oe=F(te);oe.value=oe.__value=3;var B=y(oe);B.value=B.__value=5;var ve=y(B);ve.value=ve.__value=8;var Ce=y(ve);Ce.value=Ce.__value=10;var Pe=y(Ce);Pe.value=Pe.__value=15;var ke=y(Pe);ke.value=ke.__value=20;var q=y(ke);q.value=q.__value=24;var V=y(q);V.value=V.__value=30,L(te),L(X),L(Me);var H=y(Me,2),A=F(H);Pt(A),Dn(2),L(H);var O=y(H,2),I=F(O);Pt(I);var ge=y(I,4);{var $e=o=>{var M=ts(),Z=F(M);L(M),Te(()=>ze(Z,`${m()??""} Hz`)),D(o,M)};le(ge,o=>{S()&&o($e)})}L(O);var we=y(O,2),ne=F(we);Pt(ne);var mt=y(ne,4);{var Hn=o=>{var M=ns();Pt(M),Ia(M,h,Z=>na(Ut,Z)),D(o,M)};le(mt,o=>{r()&&o(Hn)})}L(we),L(Lt);var Sn=y(Lt,2);{var Wn=o=>{var M=as(),Z=y(F(M),4),Q=y(F(Z),2),ae=F(Q),se=y(ae,2),he=y(se,2),je=y(he,2),st=y(je,2),Ve=y(st,2),Ge=y(Ve,2),rt=y(Ge,2);L(Q),L(Z);var Ae=y(Z,2),dt=F(Ae),Ue=y(F(dt),2),an=F(Ue);L(Ue),L(dt);var bt=y(dt,2);Pt(bt);var sn=y(bt,2),Tn=y(F(sn),2),Gn=F(Tn);{var Un=ue=>{var De=_e("ðŸ”´ Flicker");D(ue,De)},Yn=ue=>{var De=pt(),ln=Ke(De);{var cn=me=>{var qe=_e("ðŸŸ¡ Fusion");D(me,qe)},fn=me=>{var qe=_e("ðŸŸ¢ Smooth");D(me,qe)};le(ln,me=>{m()<60?me(cn):me(fn,!1)},!0)}D(ue,De)};le(Gn,ue=>{m()<40?ue(Un):ue(Yn,!1)})}L(Tn),Dn(2),L(sn),L(Ae);var rn=y(Ae,2),on=F(rn),Xn=F(on);{var Na=ue=>{var De=_e("âš¡ Strong Flicker");D(ue,De)},ja=ue=>{var De=pt(),ln=Ke(De);{var cn=me=>{var qe=_e("ðŸŽ¯ Critical Threshold");D(me,qe)},fn=me=>{var qe=pt(),Bn=Ke(qe);{var Vn=Oe=>{var ut=_e("âœ¨ Near-Fusion");D(Oe,ut)},Jn=Oe=>{var ut=pt(),Kn=Ke(ut);{var Zn=Re=>{var Ct=_e("ðŸŽ¬ Cinema (60 Hz)");D(Re,Ct)},Qn=Re=>{var Ct=_e("ðŸŒŸ Ultra Smooth");D(Re,Ct)};le(Kn,Re=>{m()<62?Re(Zn):Re(Qn,!1)},!0)}D(Oe,ut)};le(Bn,Oe=>{m()<58?Oe(Vn):Oe(Jn,!1)},!0)}D(me,qe)};le(ln,me=>{m()<52?me(cn):me(fn,!1)},!0)}D(ue,De)};le(Xn,ue=>{m()<48?ue(Na):ue(ja,!1)})}L(on);var _a=y(on,2),Ga=F(_a);{var Ua=ue=>{var De=_e("Noticeable flicker - classic phenakistoscope effect");D(ue,De)},Ya=ue=>{var De=pt(),ln=Ke(De);{var cn=me=>{var qe=_e("Flicker begins to fuse - critical threshold");D(me,qe)},fn=me=>{var qe=pt(),Bn=Ke(qe);{var Vn=Oe=>{var ut=_e("Subtle pulsing - artistic sweet spot");D(Oe,ut)},Jn=Oe=>{var ut=pt(),Kn=Ke(ut);{var Zn=Re=>{var Ct=_e("Standard cinema/TV rate - minimal flicker");D(Re,Ct)},Qn=Re=>{var Ct=_e("Above fusion threshold - very smooth");D(Re,Ct)};le(Kn,Re=>{m()<62?Re(Zn):Re(Qn,!1)},!0)}D(Oe,ut)};le(Bn,Oe=>{m()<58?Oe(Vn):Oe(Jn,!1)},!0)}D(me,qe)};le(ln,me=>{m()<52?me(cn):me(fn,!1)},!0)}D(ue,De)};le(Ga,ue=>{m()<48?ue(Ua):ue(Ya,!1)})}L(_a),L(rn),L(M),Te(()=>{ot(ae,`padding: 8px 14px; border: 1px solid ${m()===30?"#c92a2a":"#555"}; background: ${m()===30?"#c92a2a":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(se,`padding: 8px 14px; border: 1px solid ${m()===42?"#ff6b6b":"#555"}; background: ${m()===42?"#ff6b6b":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(he,`padding: 8px 14px; border: 1px solid ${m()===50?"#ffa500":"#555"}; background: ${m()===50?"#ffa500":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(je,`padding: 8px 14px; border: 1px solid ${m()===55?"#4a9eff":"#555"}; background: ${m()===55?"#4a9eff":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(st,`padding: 8px 14px; border: 1px solid ${m()===60?"#51cf66":"#555"}; background: ${m()===60?"#51cf66":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(Ve,`padding: 8px 14px; border: 1px solid ${m()===70?"#845ef7":"#555"}; background: ${m()===70?"#845ef7":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(Ge,`padding: 8px 14px; border: 1px solid ${m()===80?"#20c997":"#555"}; background: ${m()===80?"#20c997":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ot(rt,`padding: 8px 14px; border: 1px solid ${m()===100?"#12b886":"#555"}; background: ${m()===100?"#12b886":"#333"}; color: white; border-radius: 6px; cursor: pointer; font-size: 0.9em; min-height: 40px;`),ze(an,`${m()??""} Hz`),Pa(bt,m())}),N("click",ae,()=>Je.set(30)),N("click",se,()=>Je.set(42)),N("click",he,()=>Je.set(50)),N("click",je,()=>Je.set(55)),N("click",st,()=>Je.set(60)),N("click",Ve,()=>Je.set(70)),N("click",Ge,()=>Je.set(80)),N("click",rt,()=>Je.set(100)),N("input",bt,ue=>Je.set(+ue.target.value)),D(o,M)};le(Sn,o=>{S()&&o(Wn)})}var Cn=y(Sn,2);{var Pn=o=>{var M=ss(),Z=F(M);{var Q=Ge=>{var rt=is();D(Ge,rt)};le(Z,Ge=>{(t(yt)||g())&&Ge(Q)})}var ae=y(Z,2),se=F(ae),he=y(se,2),je=F(he),st=F(je);L(je),Dn(2),L(he);var Ve=y(he,2);L(ae),L(M),Te((Ge,rt,Ae)=>{Fn(M,1,`speed-control ${t(yt)?"dragMode":""} ${t(xt)?"dragging":""} ${g()?"mobile":""}`,"svelte-14nyow8"),ot(M,`left: ${Ge??""}px; top: ${rt??""}px;`),ze(st,`${Ae??""}Â°/s`)},[()=>(t(K),Qe(()=>t(K).left??Math.round((window.innerWidth-200)/2))),()=>(t(K),Qe(()=>t(K).top??Math.round((window.innerHeight-80)/2))),()=>(p(),Qe(()=>p().toFixed(0)))]),N("pointerdown",se,Se(()=>Y("decrease"))),N("pointerup",se,Se(J)),N("pointerleave",se,Se(J)),N("pointercancel",se,Se(J)),N("pointerdown",Ve,Se(()=>Y("increase"))),N("pointerup",Ve,Se(J)),N("pointerleave",Ve,Se(J)),N("pointercancel",Ve,Se(J)),N("pointerdown",M,wn),D(o,M)};le(Cn,o=>{l()&&o(Pn)})}var $n=y(Cn,2),en=F($n),Rt=F(en),tn=y(F(Rt)),In=y(tn);{var Nn=o=>{var M=rs();D(o,M)},jn=o=>{var M=os();D(o,M)};le(In,o=>{g()?o(Nn):o(jn,!1)})}L(Rt);var nn=y(Rt,2),zt=y(F(nn),2);Pt(zt);var Ht=y(zt,2);L(nn),L(en);var ce=y(en,2),be=y(F(ce));L(ce);var Le=y(ce,2),Ee=y(F(Le));L(Le);var Ne=y(Le,2);{var Wt=o=>{var M=ls(),Z=y(F(M));L(M),Te((Q,ae,se)=>ze(Z,` x=${Q??""}, y=${ae??""}, r=${se??""}`),[()=>(t(G),Qe(()=>Math.round(t(G).x))),()=>(t(G),Qe(()=>Math.round(t(G).y))),()=>(t(G),Qe(()=>Math.round(t(G).r)))]),D(o,M)};le(Ne,o=>{t(G)&&o(Wt)})}L($n),L(it),Te((o,M)=>{Jt=Fn(ft,1,Sa(t(G)&&!a()?"play-highlight":""),"svelte-14nyow8",Jt,{"pause-subtle":a()&&!t(G)}),ft.disabled=!s(),ze(yn,a()?"Pause":"Play"),qt.disabled=!t($),Be.disabled=!t(R)||t(gt),ze(Mn,t(gt)?"â³ Exporting...":"ðŸ’¾ Save GIF"),Ln(St,"placeholder",t(_)?`Auto (${t(_)*2})`:"Auto (24)"),Pa(St,x()),Di(A,t(e)),ze(tn,` ${o??""}Â°/s | `),ze(be,` ${x()??12??""}`),ze(Ee,` ${M??""}Â°/s`)},[()=>(p(),Qe(()=>p().toFixed(0))),()=>(t($),Qe(()=>t($)?t($).toFixed(0):"â€”"))]),N("click",ft,ye),N("click",Kt,Fe),N("click",qt,xe),N("click",Be,nt),N("input",St,o=>At.set(o.target.value?Number(o.target.value):null)),Wa(te,()=>t(tt),o=>P(tt,o)),N("change",A,o=>ca.set(o.target.checked)),Ta(I,S,o=>na(ua,o)),Ta(ne,r,o=>na(Gt,o)),Ia(zt,()=>t(_t),o=>P(_t,o)),N("click",Ht,ct),D(n,it),bn(),E()}var ds=pe('<span class="current-image svelte-ai08gq" title="Currently loaded image"> </span>'),us=pe("<option> </option>"),ps=pe('<div class="selector svelte-ai08gq"><label for="samples" class="svelte-ai08gq">Sample Images:</label> <!> <select id="samples" class="svelte-ai08gq"><option>-- Choose a sample --</option><!></select></div>');function hs(n,i){mn(i,!1);const a=()=>j(Ea,"$selectedImageName",l),[l,p]=On(),s="https://raw.githubusercontent.com/tclaret/phenakistoscope-simulator/main/images",f="https://raw.githubusercontent.com/tclaret/phenaki-lab/main/img",v=[{name:"Colors",file:"colors.png",repo:"new"},{name:"Medium 1990",file:"medium_1990_5036_7181_6_1.png",repo:"new"},{name:"Cats et Donkey",file:"optical-toy-phenakistiscope-disc-avec-cats-et-donkey-ca-1830-2efx315.jpg",repo:"new"},{name:"Dancing Man Animated",file:"Optical_Toy,_Phenakistiscope_Disc_with_Dancing_Man,_ca._1835-Animated.jpg",repo:"new"},{name:"PhÃ©nakistiscope 2",file:"phÃ©nakistiscope2.png",repo:"new"},{name:"Disque Animation 29",file:"phenakistiscope-disque-animation-29.jpg",repo:"new"},{name:"S-L1600 1",file:"s-l1600_1.jpg",repo:"new"},{name:"S-L1600",file:"s-l1600.jpg",repo:"new"},{name:"Hash 045377",file:"045377654e8832d31b850c8c4b7f948b.png",repo:"new"},{name:"Hash 062901",file:"062901e866b6aca4078ae7ff0be74c24.png",repo:"new"},{name:"Hash 0a23fe",file:"0a23fe78862b095518e46a3472238510.png",repo:"new"},{name:"Hash 14ea08",file:"14ea08f701861d967d455220ea8ca7ed.jpg",repo:"new"},{name:"Hash 1928bd",file:"1928bda6cad5fd3cd27d13ce70a502dc.jpg",repo:"new"},{name:"Hash 2d003d",file:"2d003d9b4e81a933bbfbdd55c8b1e261.png",repo:"new"},{name:"Hash 2e4cd2",file:"2e4cd248fbe57af9798c7e3c1c23b58c.jpg",repo:"new"},{name:"Hash 40bd2a",file:"40bd2aead0fc9a6e77d23871555a2998.png",repo:"new"},{name:"Hash 43efde",file:"43efdef999a2fa3200506f97d9e1ef10.png",repo:"new"},{name:"Hash 494697",file:"49469753b75adf62fe324641a2869c53.png",repo:"new"},{name:"Hash 4ca70e",file:"4ca70ec79b59935fb0eed9992045e4fb.jpg",repo:"new"},{name:"Hash 4e6b0c",file:"4e6b0c0e4fde0ad2ad8f4797304b037b.jpg",repo:"new"},{name:"Hash 4f3ab9",file:"4f3ab9e63d43062d25dfc6e4108635fb.png",repo:"new"},{name:"Hash 686b5e",file:"686b5e679b990dd996d0a4a3fb943d2d.png",repo:"new"},{name:"Hash 6f5755",file:"6f57558627d849a8d2b3f9a430bacba2.jpg",repo:"new"},{name:"Hash 75fd29",file:"75fd29a0318c3cf0fdaf8a41d1406cf2.png",repo:"new"},{name:"Hash 8efd4b",file:"8efd4b2b51765d9efdde621251b08968.jpg",repo:"new"},{name:"Hash 90cbee",file:"90cbeedafdef22534d24d04bc44b518f.jpg",repo:"new"},{name:"Hash 954abf",file:"954abf22a1f89759204818d3c0592234.png",repo:"new"},{name:"Hash 9799d6",file:"9799d6d1766b1add766629adec031867.png",repo:"new"},{name:"Hash a0767f",file:"a0767fc0712f1a9eeac238e72b6b2721.png",repo:"new"},{name:"Hash b18a11",file:"b18a11d1a8355081b70a3d91347236b1.jpg",repo:"new"},{name:"Hash bf2932",file:"bf29325ee951619c061902200c8e1143.png",repo:"new"},{name:"Hash e1de4a",file:"e1de4a32cb1bafa33166d51bf8ae2f35.png",repo:"new"},{name:"Hash e59f95",file:"e59f952d6ef4e9c391ea10e143e55b23.png",repo:"new"},{name:"Hash e6582e",file:"e6582e848b0aca99c134d23365c08fdb.png",repo:"new"},{name:"Hash ebd3d3",file:"ebd3d33285d243f86e54df78b9cc69ac.png",repo:"new"},{name:"Woman Chopping Tree",file:"WomanChoppingTree.jpg",repo:"old"},{name:"Dancing",file:"Dancing.jpg",repo:"old"},{name:"Jongleur",file:"Jongleur.png",repo:"old"},{name:"a_cheval",file:"a_cheval.png",repo:"old"},{name:"McLean_1",file:"McLean_1.png",repo:"old"},{name:"Gernamy_1949",file:"Gernamy_1949_R_Balzer.png",repo:"old"},{name:"AEO175939",file:"AEO175939_PhenakistoscopeGiroux60.jpg",repo:"old"},{name:"AEO185553",file:"AEO185553_PhenakistiscopeDisc_ManInBlueAndRed.jpg",repo:"old"},{name:"medium_1990_5036_3369",file:"medium_1990_5036_3369.jpg",repo:"old"},{name:"medium_a001813b",file:"medium_a001813b.jpg",repo:"old"},{name:"tumblr_obd6fh",file:"tumblr_obd6fhGFSZ1r9jbwno1_500.png",repo:"old"},{name:"tumblr_oc1cz",file:"tumblr_oc1czn99ZM1r9jbwno1_500.png",repo:"old"},{name:"Phantasmascope Faces",file:"Phantasmascope_faces.png",repo:"old"},{name:"722a6790240569.5e126845d9b56",file:"722a6790240569.5e126845d9b56.png",repo:"old"},{name:"Fantascope Disc 1833",file:"fantascope-disc-1833.png",repo:"old"},{name:"Face",file:"a_face__.jpg",repo:"new"},{name:"Culbute",file:"culbute.jpg",repo:"new"},{name:"Grenouille",file:"Grenouille__.jpg",repo:"new"},{name:"Oh Soccer",file:"oh_soccer.jpg",repo:"new"},{name:"Un Grand Un Petit",file:"un_grand_un_petit.jpg",repo:"new"},{name:"Autre Culbutte",file:"autre_culbutte.jpg",repo:"new"},{name:"Dancing 2",file:"dancing_.jpg",repo:"new"},{name:"Il Pompe de l'eau",file:"il_pompe_de_leau.jpg",repo:"new"},{name:"Porceline",file:"porceline.jpg",repo:"new"},{name:"Volants",file:"volants_.png",repo:"new"},{name:"Ce Qui",file:"ce_qui.jpg",repo:"new"},{name:"Des Anges",file:"des_anges.jpg",repo:"new"},{name:"Moulin",file:"moulin_.jpg",repo:"new"},{name:"Rats",file:"rats__.jpg",repo:"new"},{name:"Corde Ã  Danser",file:"corde_a_denser_.jpg",repo:"new"},{name:"Ecureuil",file:"ecureuil.jpg",repo:"new"},{name:"Noel Noel",file:"noel_noel.jpg",repo:"new"},{name:"Tirreur",file:"tirreur_.jpg",repo:"new"},{name:"C Pastel",file:"c_pastel.jpg",repo:"new"},{name:"GÃ©omÃ©trique",file:"geometrique.jpg",repo:"new"},{name:"Nuages en Scie",file:"nuages_en_scie.jpg",repo:"new"},{name:"Tons Pastels",file:"tons_pastels.jpg",repo:"new"},{name:"Des Ouiseaux",file:"DesOuaisaux.png",repo:"new"},{name:"Feels Like Flying",file:"feels_like_flying.png",repo:"new"},{name:"Gros Meusieur",file:"GrosMeusieur.png",repo:"new"},{name:"Jongle avec les Otaries",file:"Jongle_avec_les_otaries.png",repo:"new"},{name:"CinÃ©mathÃ¨que 1",file:"cinemateque_francaise_1.png",repo:"new"},{name:"CinÃ©mathÃ¨que 2",file:"cinemateque_francaise_2.png",repo:"new"},{name:"CinÃ©mathÃ¨que 3",file:"cinemateque_francaise_3.png",repo:"new"},{name:"CinÃ©mathÃ¨que 4",file:"cinemateque_francaise_4.png",repo:"new"},{name:"CinÃ©mathÃ¨que 5",file:"cinemateque_francaise_5.png",repo:"new"},{name:"CinÃ©mathÃ¨que 6",file:"cinemateque_francaise_6.png",repo:"new"},{name:"CinÃ©mathÃ¨que 7",file:"cinemateque_francaise_7.png",repo:"new"},{name:"CinÃ©mathÃ¨que 8",file:"cinemateque_francaise_8.png",repo:"new"},{name:"CinÃ©mathÃ¨que 9",file:"cinemateque_francaise_9.png",repo:"new"},{name:"CinÃ©mathÃ¨que 10",file:"cinemateque_francaise_10.png",repo:"new"},{name:"CinÃ©mathÃ¨que 11",file:"cinemateque_francaise_11.png",repo:"new"},{name:"CinÃ©mathÃ¨que 12",file:"cinemateque_francaise_12.png",repo:"new"},{name:"CinÃ©mathÃ¨que 13",file:"cinemateque_francaise_13.png",repo:"new"},{name:"CinÃ©mathÃ¨que 14",file:"cinemateque_francaise_14.png",repo:"new"},{name:"CinÃ©mathÃ¨que 15",file:"cinemateque_francaise_15.png",repo:"new"},{name:"CinÃ©mathÃ¨que 16",file:"cinemateque_francaise_16.png",repo:"new"},{name:"CinÃ©mathÃ¨que 17",file:"cinemateque_francaise_17.png",repo:"new"},{name:"CinÃ©mathÃ¨que 18",file:"cinemateque_francaise_18.png",repo:"new"},{name:"CinÃ©mathÃ¨que 19",file:"cinemateque_francaise_19.png",repo:"new"},{name:"CinÃ©mathÃ¨que 20",file:"cinemateque_francaise_20.png",repo:"new"},{name:"CinÃ©mathÃ¨que 21",file:"cinemateque_francaise_21.png",repo:"new"},{name:"CinÃ©mathÃ¨que 22",file:"cinemateque_francaise_22.png",repo:"new"},{name:"CinÃ©mathÃ¨que 23",file:"cinemateque_francaise_23.png",repo:"new"},{name:"CinÃ©mathÃ¨que 24",file:"cinemateque_francaise_24.png",repo:"new"},{name:"CinÃ©mathÃ¨que 25",file:"cinemateque_francaise_25.png",repo:"new"},{name:"Phenakistoscope 3g07692a",file:"Phenakistoscope_3g07692a.jpg",repo:"new"}];let x=ie("");function g(r){const u=`${r.repo==="new"?f:s}/${r.file}`;vn.set(null),gn.set(0),Rn.set([]),Et.set(!1),wt.set(!1),It.set(0),hn.set("move-center"),lt.set(0),pn.set(1),At.set(null),$t.set(!1),Gt.set(!1),Ut.set("#000000"),Yt.set(u),wa.set(u),Tt.set(!1),Ea.set(r.name),P(x,r.file)}ma(()=>{let r=!1;if(Yt.subscribe(u=>{u&&(r=!0)})(),!r){const u=v[Math.floor(Math.random()*v.length)];u&&g(u)}}),qn();var c=ps(),w=y(F(c),2);{var b=r=>{var h=ds(),u=F(h);L(h),Te(()=>ze(u,`ðŸ“· ${a()??""}`)),D(r,h)};le(w,r=>{a()&&r(b)})}var k=y(w,2);Te(()=>{t(x),Ra(()=>{})});var S=F(k);S.value=S.__value="";var m=y(S);ki(m,1,()=>v,r=>r.file,(r,h)=>{var u=us(),E=F(u,!0);L(u);var R={};Te(()=>{ze(E,t(h).name),R!==(R=t(h).file)&&(u.value=(u.__value=t(h).file)??"")}),D(r,u)}),L(k),L(c),Wa(k,()=>t(x),r=>P(x,r)),N("change",k,r=>{const h=r.target.selectedIndex-1;h>=0&&g(v[h])}),D(n,c),bn(),p()}var vs=pe('<div class="container svelte-1uha8ag"><h1 class="svelte-1uha8ag">Phenakistoscope Lab</h1> <p class="sub svelte-1uha8ag">Convert old phenakistoscope discs into animated GIFs</p> <div class="intro svelte-1uha8ag"><p class="svelte-1uha8ag">To create an animated GIF from a phenakistoscope image, select the correct number of frames according to the image, adjust the rotation speed, and then save it as a fast, slow, or normal animated GIF depending on your settings.</p></div> <!> <!> <!> <!> <!></div>');function Ms(n){var i=vs(),a=y(F(i),6);qi(a,{});var l=y(a,2);hs(l,{});var p=y(l,2);Ri(p,{});var s=y(p,2);ji(s,{});var f=y(s,2);fs(f,{}),L(i),D(n,i)}export{Ms as component};
