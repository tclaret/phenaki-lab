import{f as fe,a as E,c as qe,t as pe}from"../chunks/C2OulXxV.js";import"../chunks/u-GhMVP5.js";import{G as pr,v as Me,w as gr,g as t,av as mr,I as _r,J as wr,K as Fn,L as zn,M as an,D as Rt,a3 as yr,aq as br,aa as xr,x as He,C as pn,B as Hn,F as Mr,Q as ne,a1 as Rn,ao as Yn,aI as Xn,aJ as kr,y as Vn,A as Sr,aK as Pr,aL as Tr,aM as on,ak as Er,aN as Ir,aO as $r,an as Cr,z as Dr,aP as Mn,N as Ar,R as Lr,aQ as Fr,aR as zr,aS as Bn,aT as Rr,aU as Or,aV as Wr,P as Nr,aW as Gr,aX as Ur,aG as jr,b as Ae,O as Jn,p as Tt,j as Et,s as k,k as I,l as $,aY as Le,aZ as kn,i as Re,U as P,t as Te,a_ as te,a$ as qr,ab as ln}from"../chunks/BmgSzj6w.js";import{e as ce,s as Ce}from"../chunks/hAALANAn.js";import{i as Gt}from"../chunks/BgyTcsX8.js";import{w as ve,o as Sn,a as Hr,g as cn}from"../chunks/B3QUX6bn.js";import{i as se,s as Pn,a as Z,b as On,d as Yr}from"../chunks/Bv2EIizG.js";function Xr(e,a,r){for(var c=[],v=a.length,i=0;i<v;i++)Ir(a[i].e,c,!0);$r(c,()=>{var o=c.length===0&&r!==null;if(o){var h=r,x=h.parentNode;Cr(x),x.append(h),e.items.clear(),De(e,a[0].prev,a[v-1].next)}for(var p=0;p<v;p++){var l=a[p];o||(e.items.delete(l.k),De(e,l.prev,l.next)),Dr(l.e,!o)}e.first===a[0]&&(e.first=a[0].prev)})}function Vr(e,a,r,c,v,i=null){var o=e,h=new Map,x=null;Me&&gr();var p=null,l=mr(()=>{var u=r();return Xn(u)?u:u==null?[]:Yn(u)}),m,g=!0;function y(){Br(w,m,o,a,c),p!==null&&(m.length===0?(p.fragment?(o.before(p.fragment),p.fragment=null):Vn(p.effect),M.first=p.effect):Sr(p.effect,()=>{p=null}))}var M=pr(()=>{m=t(l);var u=m.length;let s=!1;if(Me){var f=_r(o)===wr;f!==(u===0)&&(o=Fn(),zn(o),an(!1),s=!0)}for(var n=new Set,C=He,S=null,q=Mr(),j=0;j<u;j+=1){Me&&Rt.nodeType===yr&&Rt.data===br&&(o=Rt,s=!0,an(!1));var z=m[j],G=c(z,j),R=g?null:h.get(G);R?(xr(R.v,z),R.i=j,q&&C.skipped_effects.delete(R.e)):(R=Jr(g?o:null,S,z,G,j,v,a,r),g&&(R.o=!0,S===null?x=R:S.next=R,S=R),h.set(G,R)),n.add(G)}if(u===0&&i&&!p)if(g)p={fragment:null,effect:pn(()=>i(o))};else{var ge=document.createDocumentFragment(),me=Hn();ge.append(me),p={fragment:ge,effect:pn(()=>i(me))}}if(Me&&u>0&&zn(Fn()),!g)if(q){for(const[L,A]of h)n.has(L)||C.skipped_effects.add(A.e);C.oncommit(y),C.ondiscard(()=>{})}else y();s&&an(!0),t(l)}),w={effect:M,items:h,first:x};g=!1,Me&&(o=Rt)}function Br(e,a,r,c,v){var i=a.length,o=e.items,h=e.first,x,p=null,l=[],m=[],g,y,M,w;for(w=0;w<i;w+=1){if(g=a[w],y=v(g,w),M=o.get(y),e.first??=M,!M.o){M.o=!0;var u=p?p.next:h;De(e,p,M),De(e,M,u),fn(M,u,r),p=M,l=[],m=[],h=p.next;continue}if((M.e.f&on)!==0&&Vn(M.e),M!==h){if(x!==void 0&&x.has(M)){if(l.length<m.length){var s=m[0],f;p=s.prev;var n=l[0],C=l[l.length-1];for(f=0;f<l.length;f+=1)fn(l[f],s,r);for(f=0;f<m.length;f+=1)x.delete(m[f]);De(e,n.prev,C.next),De(e,p,n),De(e,C,s),h=s,p=C,w-=1,l=[],m=[]}else x.delete(M),fn(M,h,r),De(e,M.prev,M.next),De(e,M,p===null?e.first:p.next),De(e,p,M),p=M;continue}for(l=[],m=[];h!==null&&h.k!==y;)(h.e.f&on)===0&&(x??=new Set).add(h),m.push(h),h=h.next;if(h===null)continue;M=h}l.push(M),p=M,h=M.next}let S=o.size>i;if(h!==null||x!==void 0){for(var q=x===void 0?[]:Yn(x);h!==null;)(h.e.f&on)===0&&q.push(h),h=h.next;var j=q.length;if(S=o.size-j>i,j>0){var z=null;Xr(e,q,z)}}if(S)for(const G of o.values())G.o||(De(e,p,G),p=G);e.effect.last=p&&p.e}function Jr(e,a,r,c,v,i,o,h){var x=(o&Pr)!==0,p=(o&Tr)===0,l=x?p?ne(r,!1,!1):Rn(r):r,m=(o&kr)===0?v:Rn(v),g={i:m,v:l,k:c,a:null,e:null,o:!1,prev:a,next:null};try{if(e===null){var y=document.createDocumentFragment();y.append(e=Hn())}return g.e=pn(()=>i(e,l,m,h)),a!==null&&(a.next=g),g}finally{}}function fn(e,a,r){for(var c=e.next?e.next.e.nodes_start:r,v=a?a.e.nodes_start:r,i=e.e.nodes_start;i!==null&&i!==c;){var o=Er(i);v.before(i),i=o}}function De(e,a,r){a===null?(e.first=r,e.effect.first=r&&r.e):(a.e.next&&(a.e.next.prev=null),a.next=r,a.e.next=r&&r.e),r!==null&&(r.e.prev&&(r.e.prev.next=null),r.prev=a,r.e.prev=a&&a.e)}function Zn(e){var a,r,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var v=e.length;for(a=0;a<v;a++)e[a]&&(r=Zn(e[a]))&&(c&&(c+=" "),c+=r)}else for(r in e)e[r]&&(c&&(c+=" "),c+=r);return c}function Zr(){for(var e,a,r=0,c="",v=arguments.length;r<v;r++)(e=arguments[r])&&(a=Zn(e))&&(c&&(c+=" "),c+=a);return c}function Wn(e){return typeof e=="object"?Zr(e):e??""}const Nn=[...` 	
\r\f¬†\v\uFEFF`];function Kr(e,a,r){var c=e==null?"":""+e;if(a&&(c=c?c+" "+a:a),r){for(var v in r)if(r[v])c=c?c+" "+v:v;else if(c.length)for(var i=v.length,o=0;(o=c.indexOf(v,o))>=0;){var h=o+i;(o===0||Nn.includes(c[o-1]))&&(h===c.length||Nn.includes(c[h]))?c=(o===0?"":c.substring(0,o))+c.substring(h+1):o=h}}return c===""?null:c}function Qr(e,a){return e==null?null:String(e)}function Wt(e,a,r,c,v,i){var o=e.__className;if(Me||o!==r||o===void 0){var h=Kr(r,c,i);(!Me||h!==e.getAttribute("class"))&&(h==null?e.removeAttribute("class"):e.className=h),e.__className=r}else if(i&&v!==i)for(var x in i){var p=!!i[x];(v==null||p!==!!v[x])&&e.classList.toggle(x,p)}return i}function ct(e,a,r,c){var v=e.__style;if(Me||v!==a){var i=Qr(a);(!Me||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=a}return c}function Kn(e,a,r=!1){if(e.multiple){if(a==null)return;if(!Xn(a))return Fr();for(var c of e.options)c.selected=a.includes(St(c));return}for(c of e.options){var v=St(c);if(zr(v,a)){c.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function es(e){var a=new MutationObserver(()=>{Kn(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Lr(()=>{a.disconnect()})}function ts(e,a,r=a){var c=new WeakSet,v=!0;Mn(e,"change",i=>{var o=i?"[selected]":":checked",h;if(e.multiple)h=[].map.call(e.querySelectorAll(o),St);else{var x=e.querySelector(o)??e.querySelector("option:not([disabled])");h=x&&St(x)}r(h),He!==null&&c.add(He)}),Ar(()=>{var i=a();if(e===document.activeElement){var o=Bn??He;if(c.has(o))return}if(Kn(e,i,v),v&&i===void 0){var h=e.querySelector(":checked");h!==null&&(i=St(h),r(i))}e.__value=i,v=!1}),es(e)}function St(e){return"__value"in e?e.__value:e.value}const ns=Symbol("is custom element"),rs=Symbol("is html");function Mt(e){if(Me){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var c=e.value;Nt(e,"value",null),e.value=c}if(e.hasAttribute("checked")){var v=e.checked;Nt(e,"checked",null),e.checked=v}}};e.__on_r=r,Nr(r),Gr()}}function ss(e,a){var r=Tn(e);r.value===(r.value=a??void 0)||e.value===a&&(a!==0||e.nodeName!=="PROGRESS")||(e.value=a??"")}function as(e,a){var r=Tn(e);r.checked!==(r.checked=a??void 0)&&(e.checked=a)}function Nt(e,a,r,c){var v=Tn(e);Me&&(v[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||v[a]!==(v[a]=r)&&(a==="loading"&&(e[Ur]=r),r==null?e.removeAttribute(a):typeof r!="string"&&is(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function Tn(e){return e.__attributes??={[ns]:e.nodeName.includes("-"),[rs]:e.namespaceURI===Rr}}var Gn=new Map;function is(e){var a=e.getAttribute("is")||e.nodeName,r=Gn.get(a);if(r)return r;Gn.set(a,r=[]);for(var c,v=e,i=Element.prototype;i!==v;){c=Wr(v);for(var o in c)c[o].set&&r.push(o);v=Or(v)}return r}function Un(e,a,r=a){var c=new WeakSet;Mn(e,"input",async v=>{var i=v?e.defaultValue:e.value;if(i=dn(e)?un(i):i,r(i),He!==null&&c.add(He),await jr(),i!==(i=a())){var o=e.selectionStart,h=e.selectionEnd,x=e.value.length;if(e.value=i??"",h!==null){var p=e.value.length;o===h&&h===x&&p>x?(e.selectionStart=p,e.selectionEnd=p):(e.selectionStart=o,e.selectionEnd=Math.min(h,p))}}}),(Me&&e.defaultValue!==e.value||Ae(a)==null&&e.value)&&(r(dn(e)?un(e.value):e.value),He!==null&&c.add(He)),Jn(()=>{var v=a();if(e===document.activeElement){var i=Bn??He;if(c.has(i))return}dn(e)&&v===un(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function os(e,a,r=a){Mn(e,"change",c=>{var v=c?e.defaultChecked:e.checked;r(v)}),(Me&&e.defaultChecked!==e.checked||Ae(a)==null)&&r(e.checked),Jn(()=>{var c=a();e.checked=!!c})}function dn(e){var a=e.type;return a==="number"||a==="range"}function un(e){return e===""?null:+e}const En=ve(null),dt=ve(null),st=ve(!1),Qe=ve(360),gn=ve(1),mn=ve(null),jn=ve(0),vn=ve(1),Qn=ve([]),_n=ve(!1),ft=ve(!1),Pt=ve(!1),wn=ve({translateX:0,translateY:0,scale:1}),kt=ve({active:!1,progress:0,startTime:0}),yn=ve(null),bn=ve(!1),Ke=ve(50),xn=ve(!1);var ls=fe('<label>Choose image: <input type="file" accept="image/*"/></label>');function cs(e,a){Tt(a,!1);function r(i){const o=i.target.files[0];if(!o)return;const h=URL.createObjectURL(o);En.set(h),dt.set(h),st.set(!0)}Gt();var c=ls(),v=k(I(c));$(c),ce("change",v,r),E(e,c),Et()}var fs=fe('<div class="preview svelte-1th6cal"><img alt="Selected disc preview" class="svelte-1th6cal"/></div>');function ds(e,a){Tt(a,!1);const r=()=>Z(En,"$previewUrl",c),[c,v]=Pn(),i=ne();Le(()=>r(),()=>{P(i,r())}),kn();var o=qe(),h=Re(o);{var x=p=>{var l=fs(),m=I(l);$(l),Te(()=>Nt(m,"src",t(i))),E(p,l)};se(h,p=>{t(i)&&p(x)})}E(e,o),Et(),v()}var us=fe('<div class="speed-hud svelte-byh4af"> </div>'),vs=fe('<div class="edit-mode-indicator svelte-byh4af">‚öôÔ∏è EDIT MODE - Drag to position ‚Ä¢ Scroll to zoom</div>'),hs=fe('<div><canvas class="svelte-byh4af"></canvas> <!> <!></div>');function ps(e,a){Tt(a,!1);const r=()=>Z(ft,"$editMode",w),c=()=>Z(st,"$isPlaying",w),v=()=>Z(dt,"$imageUrl",w),i=()=>Z(xn,"$isMobile",w),o=()=>Z(Qe,"$rotationSpeed",w),h=()=>Z(kt,"$detectionAnimation",w),x=()=>Z(gn,"$rotationDirection",w),p=()=>Z(mn,"$detectedCircle",w),l=()=>Z(_n,"$overlayVisible",w),m=()=>Z(Qn,"$detectedPositions",w),g=()=>Z(Pt,"$confirmedDetection",w),y=()=>Z(bn,"$flickerEnabled",w),M=()=>Z(Ke,"$flickerFrequency",w),[w,u]=Pn();let s=ne(),f=ne(),n,C=0,S=ne(1);const q=1,j=4;let z=ne(0),G=ne(0);const R=new Map;let ge=1,me=0,L=0,A=ne(),ee=ne(0),de=0,_e=1,ue=ne(!1),re,Ee=0,F=0,Oe=0,D=ne(null),Ie=ne(!1),Fe;function It(_){P(Ie,!1),P(D,new Image),te(D,t(D).crossOrigin="anonymous"),te(D,t(D).onload=()=>{console.log("Image loaded:",_,"Size:",t(D).width,"x",t(D).height),P(Ie,!0),ut(),ze()}),te(D,t(D).onerror=T=>{console.error("Erreur chargement:",_,T),P(Ie,!1)}),te(D,t(D).src=_)}function ut(){if(!t(f)||!t(s))return;const _=t(s).getBoundingClientRect(),T=window.devicePixelRatio||1;if(t(D)&&t(D).width&&t(D).height){const H=t(D).width,K=t(D).height,Q=Math.min(1400,Math.max(150,Math.round(_.width*Math.sqrt(H*H+K*K)/H)));te(s,t(s).style.height=Q+"px");const Y=t(s).getBoundingClientRect();te(f,t(f).style.width=Y.width+"px"),te(f,t(f).style.height=Y.height+"px"),te(f,t(f).width=Math.round(Y.width*T)),te(f,t(f).height=Math.round(Y.height*T))}else te(f,t(f).style.width=_.width+"px"),te(f,t(f).style.height=_.height+"px"),te(f,t(f).width=Math.round(_.width*T)),te(f,t(f).height=Math.round(_.height*T));n&&n.setTransform(T,0,0,T,0,0),ze()}Sn(()=>{const _=()=>{const H="ontouchstart"in window||navigator.maxTouchPoints>0||window.innerWidth<768;xn.set(H)};if(_(),window.addEventListener("resize",_),t(f)){if(yn.set(t(f)),n=t(f).getContext("2d"),t(s)){const T=()=>{i()?t(S)>1||r()?te(s,t(s).style.touchAction="none"):te(s,t(s).style.touchAction="pan-y"):te(s,t(s).style.touchAction="none")};T(),wn.subscribe(T),ft.subscribe(T)}t(s)&&t(s).addEventListener("wheel",gt,{passive:!1}),ut(),Fe=new ResizeObserver(()=>ut()),t(s)&&Fe.observe(t(s)),t(s)&&(t(s).addEventListener("pointerdown",vt),t(s).addEventListener("pointermove",at),t(s).addEventListener("pointerup",ht),t(s).addEventListener("pointerleave",pt))}return()=>{Fe&&Fe.disconnect(),window.removeEventListener("resize",_)}});function vt(_){if(!t(s))return;(r()||t(S)>1)&&(_.preventDefault(),_.stopPropagation()),t(s).setPointerCapture(_.pointerId),R.set(_.pointerId,{x:_.clientX,y:_.clientY});const T=Date.now(),H=_.clientX-F,K=_.clientY-Oe,Q=Math.sqrt(H*H+K*K);if(T-Ee<300&&Q<50&&!r()){st.update(Y=>!Y),R.clear(),Ee=0;return}if(Ee=T,F=_.clientX,Oe=_.clientY,R.size===1&&(me=_.clientX,L=_.clientY,de=_.clientY,_e=o()||1),R.size===2){const Y=Array.from(R.values());ge=t(S),at.pinchStartDist=Math.hypot(Y[0].x-Y[1].x,Y[0].y-Y[1].y)}}function at(_){if(t(s)){if((r()||t(S)>1)&&R.has(_.pointerId)&&(_.preventDefault(),_.stopPropagation()),R.has(_.pointerId)&&R.set(_.pointerId,{x:_.clientX,y:_.clientY}),R.size===2){const T=Array.from(R.values()),H=T[0],K=T[1],Q=Math.hypot(H.x-K.x,H.y-K.y),Y=at.pinchStartDist||Q,Ye=Q/Y;let Ne=Math.max(q,Math.min(j,ge*Ye));const $e={x:(H.x+K.x)/2,y:(H.y+K.y)/2},Xe=t(f).clientWidth,O=t(f).clientHeight,J=t(s).getBoundingClientRect(),X=$e.x-(J.left+Xe/2)-t(z),U=$e.y-(J.top+O/2)-t(G),V=t(S),he=Ne;P(z,t(z)-(he/V-1)*X),P(G,t(G)-(he/V-1)*U),P(S,Ne),P(ue,!0),clearTimeout(re);return}if(R.size===1){if(R.values().next().value,t(S)>1||r()){const T=_.clientX-me,H=_.clientY-L;P(z,t(z)+T),P(G,t(G)+H),me=_.clientX,L=_.clientY,ze();return}else if(!i()){const T=de-_.clientY,K=Math.round(T*8),Q=Math.max(10,Math.min(1e4,Math.round(_e+K)));Qe.set(Q),P(ue,!0),clearTimeout(re)}}}}function ht(_){if(t(s)){try{t(s).releasePointerCapture(_.pointerId)}catch{}clearTimeout(re),P(ue,!0),re=setTimeout(()=>{P(ue,!1)},4e3),R.delete(_.pointerId),R.size===0&&(clearTimeout(re),P(ue,!1))}}function pt(){clearTimeout(re),P(ue,!0),re=setTimeout(()=>{P(ue,!1)},4e3)}function gt(_){if(!t(s)||!_.ctrlKey&&!_.metaKey)return;_.preventDefault();const H=1+(-_.deltaY>0?.1:-.1),K=Math.max(q,Math.min(j,t(S)*H)),Q=t(s).getBoundingClientRect(),Y=_.clientX-(Q.left+t(f).clientWidth/2)-t(z),Ye=_.clientY-(Q.top+t(f).clientHeight/2)-t(G);P(z,t(z)-(K/t(S)-1)*Y),P(G,t(G)-(K/t(S)-1)*Ye),P(S,K),ze()}Hr(()=>{t(A)&&cancelAnimationFrame(t(A)),Fe&&Fe.disconnect(),re&&clearTimeout(re),t(s)&&(t(s).removeEventListener("pointerdown",vt),t(s).removeEventListener("pointermove",at),t(s).removeEventListener("pointerup",ht),t(s).removeEventListener("pointerleave",pt),t(s)&&t(s).removeEventListener("wheel",gt)),yn.set(null)});function it(_){const T=c()||h().active||r();if(!T||!t(Ie)){P(ee,0),!T&&t(A)&&(cancelAnimationFrame(t(A)),P(A,null));return}t(ee)||P(ee,_);const H=_-t(ee);if(P(ee,_),c()&&!r()){const K=o()||0;C+=K*(x()||1)*(H/1e3)}ze(),P(A,requestAnimationFrame(it))}function ze(){if(!t(Ie)||!n||!t(D)||!t(f)){console.log("DrawFrame skipped:",{imageReady:t(Ie),ctx:!!n,htmlImg:!!t(D),canvas:!!t(f)});return}const _=t(f).clientWidth,T=t(f).clientHeight;n.clearRect(0,0,_,T),n.save();const H=t(D).width/t(D).height,K=_/T;let Q,Y;H>K?(Q=_,Y=_/H):(Y=T,Q=T*H);const Ye=Q*t(S),Ne=Y*t(S);let $e=0,Xe=0;if(p()){const O=Q/t(D).width;$e=(p().x-t(D).width/2)*O*t(S),Xe=(p().y-t(D).height/2)*O*t(S)}if(n.translate(_/2+t(z),T/2+t(G)),n.translate($e,Xe),n.rotate(C*Math.PI/180),n.translate(-$e,-Xe),n.drawImage(t(D),-Ye/2,-Ne/2,Ye,Ne),l()&&p())try{const O=p(),J=Q*t(S)/t(D).width,X=(O.x-t(D).width/2)*J,U=(O.y-t(D).height/2)*J,V=O.r*J;n.beginPath(),n.lineWidth=Math.max(2,2),n.strokeStyle="rgba(255,160,0,0.85)",n.arc(X,U,V,0,Math.PI*2),n.stroke(),n.strokeStyle="rgba(255,160,0,0.85)",n.lineWidth=Math.max(2,2);const he=Math.max(15,V*.15);if(n.beginPath(),n.moveTo(X-he,U),n.lineTo(X+he,U),n.stroke(),n.beginPath(),n.moveTo(X,U-he),n.lineTo(X,U+he),n.stroke(),m()&&m().length){n.fillStyle="rgba(0,200,255,0.9)";for(const Ve of m()){const Ge=Ve.angle,tt=X+Math.cos(Ge)*V,Be=U+Math.sin(Ge)*V;n.beginPath(),n.arc(tt,Be,Math.max(2,Math.round(V*.03)),0,Math.PI*2),n.fill()}}}catch(O){console.warn("overlay draw failed",O)}if(r()&&!g())try{let O;if(r()){const J=h().startTime||0;O=(J>0?Date.now()-J:Date.now())%2e3/2e3}else O=Math.min(1,(Date.now()-h().startTime)/2e3);if(n.fillStyle=r()?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.3)",n.fillRect(-Q/2-100,-Y/2-100,Q+200,Y+200),p()){const J=p(),X=Q*t(S)/t(D).width,U=(J.x-t(D).width/2)*X,V=(J.y-t(D).height/2)*X,he=J.r*X;n.strokeStyle=`rgba(100, 200, 255, ${.8*(1-O)})`,n.lineWidth=2;for(let Be=0;Be<3;Be++){const mt=he*(.3+O*1.2+Be*.3);n.beginPath(),n.arc(U,V,mt,0,Math.PI*2),n.stroke()}n.strokeStyle="rgba(100, 200, 255, 0.9)",n.lineWidth=3;const Ve=O*Math.PI*6,Ge=he*1.8;n.beginPath(),n.moveTo(U,V),n.lineTo(U+Math.cos(Ve)*Ge,V+Math.sin(Ve)*Ge),n.stroke();const tt=4+Math.sin(O*Math.PI*4)*2;n.fillStyle=`rgba(100, 200, 255, ${.9*Math.sin(O*Math.PI)})`,n.beginPath(),n.arc(U,V,tt,0,Math.PI*2),n.fill(),n.fillStyle=`rgba(100, 200, 255, ${Math.sin(O*Math.PI)})`,n.font="bold 14px sans-serif",n.textAlign="center",n.fillText("SCANNING...",U,V-he-20)}else{const J=Math.max(Q,Y)/2;n.strokeStyle=`rgba(100, 200, 255, ${.6})`,n.lineWidth=2;for(let U=0;U<4;U++){const V=J*(O+U*.25)%1,he=1-V;n.strokeStyle=`rgba(100, 200, 255, ${he*.6})`,n.beginPath(),n.arc(0,0,V*J,0,Math.PI*2),n.stroke()}n.strokeStyle="rgba(100, 200, 255, 0.8)",n.lineWidth=3;const X=O*Math.PI*4;n.beginPath(),n.moveTo(0,0),n.lineTo(Math.cos(X)*J,Math.sin(X)*J),n.stroke(),n.fillStyle=`rgba(100, 200, 255, ${.8+.2*Math.sin(O*Math.PI*4)})`,n.font="bold 18px sans-serif",n.textAlign="center",r()?(n.fillText("‚öôÔ∏è EDIT MODE - ADJUST POSITION & ZOOM",0,-60),n.font="bold 16px sans-serif",n.fillStyle="rgba(255, 200, 100, 0.95)",n.fillText("üéØ Align crosshair with rotation center",0,-20),n.font="14px sans-serif",n.fillStyle="rgba(200, 255, 200, 0.9)",n.fillText("üëÜ Drag to move  ‚Ä¢  üîç Scroll/Pinch to zoom",0,20),n.font="bold 14px sans-serif",n.fillStyle="rgba(100, 255, 100, 0.9)",n.fillText('Click "Confirm Detection" when ready',0,60)):(n.fillText("ANALYZING IMAGE...",0,-20),n.font="12px sans-serif",n.fillText(`${Math.round(O*100)}%`,0,10))}}catch(O){console.warn("radar animation failed",O)}if(y()&&c()){const O=1e3/M(),J=t(ee)%O/O,X=Math.max(0,Math.min(1,(M()-40)/30));let U;if(X<.33?U=J>.5?.85:0:X<.67?U=Math.sin(J*Math.PI*2)*.5+.5>.6?.6:0:U=(Math.sin(J*Math.PI*2)*.5+.5)*.3,U>.05){const V=n.createRadialGradient(_/2,T/2,0,_/2,T/2,Math.max(_,T)*.8);V.addColorStop(0,`rgba(0, 0, 0, ${U*.7})`),V.addColorStop(.5,`rgba(0, 0, 0, ${U})`),V.addColorStop(1,`rgba(0, 0, 0, ${U*.9})`),n.fillStyle=V,n.fillRect(-_,-T,_*3,T*3),X<.5&&(n.fillStyle=`rgba(20, 20, 40, ${U*.15})`,n.fillRect(-_,-T,_*3,T*3))}}if(n.restore(),r()||g()){const O=Date.now()%1e3/1e3,J=.7+.3*Math.sin(O*Math.PI*2);n.save(),n.translate(_/2,T/2),n.strokeStyle=`rgba(255, 100, 0, ${J})`,n.lineWidth=4;const X=Math.min(_,T)*.1;n.beginPath(),n.arc(0,0,X*.7,0,Math.PI*2),n.stroke(),n.lineWidth=3,n.beginPath(),n.moveTo(-X,0),n.lineTo(X,0),n.stroke(),n.beginPath(),n.moveTo(0,-X),n.lineTo(0,X),n.stroke(),n.beginPath(),n.arc(0,0,10+3*Math.sin(O*Math.PI*2),0,Math.PI*2),n.fillStyle=`rgba(255, 100, 0, ${J})`,n.fill(),n.strokeStyle="rgba(255, 255, 255, 0.9)",n.lineWidth=2,n.stroke(),n.beginPath(),n.arc(0,0,3,0,Math.PI*2),n.fillStyle="rgba(255, 255, 255, 0.95)",n.fill(),n.restore()}}Le(()=>r(),()=>{r()&&(P(z,0),P(G,0),P(S,1),ze())}),Le(()=>(t(z),t(G),t(S)),()=>{wn.set({translateX:t(z),translateY:t(G),scale:t(S)})}),Le(()=>(c(),Pt),()=>{c()&&Pt.set(!1)}),Le(()=>(v(),t(D)),()=>{v()?It(v()):(t(D)&&P(D,null),P(Ie,!1),ze())}),Le(()=>(c(),h(),r(),t(A)),()=>{c()||h().active||r()?t(A)||P(A,requestAnimationFrame(it)):t(A)&&(cancelAnimationFrame(t(A)),P(A,null),P(ee,0))}),kn(),Gt();var et=hs(),ot=I(et);On(ot,_=>P(f,_),()=>t(f));var We=k(ot,2);{var $t=_=>{var T=us(),H=I(T);$(T),Te(K=>Ce(H,`Speed: ${K??""}¬∞/s`),[()=>(o(),Ae(()=>o().toFixed(0)))]),E(_,T)};se(We,_=>{t(ue)&&_($t)})}var Ut=k(We,2);{var Ct=_=>{var T=vs();E(_,T)};se(Ut,_=>{r()&&_(Ct)})}$(et),On(et,_=>P(s,_),()=>t(s)),Te(()=>Wt(et,1,`canvas-wrapper ${r()?"edit-mode":""}`,"svelte-byh4af")),E(e,et),Et(),u()}async function gs(e,a,r={}){const{x:c,y:v,r:i}=a||{x:e.width/2,y:e.height/2,r:Math.min(e.width,e.height)/2},o=r.samples||720,h=r.innerOffset||-Math.max(2,Math.round(i*.06)),x=r.outerOffset||Math.max(2,Math.round(i*.06)),p=r.thresholdFactor||.6,l=document.createElement("canvas");l.width=e.width,l.height=e.height;const m=l.getContext("2d");m.drawImage(e,0,0);const g=m.getImageData(0,0,l.width,l.height).data,y=l.width,M=l.height;function w(L,A){const ee=Math.round(L),de=Math.round(A);if(ee<0||ee>=y||de<0||de>=M)return 0;const _e=(de*y+ee)*4,ue=g[_e],re=g[_e+1],Ee=g[_e+2];return .2126*ue+.7152*re+.0722*Ee}const u=new Array(o);for(let L=0;L<o;L++){const A=L/o*Math.PI*2,ee=[],de=3;for(let ue=0;ue<de;ue++){const re=ue/(de-1),Ee=i+h+(x-h)*re,F=c+Ee*Math.cos(A),Oe=v+Ee*Math.sin(A);ee.push(w(F,Oe))}const _e=ee.reduce((ue,re)=>ue+re,0)/ee.length;u[L]=_e}const s=u.reduce((L,A)=>L+A,0)/u.length,f=Math.sqrt(u.reduce((L,A)=>L+(A-s)**2,0)/u.length),n=s+f*p,C=u.map(L=>L>n);let S=0,q=!1,j=[],z=0;for(let L=0;L<C.length*2;L++){const A=L%C.length;if(C[A]?(z++,q=!0):(q&&(j.push(z),z=0),q=!1),L>=C.length&&!q)break}q&&z>0&&j.push(z);const G=Math.max(2,Math.round(o/360*(r.minDegrees||5))),R=j.filter(L=>L>=G);S=R.length;const ge=[];let me=0;for(const L of j){const A=me%o,ee=(me+L-1)%o,de=(A+Math.floor(L/2))%o;ge.push({start:A,end:ee,mid:de,angle:de/o*2*Math.PI}),me+=L+1}return{count:S,samples:u,mask:C,groups:R,positions:ge,canvas:l}}function ms(e,a=24,r={}){const c=[],{width:v,height:i}=e,o=r.circle||{x:v/2,y:i/2,r:Math.min(v,i)/2},h=r.margin??1.05,x=Math.round(o.r*h),p=x*2,l=r.outputSize||Math.max(32,Math.round(p)),m=r.fps||24,g=typeof r.rotationSpeed=="number"?r.rotationSpeed:0,y=r.direction==null?1:r.direction,M=document.createElement("canvas");M.width=p,M.height=p;const w=M.getContext("2d"),u=Math.round(o.x-x),s=Math.round(o.y-x);try{w.drawImage(e,u,s,p,p,0,0,p,p)}catch{w.drawImage(e,0,0)}const n=g/m*Math.PI/180*y;Math.round(p*(r.zoom||1));for(let C=0;C<a;C++){const S=C*n,q=document.createElement("canvas");q.width=l,q.height=l;const j=q.getContext("2d");j.translate(l/2,l/2),j.rotate(S);const z=Math.round(p*(r.zoom||1)),G=z;j.drawImage(M,-z/2,-G/2,z,G),c.push(q)}return c}function _s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ot(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hn={exports:{}},qn;function ws(){return qn||(qn=1,(function(e,a){(function(r){e.exports=r()})(function(){return(function r(c,v,i){function o(p,l){if(!v[p]){if(!c[p]){var m=typeof Ot=="function"&&Ot;if(!l&&m)return m(p,!0);if(h)return h(p,!0);var g=new Error("Cannot find module '"+p+"'");throw g.code="MODULE_NOT_FOUND",g}var y=v[p]={exports:{}};c[p][0].call(y.exports,function(M){var w=c[p][1][M];return o(w||M)},y,y.exports,r,c,v,i)}return v[p].exports}for(var h=typeof Ot=="function"&&Ot,x=0;x<i.length;x++)o(i[x]);return o})({1:[function(r,c,v){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}c.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(l){if(!h(l)||l<0||isNaN(l))throw TypeError("n must be a positive number");return this._maxListeners=l,this},i.prototype.emit=function(l){var m,g,y,M,w,u;if(this._events||(this._events={}),l==="error"&&(!this._events.error||x(this._events.error)&&!this._events.error.length)){if(m=arguments[1],m instanceof Error)throw m;var s=new Error('Uncaught, unspecified "error" event. ('+m+")");throw s.context=m,s}if(g=this._events[l],p(g))return!1;if(o(g))switch(arguments.length){case 1:g.call(this);break;case 2:g.call(this,arguments[1]);break;case 3:g.call(this,arguments[1],arguments[2]);break;default:M=Array.prototype.slice.call(arguments,1),g.apply(this,M)}else if(x(g))for(M=Array.prototype.slice.call(arguments,1),u=g.slice(),y=u.length,w=0;w<y;w++)u[w].apply(this,M);return!0},i.prototype.addListener=function(l,m){var g;if(!o(m))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",l,o(m.listener)?m.listener:m),this._events[l]?x(this._events[l])?this._events[l].push(m):this._events[l]=[this._events[l],m]:this._events[l]=m,x(this._events[l])&&!this._events[l].warned&&(p(this._maxListeners)?g=i.defaultMaxListeners:g=this._maxListeners,g&&g>0&&this._events[l].length>g&&(this._events[l].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[l].length),typeof console.trace=="function"&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(l,m){if(!o(m))throw TypeError("listener must be a function");var g=!1;function y(){this.removeListener(l,y),g||(g=!0,m.apply(this,arguments))}return y.listener=m,this.on(l,y),this},i.prototype.removeListener=function(l,m){var g,y,M,w;if(!o(m))throw TypeError("listener must be a function");if(!this._events||!this._events[l])return this;if(g=this._events[l],M=g.length,y=-1,g===m||o(g.listener)&&g.listener===m)delete this._events[l],this._events.removeListener&&this.emit("removeListener",l,m);else if(x(g)){for(w=M;w-- >0;)if(g[w]===m||g[w].listener&&g[w].listener===m){y=w;break}if(y<0)return this;g.length===1?(g.length=0,delete this._events[l]):g.splice(y,1),this._events.removeListener&&this.emit("removeListener",l,m)}return this},i.prototype.removeAllListeners=function(l){var m,g;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[l]&&delete this._events[l],this;if(arguments.length===0){for(m in this._events)m!=="removeListener"&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),this._events={},this}if(g=this._events[l],o(g))this.removeListener(l,g);else if(g)for(;g.length;)this.removeListener(l,g[g.length-1]);return delete this._events[l],this},i.prototype.listeners=function(l){var m;return!this._events||!this._events[l]?m=[]:o(this._events[l])?m=[this._events[l]]:m=this._events[l].slice(),m},i.prototype.listenerCount=function(l){if(this._events){var m=this._events[l];if(o(m))return 1;if(m)return m.length}return 0},i.listenerCount=function(l,m){return l.listenerCount(m)};function o(l){return typeof l=="function"}function h(l){return typeof l=="number"}function x(l){return typeof l=="object"&&l!==null}function p(l){return l===void 0}},{}],2:[function(r,c,v){var i,o,h,x,p;p=navigator.userAgent.toLowerCase(),x=navigator.platform.toLowerCase(),i=p.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],h=i[1]==="ie"&&document.documentMode,o={name:i[1]==="version"?i[3]:i[1],version:h||parseFloat(i[1]==="opera"&&i[4]?i[4]:i[2]),platform:{name:p.match(/ip(?:ad|od|hone)/)?"ios":(p.match(/(?:webos|android)/)||x.match(/mac|win|linux/)||["other"])[0]}},o[o.name]=!0,o[o.name+parseInt(o.version,10)]=!0,o.platform[o.platform.name]=!0,c.exports=o},{}],3:[function(r,c,v){var i,o,h,x=function(g,y){for(var M in y)p.call(y,M)&&(g[M]=y[M]);function w(){this.constructor=g}return w.prototype=y.prototype,g.prototype=new w,g.__super__=y.prototype,g},p={}.hasOwnProperty,l=[].indexOf||function(g){for(var y=0,M=this.length;y<M;y++)if(y in this&&this[y]===g)return y;return-1},m=[].slice;i=r("events").EventEmitter,h=r("./browser.coffee"),o=(function(g){var y,M;x(w,g),y={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},M={delay:500,copy:!1};function w(u){var s,f,n;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(u);for(f in y)n=y[f],(s=this.options)[f]==null&&(s[f]=n)}return w.prototype.setOption=function(u,s){if(this.options[u]=s,this._canvas!=null&&(u==="width"||u==="height"))return this._canvas[u]=s},w.prototype.setOptions=function(u){var s,f,n;f=[];for(s in u)p.call(u,s)&&(n=u[s],f.push(this.setOption(s,n)));return f},w.prototype.addFrame=function(u,s){var f,n;s==null&&(s={}),f={},f.transparent=this.options.transparent;for(n in M)f[n]=s[n]||M[n];if(this.options.width==null&&this.setOption("width",u.width),this.options.height==null&&this.setOption("height",u.height),typeof ImageData<"u"&&ImageData!==null&&u instanceof ImageData)f.data=u.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&u instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&u instanceof WebGLRenderingContext)s.copy?f.data=this.getContextData(u):f.context=u;else if(u.childNodes!=null)s.copy?f.data=this.getImageData(u):f.image=u;else throw new Error("Invalid image");return this.frames.push(f)},w.prototype.render=function(){var u,s,f;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var n,C,S;for(S=[],n=0,C=this.frames.length;0<=C?n<C:n>C;0<=C?++n:--n)S.push(null);return S}).call(this),s=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(u=0,f=s;0<=f?u<f:u>f;0<=f?++u:--u)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},w.prototype.abort=function(){for(var u;u=this.activeWorkers.shift(),u!=null;)this.log("killing active worker"),u.terminate();return this.running=!1,this.emit("abort")},w.prototype.spawnWorkers=function(){var u,s,f;return u=Math.min(this.options.workers,this.frames.length),(function(){f=[];for(var n=s=this.freeWorkers.length;s<=u?n<u:n>u;s<=u?n++:n--)f.push(n);return f}).apply(this).forEach((function(n){return function(C){var S;return n.log("spawning worker "+C),S=new Worker(n.options.workerScript),S.onmessage=function(q){return n.activeWorkers.splice(n.activeWorkers.indexOf(S),1),n.freeWorkers.push(S),n.frameFinished(q.data)},n.freeWorkers.push(S)}})(this)),u},w.prototype.frameFinished=function(u){var s,f;if(this.log("frame "+u.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[u.index]=u,this.options.globalPalette===!0&&(this.options.globalPalette=u.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(s=1,f=this.freeWorkers.length;1<=f?s<f:s>f;1<=f?++s:--s)this.renderNextFrame();return l.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},w.prototype.finishRendering=function(){var u,s,f,n,C,S,q,j,z,G,R,ge,me,L,A,ee;for(j=0,L=this.imageParts,C=0,z=L.length;C<z;C++)s=L[C],j+=(s.data.length-1)*s.pageSize+s.cursor;for(j+=s.pageSize-s.cursor,this.log("rendering finished - filesize "+Math.round(j/1e3)+"kb"),u=new Uint8Array(j),ge=0,A=this.imageParts,S=0,G=A.length;S<G;S++)for(s=A[S],ee=s.data,f=q=0,R=ee.length;q<R;f=++q)me=ee[f],u.set(me,ge),f===s.data.length-1?ge+=s.cursor:ge+=s.pageSize;return n=new Blob([u],{type:"image/gif"}),this.emit("finished",n,u)},w.prototype.renderNextFrame=function(){var u,s,f;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return u=this.frames[this.nextFrame++],f=this.freeWorkers.shift(),s=this.getTask(u),this.log("starting frame "+(s.index+1)+" of "+this.frames.length),this.activeWorkers.push(f),f.postMessage(s)},w.prototype.getContextData=function(u){return u.getImageData(0,0,this.options.width,this.options.height).data},w.prototype.getImageData=function(u){var s;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),s=this._canvas.getContext("2d"),s.setFill=this.options.background,s.fillRect(0,0,this.options.width,this.options.height),s.drawImage(u,0,0),this.getContextData(s)},w.prototype.getTask=function(u){var s,f;if(s=this.frames.indexOf(u),f={index:s,last:s===this.frames.length-1,delay:u.delay,transparent:u.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:h.name==="chrome"},u.data!=null)f.data=u.data;else if(u.context!=null)f.data=this.getContextData(u.context);else if(u.image!=null)f.data=this.getImageData(u.image);else throw new Error("Invalid frame");return f},w.prototype.log=function(){var u;if(u=1<=arguments.length?m.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,u)},w})(i),c.exports=o},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(hn)),hn.exports}var ys=ws();const bs=_s(ys),xs=""+new URL("../assets/gif.worker.CjkyQP34.js",import.meta.url).href;async function Ms(e,a=24){if(!e||e.length===0)throw new Error("No frames to export");const r=new bs({workers:2,quality:10,width:e[0].width,height:e[0].height,workerScript:xs,repeat:0,background:null}),c=Math.round(1e3/a);for(const v of e){const i=v.width,o=v.height,h=document.createElement("canvas");h.width=i,h.height=o;const x=h.getContext("2d");x.fillStyle="#ffffff",x.fillRect(0,0,i,o),x.drawImage(v,0,0),r.addFrame(h,{delay:c,copy:!0})}return new Promise((v,i)=>{r.on("finished",function(o){const h=URL.createObjectURL(o);v(h)}),r.on("error",i),r.render()})}var ks=fe('<div class="export-overlay svelte-14nyow8" role="status" aria-live="polite"><div class="export-box svelte-14nyow8"><div class="spinner svelte-14nyow8" aria-hidden="true"></div> <div class="export-text svelte-14nyow8">Working‚Ä¶ Exporting GIF ‚Äî please wait</div></div></div>'),Ss=fe('<button class="confirm-btn svelte-14nyow8">Confirm Detection</button> <button class="svelte-14nyow8">Cancel</button>',1),Ps=fe("<button>Detect Circle & Count</button>"),Ts=fe('<span style="background: #4a9eff; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.75em; font-weight: bold; margin-left: 4px;" class="svelte-14nyow8"> </span>'),Es=fe('<div style="margin-top: 16px; padding: 12px; background: rgba(74, 158, 255, 0.08); border-radius: 6px; border: 1px solid rgba(74, 158, 255, 0.2);" class="svelte-14nyow8"><div style="font-weight: 600; margin-bottom: 10px; color: #4a9eff; font-size: 0.95em;" class="svelte-14nyow8">‚ö° Flicker Fusion Threshold</div> <div style="margin-bottom: 12px;" class="svelte-14nyow8"><div style="font-size: 0.85em; color: #aaa; margin-bottom: 6px;" class="svelte-14nyow8">Quick Presets:</div> <div style="display: flex; gap: 6px; flex-wrap: wrap;" class="svelte-14nyow8"><button class="svelte-14nyow8">42 Hz</button> <button class="svelte-14nyow8">50 Hz</button> <button class="svelte-14nyow8">55 Hz</button> <button class="svelte-14nyow8">60 Hz</button> <button class="svelte-14nyow8">70 Hz</button></div></div> <div style="margin-top: 12px;" class="svelte-14nyow8"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;" class="svelte-14nyow8"><span style="font-size: 0.85em; color: #ccc;" class="svelte-14nyow8">Fine Tune:</span> <span style="font-size: 1.1em; font-weight: bold; color: #4a9eff;" class="svelte-14nyow8"> </span></div> <input type="range" min="40" max="70" step="0.5" style="width: 100%; cursor: pointer;" class="svelte-14nyow8"/> <div style="display: flex; justify-content: space-between; font-size: 0.7em; color: #666; margin-top: 4px;" class="svelte-14nyow8"><span class="svelte-14nyow8">40 Hz</span> <span style="color: #4a9eff; font-weight: 500;" class="svelte-14nyow8"><!></span> <span class="svelte-14nyow8">70 Hz</span></div></div> <div style="margin-top: 10px; padding: 8px; background: rgba(74, 158, 255, 0.12); border-radius: 4px; font-size: 0.8em;" class="svelte-14nyow8"><div style="font-weight: 500; color: #4a9eff; margin-bottom: 3px;" class="svelte-14nyow8"><!></div> <div style="color: #aaa; font-size: 0.9em;" class="svelte-14nyow8"><!></div></div></div>'),Is=fe('<div class="drag-handle svelte-14nyow8" title="Drag to move"></div>'),$s=fe('<div><!> <div style="display:flex;gap:12px;align-items:center;" class="svelte-14nyow8"><button class="speed-btn svelte-14nyow8">‚àí</button> <div style="text-align:center;min-width:120px;" class="svelte-14nyow8"><div class="speed-display svelte-14nyow8"> </div> <div style="font-size:11px;opacity:0.6;margin-top:4px;" class="svelte-14nyow8">Rotation Speed</div></div> <button class="speed-btn svelte-14nyow8">+</button></div></div>'),Cs=fe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Use +/‚àí buttons above to adjust speed)</em>'),Ds=fe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Touch: drag up to speed up, down to slow down)</em>'),As=fe('<div class="svelte-14nyow8"><strong class="svelte-14nyow8">Circle:</strong> </div>'),Ls=fe('<div class="panel svelte-14nyow8"><!> <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><button> </button> <button class="svelte-14nyow8">Reverse</button> <!> <button class="svelte-14nyow8">Apply Suggested Speed</button> <div class="gif-export-group svelte-14nyow8"><button class="svelte-14nyow8"> </button> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">Frames:</span> <input type="number" min="6" step="1" style="width:80px;padding:4px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <span style="font-size:11px;opacity:0.6;" title="Leave empty for auto-detection" class="svelte-14nyow8"><!></span></label> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">FPS:</span> <select style="padding:4px;border-radius:4px;border:1px solid #ccc;background:#333;color:white;" class="svelte-14nyow8"><option class="svelte-14nyow8">10 (Slow/Classic)</option><option class="svelte-14nyow8">15 (Natural)</option><option class="svelte-14nyow8">20 (Smooth)</option><option class="svelte-14nyow8">24 (Cinema)</option><option class="svelte-14nyow8">30 (Fast)</option></select></label></div> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Show Overlay</span></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Flicker Effect</span> <!></label></div> <!> <!> <div style="margin-top:12px;" class="svelte-14nyow8"><div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><div class="svelte-14nyow8"><strong class="svelte-14nyow8">Current Speed:</strong> <!></div> <div style="display:flex;gap:6px;align-items:center;" class="svelte-14nyow8"><label for="manual-speed-input" style="font-size:12px;" class="svelte-14nyow8">Type speed:</label> <input id="manual-speed-input" type="number" min="1" step="1" style="width:100px;padding:6px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <button class="svelte-14nyow8">Set</button></div></div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Detected count:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Suggested speed:</strong> </div> <!></div></div>');function Fs(e,a){Tt(a,!1);const r=()=>Z(dt,"$imageUrl",w),c=()=>Z(wn,"$canvasTransform",w),v=()=>Z(st,"$isPlaying",w),i=()=>Z(yn,"$playerCanvas",w),o=()=>Z(Qe,"$rotationSpeed",w),h=()=>Z(mn,"$detectedCircle",w),x=()=>Z(jn,"$detectedCount",w),p=()=>Z(vn,"$suggestedRotationSpeed",w),l=()=>Z(_n,"$overlayVisible",w),m=()=>Z(ft,"$editMode",w),g=()=>Z(bn,"$flickerEnabled",w),y=()=>Z(Ke,"$flickerFrequency",w),M=()=>Z(xn,"$isMobile",w),[w,u]=Pn(),s=ne(),f=ne(),n=ne(),C=ne();let S=ne(!1);async function q(){st.update(d=>!d)}function j(){Qe.update(d=>Math.min(1e4,d+60))}function z(){Qe.update(d=>Math.max(10,d-60))}function G(){gn.update(d=>d*-1)}async function R(){if(!r())return;const b=Date.now();kt.set({active:!0,progress:0,startTime:b}),ft.set(!0)}async function ge(){const d=r();if(!d)return;P(S,!0);const b=c();ft.set(!1);const N=Date.now();kt.set({active:!0,progress:0,startTime:N}),v()||requestAnimationFrame(()=>{});try{const W=await gt(d);let B=null;const ae=i();if(ae){const nt=ae.clientWidth,Ze=ae.clientHeight,lt=W.width/W.height,Dt=nt/Ze;let _t,At;lt>Dt?(_t=nt,At=nt/lt):(At=Ze,_t=Ze*lt);const Jt=-b.translateX,Lt=-b.translateY,wt=Jt/b.scale,Zt=Lt/b.scale,Ft=W.width/_t,Kt=wt*Ft+W.width/2,zt=Zt*Ft+W.height/2;B={x:Kt,y:zt,r:Math.min(W.width,W.height)/2*.9}}B||(B={x:W.width/2,y:W.height/2,r:Math.min(W.width,W.height)/2*.9});const oe=await gs(W,B,{samples:720}),Ue=2e3-(Date.now()-N);Ue>0&&await new Promise(nt=>setTimeout(nt,Ue)),mn.set(B),jn.set(oe.count),Qn.set(oe.positions||[]);const Pe=(oe.count>0?360/oe.count:1)*30;vn.set(Pe),kt.set({active:!1,progress:1,startTime:N}),Pt.set(!0),st.set(!1)}finally{P(S,!1)}}function me(){vn.subscribe(d=>{d&&Qe.set(d)})()}function L(){ft.set(!1),Pt.set(!1),kt.set({active:!1,progress:0,startTime:0})}let A=ne(0);function ee(){const d=Number(t(A))||0;d<=0||Qe.set(d)}let de=ne(!1),_e=ne(15);async function ue(){const d=r()||cn(dt);if(!d)return alert("No image loaded to export.");if(!t(s))return alert("Please detect the circle before exporting the GIF.");const b=await gt(d),N=document.createElement("canvas");N.width=b.width,N.height=b.height,N.getContext("2d").drawImage(b,0,0,b.width,b.height),P(de,!0);try{let B;t(re)&&t(re)!==t(f)*2?B=t(re):t(f)&&t(f)>0?B=Math.max(12,t(f)*2):B=t(re)||24;const ae=t(s),oe=Number(cn(Qe)||0),ke=Number(cn(gn)||1),Ue=360/B,Je=ms(N,B,{circle:ae,margin:1.1,zoom:1,fps:t(_e),rotationSpeed:Ue*t(_e),direction:ke}),Se=await Ms(Je,t(_e)),Pe=document.createElement("a");Pe.href=Se,Pe.download="phenaki-export.gif",document.body.appendChild(Pe),Pe.click(),Pe.remove()}catch(B){console.error("GIF export failed",B),alert("GIF export failed: "+(B&&B.message))}finally{P(de,!1)}}let re=ne(null);const Ee="phenaki.speedControlPos";let F=ne({left:null,top:null}),Oe=ne(!1),D=ne(!1),Ie={x:0,y:0},Fe={left:0,top:0},It=0;function ut(){try{const d=localStorage.getItem(Ee);d&&P(F,JSON.parse(d))}catch{}}function vt(){try{localStorage.setItem(Ee,JSON.stringify(t(F)))}catch{}}function at(d){const b=Date.now(),N=b-It<300;if(It=b,d.target&&d.target.closest&&d.target.closest("button"))return;const W=d.target&&d.target.closest&&d.target.closest(".drag-handle");if(!(!N&&!W)){P(Oe,!0),P(D,!0),Ie={x:d.clientX,y:d.clientY},Fe={left:t(F).left??Math.round((window.innerWidth-200)/2),top:t(F).top??Math.round((window.innerHeight-80)/2)};try{d.target.setPointerCapture(d.pointerId)}catch{}window.addEventListener("pointermove",ht),window.addEventListener("pointerup",pt)}}function ht(d){if(!t(D))return;const b=d.clientX-Ie.x,N=d.clientY-Ie.y;te(F,t(F).left=Math.round(Fe.left+b)),te(F,t(F).top=Math.round(Fe.top+N))}function pt(d){P(D,!1),P(Oe,!1);try{d.target.releasePointerCapture&&d.target.releasePointerCapture(d.pointerId)}catch{}window.removeEventListener("pointermove",ht),window.removeEventListener("pointerup",pt),vt()}Sn(()=>{ut(),t(F).left==null&&te(F,t(F).left=Math.round((window.innerWidth-200)/2)),t(F).top==null&&te(F,t(F).top=Math.round((window.innerHeight-80)/2));function d(){const oe=Math.max(8,window.innerWidth-200-8),ke=Math.max(8,window.innerHeight-80-8);t(F).left==null&&te(F,t(F).left=oe),t(F).top==null&&te(F,t(F).top=ke),te(F,t(F).left=Math.min(Math.max(t(F).left,8),oe)),te(F,t(F).top=Math.min(Math.max(t(F).top,8),ke))}d();const b=()=>{d(),vt()};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)});function gt(d){return new Promise((b,N)=>{const W=new Image;W.crossOrigin="anonymous",W.onload=()=>b(W),W.onerror=N,W.src=d})}Le(()=>o(),()=>{P(A,Number(o()||0))}),Le(()=>h(),()=>{P(s,h())}),Le(()=>x(),()=>{P(f,x())}),Le(()=>p(),()=>{P(n,p())}),Le(()=>l(),()=>{P(C,l())}),kn(),Gt();var it=Ls(),ze=I(it);{var et=d=>{var b=ks();E(d,b)};se(ze,d=>{t(de)&&d(et)})}var ot=k(ze,2),We=I(ot);let $t;var Ut=I(We,!0);$(We);var Ct=k(We,2),_=k(Ct,2);{var T=d=>{var b=Ss(),N=Re(b),W=k(N,2);Te(()=>N.disabled=t(S)),ce("click",N,ge),ce("click",W,L),E(d,b)},H=d=>{var b=Ps();Te(()=>{Wt(b,1,Wn(t(s)?"":"detect-btn-required"),"svelte-14nyow8"),b.disabled=t(S)||!r()}),ce("click",b,R),E(d,b)};se(_,d=>{m()?d(T):d(H,!1)})}var K=k(_,2),Q=k(K,2),Y=I(Q),Ye=I(Y,!0);$(Y);var Ne=k(Y,2),$e=k(I(Ne),2);Mt($e);var Xe=k($e,2),O=I(Xe);{var J=d=>{var b=pe("Manual");E(d,b)},X=d=>{var b=qe(),N=Re(b);{var W=ae=>{var oe=pe("Auto (x2)");E(ae,oe)},B=ae=>{var oe=pe("Auto");E(ae,oe)};se(N,ae=>{t(f)?ae(W):ae(B,!1)},!0)}E(d,b)};se(O,d=>{t(re)?d(J):d(X,!1)})}$(Xe),$(Ne);var U=k(Ne,2),V=k(I(U),2);Te(()=>{t(_e),qr(()=>{})});var he=I(V);he.value=he.__value=10;var Ve=k(he);Ve.value=Ve.__value=15;var Ge=k(Ve);Ge.value=Ge.__value=20;var tt=k(Ge);tt.value=tt.__value=24;var Be=k(tt);Be.value=Be.__value=30,$(V),$(U),$(Q);var mt=k(Q,2),jt=I(mt);Mt(jt),ln(2),$(mt);var In=k(mt,2),qt=I(In);Mt(qt);var er=k(qt,4);{var tr=d=>{var b=Ts(),N=I(b);$(b),Te(()=>Ce(N,`${y()??""} Hz`)),E(d,b)};se(er,d=>{g()&&d(tr)})}$(In),$(ot);var $n=k(ot,2);{var nr=d=>{var b=Es(),N=k(I(b),2),W=k(I(N),2),B=I(W),ae=k(B,2),oe=k(ae,2),ke=k(oe,2),Ue=k(ke,2);$(W),$(N);var Je=k(N,2),Se=I(Je),Pe=k(I(Se),2),nt=I(Pe);$(Pe),$(Se);var Ze=k(Se,2);Mt(Ze);var lt=k(Ze,2),Dt=k(I(lt),2),_t=I(Dt);{var At=ie=>{var we=pe("üî¥ Visible");E(ie,we)},Jt=ie=>{var we=qe(),yt=Re(we);{var bt=le=>{var ye=pe("üü° Fusion");E(le,ye)},xt=le=>{var ye=pe("üü¢ Smooth");E(le,ye)};se(yt,le=>{y()<58?le(bt):le(xt,!1)},!0)}E(ie,we)};se(_t,ie=>{y()<48?ie(At):ie(Jt,!1)})}$(Dt),ln(2),$(lt),$(Je);var Lt=k(Je,2),wt=I(Lt),Zt=I(wt);{var Ft=ie=>{var we=pe("‚ö° Strong Flicker");E(ie,we)},Kt=ie=>{var we=qe(),yt=Re(we);{var bt=le=>{var ye=pe("üéØ Critical Threshold");E(le,ye)},xt=le=>{var ye=qe(),Qt=Re(ye);{var en=be=>{var je=pe("‚ú® Near-Fusion");E(be,je)},tn=be=>{var je=qe(),nn=Re(je);{var rn=xe=>{var rt=pe("üé¨ Cinema (60 Hz)");E(xe,rt)},sn=xe=>{var rt=pe("üåü Ultra Smooth");E(xe,rt)};se(nn,xe=>{y()<62?xe(rn):xe(sn,!1)},!0)}E(be,je)};se(Qt,be=>{y()<58?be(en):be(tn,!1)},!0)}E(le,ye)};se(yt,le=>{y()<52?le(bt):le(xt,!1)},!0)}E(ie,we)};se(Zt,ie=>{y()<48?ie(Ft):ie(Kt,!1)})}$(wt);var zt=k(wt,2),ur=I(zt);{var vr=ie=>{var we=pe("Noticeable flicker - classic phenakistoscope effect");E(ie,we)},hr=ie=>{var we=qe(),yt=Re(we);{var bt=le=>{var ye=pe("Flicker begins to fuse - critical threshold");E(le,ye)},xt=le=>{var ye=qe(),Qt=Re(ye);{var en=be=>{var je=pe("Subtle pulsing - artistic sweet spot");E(be,je)},tn=be=>{var je=qe(),nn=Re(je);{var rn=xe=>{var rt=pe("Standard cinema/TV rate - minimal flicker");E(xe,rt)},sn=xe=>{var rt=pe("Above fusion threshold - very smooth");E(xe,rt)};se(nn,xe=>{y()<62?xe(rn):xe(sn,!1)},!0)}E(be,je)};se(Qt,be=>{y()<58?be(en):be(tn,!1)},!0)}E(le,ye)};se(yt,le=>{y()<52?le(bt):le(xt,!1)},!0)}E(ie,we)};se(ur,ie=>{y()<48?ie(vr):ie(hr,!1)})}$(zt),$(Lt),$(b),Te(()=>{ct(B,`padding: 6px 10px; border: 1px solid ${y()===42?"#ff6b6b":"#555"}; background: ${y()===42?"#ff6b6b":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),ct(ae,`padding: 6px 10px; border: 1px solid ${y()===50?"#ffa500":"#555"}; background: ${y()===50?"#ffa500":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),ct(oe,`padding: 6px 10px; border: 1px solid ${y()===55?"#4a9eff":"#555"}; background: ${y()===55?"#4a9eff":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),ct(ke,`padding: 6px 10px; border: 1px solid ${y()===60?"#51cf66":"#555"}; background: ${y()===60?"#51cf66":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),ct(Ue,`padding: 6px 10px; border: 1px solid ${y()===70?"#845ef7":"#555"}; background: ${y()===70?"#845ef7":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),Ce(nt,`${y()??""} Hz`),ss(Ze,y())}),ce("click",B,()=>Ke.set(42)),ce("click",ae,()=>Ke.set(50)),ce("click",oe,()=>Ke.set(55)),ce("click",ke,()=>Ke.set(60)),ce("click",Ue,()=>Ke.set(70)),ce("input",Ze,ie=>Ke.set(+ie.target.value)),E(d,b)};se($n,d=>{g()&&d(nr)})}var Cn=k($n,2);{var rr=d=>{var b=$s(),N=I(b);{var W=Se=>{var Pe=Is();E(Se,Pe)};se(N,Se=>{t(Oe)&&Se(W)})}var B=k(N,2),ae=I(B),oe=k(ae,2),ke=I(oe),Ue=I(ke);$(ke),ln(2),$(oe);var Je=k(oe,2);$(B),$(b),Te(Se=>{Wt(b,1,`speed-control ${t(Oe)?"dragMode":""} ${t(D)?"dragging":""}`,"svelte-14nyow8"),ct(b,`left: ${t(F),Ae(()=>t(F).left??16)??""}px; top: ${t(F),Ae(()=>t(F).top??16)??""}px;`),Ce(Ue,`${Se??""}¬∞/s`)},[()=>(o(),Ae(()=>o().toFixed(0)))]),ce("click",ae,z),ce("click",Je,j),ce("pointerdown",b,at),E(d,b)};se(Cn,d=>{h()&&d(rr)})}var Dn=k(Cn,2),Ht=I(Dn),Yt=I(Ht),An=k(I(Yt)),sr=k(An);{var ar=d=>{var b=Cs();E(d,b)},ir=d=>{var b=Ds();E(d,b)};se(sr,d=>{M()?d(ar):d(ir,!1)})}$(Yt);var Ln=k(Yt,2),Xt=k(I(Ln),2);Mt(Xt);var or=k(Xt,2);$(Ln),$(Ht);var Vt=k(Ht,2),lr=k(I(Vt));$(Vt);var Bt=k(Vt,2),cr=k(I(Bt));$(Bt);var fr=k(Bt,2);{var dr=d=>{var b=As(),N=k(I(b));$(b),Te((W,B,ae)=>Ce(N,` x=${W??""}, y=${B??""}, r=${ae??""}`),[()=>(t(s),Ae(()=>Math.round(t(s).x))),()=>(t(s),Ae(()=>Math.round(t(s).y))),()=>(t(s),Ae(()=>Math.round(t(s).r)))]),E(d,b)};se(fr,d=>{t(s)&&d(dr)})}$(Dn),$(it),Te((d,b)=>{$t=Wt(We,1,Wn(t(s)&&!v()?"play-highlight":""),"svelte-14nyow8",$t,{"pause-subtle":v()&&!t(s)}),We.disabled=!r(),Ce(Ut,v()?"Pause":"Play"),K.disabled=!t(n),Y.disabled=t(de)||!i(),Ce(Ye,t(de)?"Exporting...":"Save GIF"),Nt($e,"placeholder",t(f)?`Auto (${t(f)*2})`:"Auto (24)"),as(jt,t(C)),Ce(An,` ${d??""}¬∞/s | `),Ce(lr,` ${t(f)??0??""}`),Ce(cr,` ${b??""}¬∞/s`)},[()=>(o(),Ae(()=>o().toFixed(0))),()=>(t(n),Ae(()=>t(n)?t(n).toFixed(0):"‚Äî"))]),ce("click",We,q),ce("click",Ct,G),ce("click",K,me),ce("click",Y,ue),Un($e,()=>t(re),d=>P(re,d)),ts(V,()=>t(_e),d=>P(_e,d)),ce("change",jt,d=>_n.set(d.target.checked)),os(qt,g,d=>Yr(bn,d)),Un(Xt,()=>t(A),d=>P(A,d)),ce("click",or,ee),E(e,it),Et(),u()}var zs=fe("<option> </option>"),Rs=fe('<div class="selector svelte-ai08gq"><label for="samples" class="svelte-ai08gq">Sample Images:</label> <select id="samples" class="svelte-ai08gq"><option>-- Choose a sample --</option><!></select></div>');function Os(e,a){Tt(a,!1);const r="https://raw.githubusercontent.com/tclaret/phenakistoscope-simulator/main/images",c="https://raw.githubusercontent.com/tclaret/phenaki-lab/main/img",v=[{name:"Woman Chopping Tree",file:"WomanChoppingTree.jpg",repo:"old"},{name:"Dancing",file:"Dancing.jpg",repo:"old"},{name:"Jongleur",file:"Jongleur.png",repo:"old"},{name:"a_cheval",file:"a_cheval.png",repo:"old"},{name:"McLean_1",file:"McLean_1.png",repo:"old"},{name:"Gernamy_1949",file:"Gernamy_1949_R_Balzer.png",repo:"old"},{name:"AEO175939",file:"AEO175939_PhenakistoscopeGiroux60.jpg",repo:"old"},{name:"AEO185553",file:"AEO185553_PhenakistiscopeDisc_ManInBlueAndRed.jpg",repo:"old"},{name:"medium_1990_5036_3369",file:"medium_1990_5036_3369.jpg",repo:"old"},{name:"medium_a001813b",file:"medium_a001813b.jpg",repo:"old"},{name:"tumblr_obd6fh",file:"tumblr_obd6fhGFSZ1r9jbwno1_500.png",repo:"old"},{name:"tumblr_oc1cz",file:"tumblr_oc1czn99ZM1r9jbwno1_500.png",repo:"old"},{name:"Phantasmascope Faces",file:"Phantasmascope_faces.png",repo:"old"},{name:"722a6790240569.5e126845d9b56",file:"722a6790240569.5e126845d9b56.png",repo:"old"},{name:"Fantascope Disc 1833",file:"fantascope-disc-1833.png",repo:"old"},{name:"Face",file:"a_face__.jpg",repo:"new"},{name:"Culbute",file:"culbute.jpg",repo:"new"},{name:"Grenouille",file:"Grenouille__.jpg",repo:"new"},{name:"Oh Soccer",file:"oh_soccer.jpg",repo:"new"},{name:"Un Grand Un Petit",file:"un_grand_un_petit.jpg",repo:"new"},{name:"Autre Culbutte",file:"autre_culbutte.jpg",repo:"new"},{name:"Dancing 2",file:"dancing_.jpg",repo:"new"},{name:"Il Pompe de l'eau",file:"il_pompe_de_leau.jpg",repo:"new"},{name:"Porceline",file:"porceline.jpg",repo:"new"},{name:"Volants",file:"volants_.png",repo:"new"},{name:"Ce Qui",file:"ce_qui.jpg",repo:"new"},{name:"Des Anges",file:"des_anges.jpg",repo:"new"},{name:"Moulin",file:"moulin_.jpg",repo:"new"},{name:"Rats",file:"rats__.jpg",repo:"new"},{name:"Corde √† Danser",file:"corde_a_denser_.jpg",repo:"new"},{name:"Ecureuil",file:"ecureuil.jpg",repo:"new"},{name:"Noel Noel",file:"noel_noel.jpg",repo:"new"},{name:"Tirreur",file:"tirreur_.jpg",repo:"new"},{name:"C Pastel",file:"c_pastel.jpg",repo:"new"},{name:"G√©om√©trique",file:"geometrique.jpg",repo:"new"},{name:"Nuages en Scie",file:"nuages_en_scie.jpg",repo:"new"},{name:"Tons Pastels",file:"tons_pastels.jpg",repo:"new"},{name:"Des Ouiseaux",file:"DesOuaisaux.png",repo:"new"},{name:"Feels Like Flying",file:"feels_like_flying.png",repo:"new"},{name:"Gros Meusieur",file:"GrosMeusieur.png",repo:"new"},{name:"Jongle avec les Otaries",file:"Jongle_avec_les_otaries.png",repo:"new"}];function i(l){const g=`${l.repo==="new"?c:r}/${l.file}`;dt.set(g),En.set(g),st.set(!0)}Sn(()=>{let l=!1;if(dt.subscribe(g=>{g&&(l=!0)})(),!l){const g=v[Math.floor(Math.random()*v.length)];g&&i(g)}}),Gt();var o=Rs(),h=k(I(o),2),x=I(h);x.value=x.__value="";var p=k(x);Vr(p,1,()=>v,l=>l.file,(l,m)=>{var g=zs(),y=I(g,!0);$(g);var M={};Te(()=>{Ce(y,t(m).name),M!==(M=t(m).file)&&(g.value=(g.__value=t(m).file)??"")}),E(l,g)}),$(h),$(o),ce("change",h,l=>{const m=l.target.selectedIndex-1;m>=0&&i(v[m])}),E(e,o),Et()}var Ws=fe('<div class="container svelte-1uha8ag"><h1 class="svelte-1uha8ag">Phenakistoscope Lab</h1> <p class="sub svelte-1uha8ag">Convert old phenakistoscope discs into animated GIFs</p> <!> <!> <!> <!> <!></div>');function Xs(e){var a=Ws(),r=k(I(a),4);cs(r,{});var c=k(r,2);Os(c,{});var v=k(c,2);ds(v,{});var i=k(v,2);ps(i,{});var o=k(i,2);Fs(o,{}),$(a),E(e,a)}export{Xs as component};
