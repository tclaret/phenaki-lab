import{f as de,a as oe,c as Ut}from"../chunks/BPwTt6vP.js";import"../chunks/D4mQYNIE.js";import{G as Ht,v as ue,w as qt,g as t,av as Yt,I as jt,J as Xt,K as Mt,L as kt,M as rt,D as Ke,a3 as Bt,aq as Vt,aa as Jt,x as De,C as dt,B as Dt,F as Kt,T as j,a1 as St,ao as Ot,aI as Zt,aJ as Qt,y as Rt,A as en,aK as tn,aL as nn,aM as st,ak as rn,aN as sn,aO as an,an as on,z as ln,aP as cn,P as fn,aQ as un,aR as dn,aS as hn,aT as vn,aU as pn,aG as gn,b as we,O as mn,aV as wn,p as Xe,j as Be,s as A,k as N,l as z,aW as Ee,aX as yt,i as Pt,U as P,ab as Qe,t as Re,aY as Y}from"../chunks/zw_chER5.js";import{e as fe,s as Me}from"../chunks/CfBDm7bY.js";import{i as et}from"../chunks/CtND9pXO.js";import{w as he,o as _t,a as yn,g as it}from"../chunks/BQFw1Q7y.js";import{i as Oe,s as xt,a as ee,b as Et}from"../chunks/BuQu0Dv8.js";function _n(e,l,s){for(var f=[],p=l.length,o=0;o<p;o++)sn(l[o].e,f,!0);an(f,()=>{var c=f.length===0&&s!==null;if(c){var u=s,b=u.parentNode;on(b),b.append(u),e.items.clear(),me(e,l[0].prev,l[p-1].next)}for(var d=0;d<p;d++){var r=l[d];c||(e.items.delete(r.k),me(e,r.prev,r.next)),ln(r.e,!c)}e.first===l[0]&&(e.first=l[0].prev)})}function xn(e,l,s,f,p,o=null){var c=e,u=new Map,b=null;ue&&qt();var d=null,r=Yt(()=>{var a=s();return Zt(a)?a:a==null?[]:Ot(a)}),h,n=!0;function v(){bn(M,h,c,l,f),d!==null&&(h.length===0?(d.fragment?(c.before(d.fragment),d.fragment=null):Rt(d.effect),i.first=d.effect):en(d.effect,()=>{d=null}))}var i=Ht(()=>{h=t(r);var a=h.length;let g=!1;if(ue){var m=jt(c)===Xt;m!==(a===0)&&(c=Mt(),kt(c),rt(!1),g=!0)}for(var x=new Set,S=De,k=null,O=Kt(),$=0;$<a;$+=1){ue&&Ke.nodeType===Bt&&Ke.data===Vt&&(c=Ke,g=!0,rt(!1));var G=h[$],T=f(G,$),R=n?null:u.get(T);R?(Jt(R.v,G),R.i=$,O&&S.skipped_effects.delete(R.e)):(R=Mn(n?c:null,k,G,T,$,p,l,s),n&&(R.o=!0,k===null?b=R:k.next=R,k=R),u.set(T,R)),x.add(T)}if(a===0&&o&&!d)if(n)d={fragment:null,effect:dt(()=>o(c))};else{var V=document.createDocumentFragment(),ne=Dt();V.append(ne),d={fragment:V,effect:dt(()=>o(ne))}}if(ue&&a>0&&kt(Mt()),!n)if(O){for(const[w,L]of u)x.has(w)||S.skipped_effects.add(L.e);S.oncommit(v),S.ondiscard(()=>{})}else v();g&&rt(!0),t(r)}),M={effect:i,items:u,first:b};n=!1,ue&&(c=Ke)}function bn(e,l,s,f,p){var o=l.length,c=e.items,u=e.first,b,d=null,r=[],h=[],n,v,i,M;for(M=0;M<o;M+=1){if(n=l[M],v=p(n,M),i=c.get(v),e.first??=i,!i.o){i.o=!0;var a=d?d.next:u;me(e,d,i),me(e,i,a),at(i,a,s),d=i,r=[],h=[],u=d.next;continue}if((i.e.f&st)!==0&&Rt(i.e),i!==u){if(b!==void 0&&b.has(i)){if(r.length<h.length){var g=h[0],m;d=g.prev;var x=r[0],S=r[r.length-1];for(m=0;m<r.length;m+=1)at(r[m],g,s);for(m=0;m<h.length;m+=1)b.delete(h[m]);me(e,x.prev,S.next),me(e,d,x),me(e,S,g),u=g,d=S,M-=1,r=[],h=[]}else b.delete(i),at(i,u,s),me(e,i.prev,i.next),me(e,i,d===null?e.first:d.next),me(e,d,i),d=i;continue}for(r=[],h=[];u!==null&&u.k!==v;)(u.e.f&st)===0&&(b??=new Set).add(u),h.push(u),u=u.next;if(u===null)continue;i=u}r.push(i),d=i,u=i.next}let k=c.size>o;if(u!==null||b!==void 0){for(var O=b===void 0?[]:Ot(b);u!==null;)(u.e.f&st)===0&&O.push(u),u=u.next;var $=O.length;if(k=c.size-$>o,$>0){var G=null;_n(e,O,G)}}if(k)for(const T of c.values())T.o||(me(e,d,T),d=T);e.effect.last=d&&d.e}function Mn(e,l,s,f,p,o,c,u){var b=(c&tn)!==0,d=(c&nn)===0,r=b?d?j(s,!1,!1):St(s):s,h=(c&Qt)===0?p:St(p),n={i:h,v:r,k:f,a:null,e:null,o:!1,prev:l,next:null};try{if(e===null){var v=document.createDocumentFragment();v.append(e=Dt())}return n.e=dt(()=>o(e,r,h,u)),l!==null&&(l.next=n),n}finally{}}function at(e,l,s){for(var f=e.next?e.next.e.nodes_start:s,p=l?l.e.nodes_start:s,o=e.e.nodes_start;o!==null&&o!==f;){var c=rn(o);p.before(o),o=c}}function me(e,l,s){l===null?(e.first=s,e.effect.first=s&&s.e):(l.e.next&&(l.e.next.prev=null),l.next=s,l.e.next=s&&s.e),s!==null&&(s.e.prev&&(s.e.prev.next=null),s.prev=l,s.e.prev=l&&l.e)}function Ft(e){var l,s,f="";if(typeof e=="string"||typeof e=="number")f+=e;else if(typeof e=="object")if(Array.isArray(e)){var p=e.length;for(l=0;l<p;l++)e[l]&&(s=Ft(e[l]))&&(f&&(f+=" "),f+=s)}else for(s in e)e[s]&&(f&&(f+=" "),f+=s);return f}function kn(){for(var e,l,s=0,f="",p=arguments.length;s<p;s++)(e=arguments[s])&&(l=Ft(e))&&(f&&(f+=" "),f+=l);return f}function Sn(e){return typeof e=="object"?kn(e):e??""}function Pn(e,l,s){var f=e==null?"":""+e;return f=f?f+" "+l:l,f===""?null:f}function En(e,l){return e==null?null:String(e)}function Ct(e,l,s,f,p,o){var c=e.__className;if(ue||c!==s||c===void 0){var u=Pn(s,f);(!ue||u!==e.getAttribute("class"))&&(u==null?e.removeAttribute("class"):e.className=u),e.__className=s}return o}function Cn(e,l,s,f){var p=e.__style;if(ue||p!==l){var o=En(l);(!ue||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=l}return f}const In=Symbol("is custom element"),Ln=Symbol("is html");function ot(e){if(ue){var l=!1,s=()=>{if(!l){if(l=!0,e.hasAttribute("value")){var f=e.value;ht(e,"value",null),e.value=f}if(e.hasAttribute("checked")){var p=e.checked;ht(e,"checked",null),e.checked=p}}};e.__on_r=s,fn(s),un()}}function $n(e,l){var s=Wt(e);s.checked!==(s.checked=l??void 0)&&(e.checked=l)}function ht(e,l,s,f){var p=Wt(e);ue&&(p[l]=e.getAttribute(l),l==="src"||l==="srcset"||l==="href"&&e.nodeName==="LINK")||p[l]!==(p[l]=s)&&(l==="loading"&&(e[dn]=s),s==null?e.removeAttribute(l):typeof s!="string"&&Tn(e).includes(l)?e[l]=s:e.setAttribute(l,s))}function Wt(e){return e.__attributes??={[In]:e.nodeName.includes("-"),[Ln]:e.namespaceURI===cn}}var It=new Map;function Tn(e){var l=e.getAttribute("is")||e.nodeName,s=It.get(l);if(s)return s;It.set(l,s=[]);for(var f,p=e,o=Element.prototype;o!==p;){f=vn(p);for(var c in f)f[c].set&&s.push(c);p=hn(p)}return s}function Lt(e,l,s=l){var f=new WeakSet;pn(e,"input",async p=>{var o=p?e.defaultValue:e.value;if(o=lt(e)?ct(o):o,s(o),De!==null&&f.add(De),await gn(),o!==(o=l())){var c=e.selectionStart,u=e.selectionEnd,b=e.value.length;if(e.value=o??"",u!==null){var d=e.value.length;c===u&&u===b&&d>b?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=c,e.selectionEnd=Math.min(u,d))}}}),(ue&&e.defaultValue!==e.value||we(l)==null&&e.value)&&(s(lt(e)?ct(e.value):e.value),De!==null&&f.add(De)),mn(()=>{var p=l();if(e===document.activeElement){var o=wn??De;if(f.has(o))return}lt(e)&&p===ct(e.value)||e.type==="date"&&!p&&!e.value||p!==e.value&&(e.value=p??"")})}function lt(e){var l=e.type;return l==="number"||l==="range"}function ct(e){return e===""?null:+e}const bt=he(null),Fe=he(null),We=he(!1),Pe=he(360),vt=he(1),pt=he(null),$t=he(0),ft=he(1),Nt=he([]),gt=he(!1),mt=he({active:!1,progress:0,startTime:0}),wt=he(null);var An=de('<label>Choose image: <input type="file" accept="image/*"/></label>');function Dn(e,l){Xe(l,!1);function s(o){const c=o.target.files[0];if(!c)return;const u=URL.createObjectURL(c);bt.set(u),Fe.set(u),We.set(!0)}et();var f=An(),p=A(N(f));z(f),fe("change",p,s),oe(e,f),Be()}var On=de('<div class="preview svelte-1th6cal"><img alt="Selected disc preview" class="svelte-1th6cal"/></div>f',1);function Rn(e,l){Xe(l,!1);const s=()=>ee(bt,"$previewUrl",f),[f,p]=xt(),o=j();Ee(()=>s(),()=>{P(o,s())}),yt();var c=Ut(),u=Pt(c);{var b=d=>{var r=On(),h=Pt(r),n=N(h);z(h),Qe(),Re(()=>ht(n,"src",t(o))),oe(d,r)};Oe(u,d=>{t(o)&&d(b)})}oe(e,c),Be(),p()}var Fn=de('<div class="speed-hud svelte-byh4af"> </div>'),Wn=de('<div class="canvas-wrapper svelte-byh4af"><canvas class="svelte-byh4af"></canvas> <!></div>');function Nn(e,l){Xe(l,!1);const s=()=>ee(Fe,"$imageUrl",r),f=()=>ee(Pe,"$rotationSpeed",r),p=()=>ee(We,"$isPlaying",r),o=()=>ee(mt,"$detectionAnimation",r),c=()=>ee(vt,"$rotationDirection",r),u=()=>ee(gt,"$overlayVisible",r),b=()=>ee(pt,"$detectedCircle",r),d=()=>ee(Nt,"$detectedPositions",r),[r,h]=xt();let n=j(),v=j(),i,M=0,a=1;const g=1,m=4;let x=0,S=0;const k=new Map;let O=1,$=0,G=0,T=j(),R=j(0),V=0,ne=1,w=j(!1),L,U=0,te=0,le=0,E=j(null),re=j(!1),se;function Ne(_){P(re,!1),P(E,new Image),Y(E,t(E).crossOrigin="anonymous"),Y(E,t(E).onload=()=>{P(re,!0),ke(),ve()}),Y(E,t(E).onerror=C=>{console.error("Erreur chargement:",_,C),P(re,!1)}),Y(E,t(E).src=_)}function ke(){if(!t(v)||!t(n))return;const _=t(n).getBoundingClientRect(),C=window.devicePixelRatio||1;if(t(E)&&t(E).width&&t(E).height){const D=t(E).width,F=t(E).height,q=Math.min(1400,Math.max(150,Math.round(_.width*Math.sqrt(D*D+F*F)/D)));Y(n,t(n).style.height=q+"px");const W=t(n).getBoundingClientRect();Y(v,t(v).style.width=W.width+"px"),Y(v,t(v).style.height=W.height+"px"),Y(v,t(v).width=Math.round(W.width*C)),Y(v,t(v).height=Math.round(W.height*C))}else Y(v,t(v).style.width=_.width+"px"),Y(v,t(v).style.height=_.height+"px"),Y(v,t(v).width=Math.round(_.width*C)),Y(v,t(v).height=Math.round(_.height*C));i&&i.setTransform(C,0,0,C,0,0),ve()}_t(()=>(t(v)&&(wt.set(t(v)),i=t(v).getContext("2d"),t(n)&&Y(n,t(n).style.touchAction="none"),t(n)&&t(n).addEventListener("wheel",Ve,{passive:!1}),ke(),se=new ResizeObserver(()=>ke()),t(n)&&se.observe(t(n)),t(n)&&(t(n).addEventListener("pointerdown",ze),t(n).addEventListener("pointermove",Ce),t(n).addEventListener("pointerup",Le),t(n).addEventListener("pointerleave",Ge))),()=>{se&&se.disconnect()}));function ze(_){if(!t(n))return;t(n).setPointerCapture(_.pointerId),k.set(_.pointerId,{x:_.clientX,y:_.clientY});const C=Date.now(),D=_.clientX-te,F=_.clientY-le,q=Math.sqrt(D*D+F*F);if(C-U<300&&q<50){We.update(W=>!W),k.clear(),U=0;return}if(U=C,te=_.clientX,le=_.clientY,k.size===1&&($=_.clientX,G=_.clientY,V=_.clientY,ne=f()||1),k.size===2){const W=Array.from(k.values());O=a,Ce.pinchStartDist=Math.hypot(W[0].x-W[1].x,W[0].y-W[1].y)}}function Ce(_){if(t(n)){if(k.has(_.pointerId)&&k.set(_.pointerId,{x:_.clientX,y:_.clientY}),k.size===2){const C=Array.from(k.values()),D=C[0],F=C[1],q=Math.hypot(D.x-F.x,D.y-F.y),W=Ce.pinchStartDist||q,ye=q/W;let Ie=Math.max(g,Math.min(m,O*ye));const J={x:(D.x+F.x)/2,y:(D.y+F.y)/2},ae=t(v).clientWidth,B=t(v).clientHeight,K=t(n).getBoundingClientRect(),ie=J.x-(K.left+ae/2)-x,Z=J.y-(K.top+B/2)-S,_e=a,ce=Ie;x=x-(ce/_e-1)*ie,S=S-(ce/_e-1)*Z,a=Ie,P(w,!0),clearTimeout(L);return}if(k.size===1)if(k.values().next().value,a>1){const C=_.clientX-$,D=_.clientY-G;x+=C,S+=D,$=_.clientX,G=_.clientY,ve();return}else{const C=V-_.clientY,F=Math.round(C*8),q=Math.max(10,Math.min(1e4,Math.round(ne+F)));Pe.set(q),P(w,!0),clearTimeout(L)}}}function Le(_){if(t(n)){try{t(n).releasePointerCapture(_.pointerId)}catch{}clearTimeout(L),P(w,!0),L=setTimeout(()=>{P(w,!1)},4e3),k.delete(_.pointerId),k.size===0&&(clearTimeout(L),P(w,!1))}}function Ge(){clearTimeout(L),P(w,!0),L=setTimeout(()=>{P(w,!1)},4e3)}function Ve(_){if(!t(n)||!_.ctrlKey&&!_.metaKey)return;_.preventDefault();const D=1+(-_.deltaY>0?.1:-.1),F=Math.max(g,Math.min(m,a*D)),q=t(n).getBoundingClientRect(),W=_.clientX-(q.left+t(v).clientWidth/2)-x,ye=_.clientY-(q.top+t(v).clientHeight/2)-S;x=x-(F/a-1)*W,S=S-(F/a-1)*ye,a=F,ve()}yn(()=>{t(T)&&cancelAnimationFrame(t(T)),se&&se.disconnect(),L&&clearTimeout(L),t(n)&&(t(n).removeEventListener("pointerdown",ze),t(n).removeEventListener("pointermove",Ce),t(n).removeEventListener("pointerup",Le),t(n).removeEventListener("pointerleave",Ge),t(n)&&t(n).removeEventListener("wheel",Ve)),wt.set(null)});function $e(_){const C=p()||o().active;if(!C||!t(re)){P(R,0),!C&&t(T)&&(cancelAnimationFrame(t(T)),P(T,null));return}t(R)||P(R,_);const D=_-t(R);P(R,_);const F=f()||0;M+=F*(c()||1)*(D/1e3),ve(),P(T,requestAnimationFrame($e))}function ve(){if(!t(re)||!i||!t(E)||!t(v))return;const _=t(v).clientWidth,C=t(v).clientHeight;i.clearRect(0,0,_,C),i.save();const D=t(E).width/t(E).height,F=_/C;let q,W;D>F?(q=_,W=_/D):(W=C,q=C*D);const ye=q*a,Ie=W*a;if(i.translate(_/2+x,C/2+S),i.rotate(M*Math.PI/180),i.drawImage(t(E),-ye/2,-Ie/2,ye,Ie),u()&&b())try{const J=b(),ae=q*a/t(E).width,B=(J.x-t(E).width/2)*ae,K=(J.y-t(E).height/2)*ae,ie=J.r*ae;i.beginPath(),i.lineWidth=Math.max(2,2),i.strokeStyle="rgba(255,160,0,0.85)",i.arc(B,K,ie,0,Math.PI*2),i.stroke(),i.strokeStyle="rgba(255,160,0,0.85)",i.lineWidth=Math.max(2,2);const Z=Math.max(15,ie*.15);if(i.beginPath(),i.moveTo(B-Z,K),i.lineTo(B+Z,K),i.stroke(),i.beginPath(),i.moveTo(B,K-Z),i.lineTo(B,K+Z),i.stroke(),d()&&d().length){i.fillStyle="rgba(0,200,255,0.9)";for(const _e of d()){const ce=_e.angle,qe=B+Math.cos(ce)*ie,xe=K+Math.sin(ce)*ie;i.beginPath(),i.arc(qe,xe,Math.max(2,Math.round(ie*.03)),0,Math.PI*2),i.fill()}}}catch(J){console.warn("overlay draw failed",J)}if(o().active&&b())try{const J=b(),ae=q*a/t(E).width,B=(J.x-t(E).width/2)*ae,K=(J.y-t(E).height/2)*ae,ie=J.r*ae,Z=Math.min(1,(Date.now()-o().startTime)/2e3);i.fillStyle="rgba(0, 0, 0, 0.3)",i.fillRect(-q/2-100,-W/2-100,q+200,W+200),i.strokeStyle=`rgba(100, 200, 255, ${.8*(1-Z)})`,i.lineWidth=2;for(let xe=0;xe<3;xe++){const tt=ie*(.3+Z*1.2+xe*.3);i.beginPath(),i.arc(B,K,tt,0,Math.PI*2),i.stroke()}i.strokeStyle="rgba(100, 200, 255, 0.9)",i.lineWidth=3;const _e=Z*Math.PI*6,ce=ie*1.8;i.beginPath(),i.moveTo(B,K),i.lineTo(B+Math.cos(_e)*ce,K+Math.sin(_e)*ce),i.stroke();const qe=4+Math.sin(Z*Math.PI*4)*2;i.fillStyle=`rgba(100, 200, 255, ${.9*Math.sin(Z*Math.PI)})`,i.beginPath(),i.arc(B,K,qe,0,Math.PI*2),i.fill(),i.fillStyle=`rgba(100, 200, 255, ${Math.sin(Z*Math.PI)})`,i.font="bold 14px sans-serif",i.textAlign="center",i.fillText("SCANNING...",B,K-ie-20)}catch(J){console.warn("radar animation failed",J)}i.restore()}Ee(()=>(s(),t(E)),()=>{s()?Ne(s()):(t(E)&&P(E,null),P(re,!1),ve())}),Ee(()=>(p(),o(),t(T)),()=>{p()||o().active?t(T)||P(T,requestAnimationFrame($e)):t(T)&&(cancelAnimationFrame(t(T)),P(T,null),P(R,0))}),yt(),et();var Te=Wn(),Ue=N(Te);Et(Ue,_=>P(v,_),()=>t(v));var Ae=A(Ue,2);{var He=_=>{var C=Fn(),D=N(C);z(C),Re(F=>Me(D,`Speed: ${F??""}°/s`),[()=>(f(),we(()=>f().toFixed(0)))]),oe(_,C)};Oe(Ae,_=>{t(w)&&_(He)})}z(Te),Et(Te,_=>P(n,_),()=>t(n)),oe(e,Te),Be(),h()}async function zn(e,l,s={}){const{x:f,y:p,r:o}=l||{x:e.width/2,y:e.height/2,r:Math.min(e.width,e.height)/2},c=s.samples||720,u=s.innerOffset||-Math.max(2,Math.round(o*.06)),b=s.outerOffset||Math.max(2,Math.round(o*.06)),d=s.thresholdFactor||.6,r=document.createElement("canvas");r.width=e.width,r.height=e.height;const h=r.getContext("2d");h.drawImage(e,0,0);const n=h.getImageData(0,0,r.width,r.height).data,v=r.width,i=r.height;function M(w,L){const U=Math.round(w),te=Math.round(L);if(U<0||U>=v||te<0||te>=i)return 0;const le=(te*v+U)*4,E=n[le],re=n[le+1],se=n[le+2];return .2126*E+.7152*re+.0722*se}const a=new Array(c);for(let w=0;w<c;w++){const L=w/c*Math.PI*2,U=[],te=3;for(let E=0;E<te;E++){const re=E/(te-1),se=o+u+(b-u)*re,Ne=f+se*Math.cos(L),ke=p+se*Math.sin(L);U.push(M(Ne,ke))}const le=U.reduce((E,re)=>E+re,0)/U.length;a[w]=le}const g=a.reduce((w,L)=>w+L,0)/a.length,m=Math.sqrt(a.reduce((w,L)=>w+(L-g)**2,0)/a.length),x=g+m*d,S=a.map(w=>w>x);let k=0,O=!1,$=[],G=0;for(let w=0;w<S.length*2;w++){const L=w%S.length;if(S[L]?(G++,O=!0):(O&&($.push(G),G=0),O=!1),w>=S.length&&!O)break}O&&G>0&&$.push(G);const T=Math.max(2,Math.round(c/360*(s.minDegrees||5))),R=$.filter(w=>w>=T);k=R.length;const V=[];let ne=0;for(const w of $){const L=ne%c,U=(ne+w-1)%c,te=(L+Math.floor(w/2))%c;V.push({start:L,end:U,mid:te,angle:te/c*2*Math.PI}),ne+=w+1}return{count:k,samples:a,mask:S,groups:R,positions:V,canvas:r}}function Tt(e){const l=new OffscreenCanvas(e.width,e.height);l.getContext("2d").drawImage(e,0,0);const f=cv.imread(l);cv.cvtColor(f,f,cv.COLOR_RGBA2GRAY);const p=new cv.Mat;cv.HoughCircles(f,p,cv.HOUGH_GRADIENT,1,50,100,40,e.width*.3,e.width*.6);const[o,c,u]=p.data32F;return f.delete(),p.delete(),{x:o,y:c,r:u}}function Gn(e,l=24,s={}){const f=[],{width:p,height:o}=e,c=s.circle||{x:p/2,y:o/2,r:Math.min(p,o)/2},u=Math.round(c.r*2),b=s.margin??1.05,d=s.outputSize||Math.max(32,Math.round(u*b)),r=s.fps||24,h=typeof s.rotationSpeed=="number"?s.rotationSpeed:0,n=s.direction==null?1:s.direction,v=document.createElement("canvas");v.width=u,v.height=u;const i=v.getContext("2d"),M=Math.round(c.x-c.r),a=Math.round(c.y-c.r);try{i.drawImage(e,M,a,u,u,0,0,u,u)}catch{i.drawImage(e,0,0)}i.globalCompositeOperation="destination-in",i.beginPath(),i.arc(u/2,u/2,u/2,0,Math.PI*2),i.fillStyle="black",i.fill(),i.globalCompositeOperation="source-over";const m=h/r*Math.PI/180*n;Math.round(u*(s.zoom||1));for(let x=0;x<l;x++){const S=x*m,k=document.createElement("canvas");k.width=d,k.height=d;const O=k.getContext("2d");O.translate(d/2,d/2),O.rotate(S);const $=Math.round(u*(s.zoom||1)),G=$;O.drawImage(v,-$/2,-G/2,$,G),f.push(k)}return f}function Un(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ze(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ut={exports:{}},At;function Hn(){return At||(At=1,(function(e,l){(function(s){e.exports=s()})(function(){return(function s(f,p,o){function c(d,r){if(!p[d]){if(!f[d]){var h=typeof Ze=="function"&&Ze;if(!r&&h)return h(d,!0);if(u)return u(d,!0);var n=new Error("Cannot find module '"+d+"'");throw n.code="MODULE_NOT_FOUND",n}var v=p[d]={exports:{}};f[d][0].call(v.exports,function(i){var M=f[d][1][i];return c(M||i)},v,v.exports,s,f,p,o)}return p[d].exports}for(var u=typeof Ze=="function"&&Ze,b=0;b<o.length;b++)c(o[b]);return c})({1:[function(s,f,p){function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}f.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(r){if(!u(r)||r<0||isNaN(r))throw TypeError("n must be a positive number");return this._maxListeners=r,this},o.prototype.emit=function(r){var h,n,v,i,M,a;if(this._events||(this._events={}),r==="error"&&(!this._events.error||b(this._events.error)&&!this._events.error.length)){if(h=arguments[1],h instanceof Error)throw h;var g=new Error('Uncaught, unspecified "error" event. ('+h+")");throw g.context=h,g}if(n=this._events[r],d(n))return!1;if(c(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(b(n))for(i=Array.prototype.slice.call(arguments,1),a=n.slice(),v=a.length,M=0;M<v;M++)a[M].apply(this,i);return!0},o.prototype.addListener=function(r,h){var n;if(!c(h))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",r,c(h.listener)?h.listener:h),this._events[r]?b(this._events[r])?this._events[r].push(h):this._events[r]=[this._events[r],h]:this._events[r]=h,b(this._events[r])&&!this._events[r].warned&&(d(this._maxListeners)?n=o.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[r].length>n&&(this._events[r].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[r].length),typeof console.trace=="function"&&console.trace())),this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(r,h){if(!c(h))throw TypeError("listener must be a function");var n=!1;function v(){this.removeListener(r,v),n||(n=!0,h.apply(this,arguments))}return v.listener=h,this.on(r,v),this},o.prototype.removeListener=function(r,h){var n,v,i,M;if(!c(h))throw TypeError("listener must be a function");if(!this._events||!this._events[r])return this;if(n=this._events[r],i=n.length,v=-1,n===h||c(n.listener)&&n.listener===h)delete this._events[r],this._events.removeListener&&this.emit("removeListener",r,h);else if(b(n)){for(M=i;M-- >0;)if(n[M]===h||n[M].listener&&n[M].listener===h){v=M;break}if(v<0)return this;n.length===1?(n.length=0,delete this._events[r]):n.splice(v,1),this._events.removeListener&&this.emit("removeListener",r,h)}return this},o.prototype.removeAllListeners=function(r){var h,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[r]&&delete this._events[r],this;if(arguments.length===0){for(h in this._events)h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[r],c(n))this.removeListener(r,n);else if(n)for(;n.length;)this.removeListener(r,n[n.length-1]);return delete this._events[r],this},o.prototype.listeners=function(r){var h;return!this._events||!this._events[r]?h=[]:c(this._events[r])?h=[this._events[r]]:h=this._events[r].slice(),h},o.prototype.listenerCount=function(r){if(this._events){var h=this._events[r];if(c(h))return 1;if(h)return h.length}return 0},o.listenerCount=function(r,h){return r.listenerCount(h)};function c(r){return typeof r=="function"}function u(r){return typeof r=="number"}function b(r){return typeof r=="object"&&r!==null}function d(r){return r===void 0}},{}],2:[function(s,f,p){var o,c,u,b,d;d=navigator.userAgent.toLowerCase(),b=navigator.platform.toLowerCase(),o=d.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],u=o[1]==="ie"&&document.documentMode,c={name:o[1]==="version"?o[3]:o[1],version:u||parseFloat(o[1]==="opera"&&o[4]?o[4]:o[2]),platform:{name:d.match(/ip(?:ad|od|hone)/)?"ios":(d.match(/(?:webos|android)/)||b.match(/mac|win|linux/)||["other"])[0]}},c[c.name]=!0,c[c.name+parseInt(c.version,10)]=!0,c.platform[c.platform.name]=!0,f.exports=c},{}],3:[function(s,f,p){var o,c,u,b=function(n,v){for(var i in v)d.call(v,i)&&(n[i]=v[i]);function M(){this.constructor=n}return M.prototype=v.prototype,n.prototype=new M,n.__super__=v.prototype,n},d={}.hasOwnProperty,r=[].indexOf||function(n){for(var v=0,i=this.length;v<i;v++)if(v in this&&this[v]===n)return v;return-1},h=[].slice;o=s("events").EventEmitter,u=s("./browser.coffee"),c=(function(n){var v,i;b(M,n),v={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},i={delay:500,copy:!1};function M(a){var g,m,x;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(a);for(m in v)x=v[m],(g=this.options)[m]==null&&(g[m]=x)}return M.prototype.setOption=function(a,g){if(this.options[a]=g,this._canvas!=null&&(a==="width"||a==="height"))return this._canvas[a]=g},M.prototype.setOptions=function(a){var g,m,x;m=[];for(g in a)d.call(a,g)&&(x=a[g],m.push(this.setOption(g,x)));return m},M.prototype.addFrame=function(a,g){var m,x;g==null&&(g={}),m={},m.transparent=this.options.transparent;for(x in i)m[x]=g[x]||i[x];if(this.options.width==null&&this.setOption("width",a.width),this.options.height==null&&this.setOption("height",a.height),typeof ImageData<"u"&&ImageData!==null&&a instanceof ImageData)m.data=a.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&a instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&a instanceof WebGLRenderingContext)g.copy?m.data=this.getContextData(a):m.context=a;else if(a.childNodes!=null)g.copy?m.data=this.getImageData(a):m.image=a;else throw new Error("Invalid image");return this.frames.push(m)},M.prototype.render=function(){var a,g,m;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var x,S,k;for(k=[],x=0,S=this.frames.length;0<=S?x<S:x>S;0<=S?++x:--x)k.push(null);return k}).call(this),g=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(a=0,m=g;0<=m?a<m:a>m;0<=m?++a:--a)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},M.prototype.abort=function(){for(var a;a=this.activeWorkers.shift(),a!=null;)this.log("killing active worker"),a.terminate();return this.running=!1,this.emit("abort")},M.prototype.spawnWorkers=function(){var a,g,m;return a=Math.min(this.options.workers,this.frames.length),(function(){m=[];for(var x=g=this.freeWorkers.length;g<=a?x<a:x>a;g<=a?x++:x--)m.push(x);return m}).apply(this).forEach((function(x){return function(S){var k;return x.log("spawning worker "+S),k=new Worker(x.options.workerScript),k.onmessage=function(O){return x.activeWorkers.splice(x.activeWorkers.indexOf(k),1),x.freeWorkers.push(k),x.frameFinished(O.data)},x.freeWorkers.push(k)}})(this)),a},M.prototype.frameFinished=function(a){var g,m;if(this.log("frame "+a.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[a.index]=a,this.options.globalPalette===!0&&(this.options.globalPalette=a.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(g=1,m=this.freeWorkers.length;1<=m?g<m:g>m;1<=m?++g:--g)this.renderNextFrame();return r.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},M.prototype.finishRendering=function(){var a,g,m,x,S,k,O,$,G,T,R,V,ne,w,L,U;for($=0,w=this.imageParts,S=0,G=w.length;S<G;S++)g=w[S],$+=(g.data.length-1)*g.pageSize+g.cursor;for($+=g.pageSize-g.cursor,this.log("rendering finished - filesize "+Math.round($/1e3)+"kb"),a=new Uint8Array($),V=0,L=this.imageParts,k=0,T=L.length;k<T;k++)for(g=L[k],U=g.data,m=O=0,R=U.length;O<R;m=++O)ne=U[m],a.set(ne,V),m===g.data.length-1?V+=g.cursor:V+=g.pageSize;return x=new Blob([a],{type:"image/gif"}),this.emit("finished",x,a)},M.prototype.renderNextFrame=function(){var a,g,m;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return a=this.frames[this.nextFrame++],m=this.freeWorkers.shift(),g=this.getTask(a),this.log("starting frame "+(g.index+1)+" of "+this.frames.length),this.activeWorkers.push(m),m.postMessage(g)},M.prototype.getContextData=function(a){return a.getImageData(0,0,this.options.width,this.options.height).data},M.prototype.getImageData=function(a){var g;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),g=this._canvas.getContext("2d"),g.setFill=this.options.background,g.fillRect(0,0,this.options.width,this.options.height),g.drawImage(a,0,0),this.getContextData(g)},M.prototype.getTask=function(a){var g,m;if(g=this.frames.indexOf(a),m={index:g,last:g===this.frames.length-1,delay:a.delay,transparent:a.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:u.name==="chrome"},a.data!=null)m.data=a.data;else if(a.context!=null)m.data=this.getContextData(a.context);else if(a.image!=null)m.data=this.getImageData(a.image);else throw new Error("Invalid frame");return m},M.prototype.log=function(){var a;if(a=1<=arguments.length?h.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,a)},M})(o),f.exports=c},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(ut)),ut.exports}var qn=Hn();const Yn=Un(qn),jn=""+new URL("../assets/gif.worker.CjkyQP34.js",import.meta.url).href;async function Xn(e,l=24){if(!e||e.length===0)throw new Error("No frames to export");const s=new Yn({workers:2,quality:10,width:e[0].width,height:e[0].height,workerScript:jn,repeat:0,background:null}),f=Math.round(1e3/l);for(const p of e){const o=p.width,c=p.height,u=document.createElement("canvas");u.width=o,u.height=c;const b=u.getContext("2d");b.fillStyle="#ffffff",b.fillRect(0,0,o,c),b.drawImage(p,0,0),s.addFrame(u,{delay:f,copy:!0})}return new Promise((p,o)=>{s.on("finished",function(c){const u=URL.createObjectURL(c);p(u)}),s.on("error",o),s.render()})}var Bn=de('<div class="export-overlay svelte-14nyow8" role="status" aria-live="polite"><div class="export-box svelte-14nyow8"><div class="spinner svelte-14nyow8" aria-hidden=""></div> <div class="export-text svelte-14nyow8">Working… Exporting GIF — please wait</div></div></div>'),Vn=de('<div class="drag-handle svelte-14nyow8" title="Drag to move"></div>'),Jn=de('<div><!> <div style="display:flex;gap:12px;align-items:center;" class="svelte-14nyow8"><button class="speed-btn svelte-14nyow8">−</button> <div style="text-align:center;min-width:120px;" class="svelte-14nyow8"><div class="speed-display svelte-14nyow8"> </div> <div style="font-size:11px;opacity:0.6;margin-top:4px;" class="svelte-14nyow8">Rotation Speed</div></div> <button class="speed-btn svelte-14nyow8">+</button></div></div>'),Kn=de('<div class="svelte-14nyow8"><strong class="svelte-14nyow8">Circle:</strong> </div>'),Zn=de('<div class="panel svelte-14nyow8"><!> <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><button class="svelte-14nyow8"> </button> <button class="svelte-14nyow8">Reverse</button> <button>Detect Circle & Count</button> <button class="svelte-14nyow8">Apply Suggested Speed</button> <button class="svelte-14nyow8"> </button> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">Frames:</span> <input type="number" min="3" step="1" style="width:70px;padding:4px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Show Overlay</span></label></div> <!> <div style="margin-top:12px;" class="svelte-14nyow8"><div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><div class="svelte-14nyow8"><strong class="svelte-14nyow8">Current Speed:</strong> <em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Touch: drag up to speed up, down to slow down)</em></div> <div style="display:flex;gap:6px;align-items:center;" class="svelte-14nyow8"><label for="manual-speed-input" style="font-size:12px;" class="svelte-14nyow8">Type speed:</label> <input id="manual-speed-input" type="number" min="1" step="1" style="width:100px;padding:6px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <button class="svelte-14nyow8">Set</button></div></div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Detected count:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Suggested speed:</strong> </div> <!></div></div>');function Qn(e,l){Xe(l,!1);const s=()=>ee(Fe,"$imageUrl",r),f=()=>ee(Pe,"$rotationSpeed",r),p=()=>ee(pt,"$detectedCircle",r),o=()=>ee($t,"$detectedCount",r),c=()=>ee(ft,"$suggestedRotationSpeed",r),u=()=>ee(gt,"$overlayVisible",r),b=()=>ee(We,"$isPlaying",r),d=()=>ee(wt,"$playerCanvas",r),[r,h]=xt(),n=j(),v=j(),i=j(),M=j();let a=j(!1);async function g(){We.update(y=>!y)}function m(){Pe.update(y=>Math.min(1e4,y+60))}function x(){Pe.update(y=>Math.max(10,y-60))}function S(){vt.update(y=>y*-1)}async function k(){const y=s();if(!y)return;P(a,!0);const I=Date.now();mt.set({active:!0,progress:0,startTime:I});try{const H=await Ce(y);let X=null;try{typeof cv<"u"&&Tt&&(X=Tt(H))}catch(ge){console.warn("cv detect failed, falling back",ge)}X||(X={x:H.width/2,y:H.height/2,r:Math.min(H.width,H.height)/2*.9});const Q=await zn(H,X,{samples:720}),pe=2e3-(Date.now()-I);pe>0&&await new Promise(ge=>setTimeout(ge,pe)),pt.set(X),$t.set(Q.count),Nt.set(Q.positions||[]);const Ye=(Q.count>0?360/Q.count:1)*30;ft.set(Ye),mt.set({active:!1,progress:1,startTime:I})}finally{P(a,!1)}}function O(){ft.subscribe(y=>{y&&Pe.set(y)})()}let $=j(0);function G(){const y=Number(t($))||0;y<=0||Pe.set(y)}let T=j(!1);async function R(){const y=s()||it(Fe);if(!y)return alert("No image loaded to export.");if(!t(n))return alert("Please detect the circle before exporting the GIF.");const I=await Ce(y),H=document.createElement("canvas");H.width=I.width,H.height=I.height,H.getContext("2d").drawImage(I,0,0,I.width,I.height),P(T,!0);try{const Q=t(V)||24,be=t(n),pe=be.r*2*1.1,Se=Math.min(480,Math.round(pe)),Je=Number(it(Pe)||0),Ye=Number(it(vt)||1),ge=Gn(H,Q,{circle:be,outputSize:Se,margin:1.05,zoom:1,fps:24,rotationSpeed:Je,direction:Ye}),nt=await Xn(ge,24),je=document.createElement("a");je.href=nt,je.download="phenaki-export.gif",document.body.appendChild(je),je.click(),je.remove()}catch(Q){console.error("GIF export failed",Q),alert("GIF export failed: "+(Q&&Q.message))}finally{P(T,!1)}}let V=j(24);const ne="phenaki.speedControlPos";let w=j({left:null,top:null}),L=j(!1),U=j(!1),te={x:0,y:0},le={left:0,top:0},E=0;function re(){try{const y=localStorage.getItem(ne);y&&P(w,JSON.parse(y))}catch{}}function se(){try{localStorage.setItem(ne,JSON.stringify(t(w)))}catch{}}function Ne(y){const I=Date.now(),H=I-E<300;if(E=I,y.target&&y.target.closest&&y.target.closest("button"))return;const X=y.target&&y.target.closest&&y.target.closest(".drag-handle");if(!(!H&&!X)){P(L,!0),P(U,!0),te={x:y.clientX,y:y.clientY},le={left:t(w).left??Math.round((window.innerWidth-200)/2),top:t(w).top??Math.round((window.innerHeight-80)/2)};try{y.target.setPointerCapture(y.pointerId)}catch{}window.addEventListener("pointermove",ke),window.addEventListener("pointerup",ze)}}function ke(y){if(!t(U))return;const I=y.clientX-te.x,H=y.clientY-te.y;Y(w,t(w).left=Math.round(le.left+I)),Y(w,t(w).top=Math.round(le.top+H))}function ze(y){P(U,!1),P(L,!1);try{y.target.releasePointerCapture&&y.target.releasePointerCapture(y.pointerId)}catch{}window.removeEventListener("pointermove",ke),window.removeEventListener("pointerup",ze),se()}_t(()=>{re(),t(w).left==null&&Y(w,t(w).left=Math.round((window.innerWidth-200)/2)),t(w).top==null&&Y(w,t(w).top=Math.round((window.innerHeight-80)/2));function y(){const pe=Math.max(8,window.innerWidth-200-8),Se=Math.max(8,window.innerHeight-80-8);t(w).left==null&&Y(w,t(w).left=pe),t(w).top==null&&Y(w,t(w).top=Se),Y(w,t(w).left=Math.min(Math.max(t(w).left,8),pe)),Y(w,t(w).top=Math.min(Math.max(t(w).top,8),Se))}y();const I=()=>{y(),se()};return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)});function Ce(y){return new Promise((I,H)=>{const X=new Image;X.crossOrigin="anonymous",X.onload=()=>I(X),X.onerror=H,X.src=y})}Ee(()=>f(),()=>{P($,Number(f()||0))}),Ee(()=>p(),()=>{P(n,p())}),Ee(()=>o(),()=>{P(v,o())}),Ee(()=>c(),()=>{P(i,c())}),Ee(()=>u(),()=>{P(M,u())}),yt(),et();var Le=Zn(),Ge=N(Le);{var Ve=y=>{var I=Bn();oe(y,I)};Oe(Ge,y=>{t(T)&&y(Ve)})}var $e=A(Ge,2),ve=N($e),Te=N(ve,!0);z(ve);var Ue=A(ve,2),Ae=A(Ue,2),He=A(Ae,2),_=A(He,2),C=N(_,!0);z(_);var D=A(_,2),F=A(N(D),2);ot(F),z(D);var q=A(D,2),W=N(q);ot(W),Qe(2),z(q),z($e);var ye=A($e,2);{var Ie=y=>{var I=Jn(),H=N(I);{var X=ge=>{var nt=Vn();oe(ge,nt)};Oe(H,ge=>{t(L)&&ge(X)})}var Q=A(H,2),be=N(Q),pe=A(be,2),Se=N(pe),Je=N(Se);z(Se),Qe(2),z(pe);var Ye=A(pe,2);z(Q),z(I),Re(ge=>{Ct(I,1,`speed-control ${t(L)?"dragMode":""} ${t(U)?"dragging":""}`,"svelte-14nyow8"),Cn(I,`left: ${t(w),we(()=>t(w).left??16)??""}px; top: ${t(w),we(()=>t(w).top??16)??""}px;`),Me(Je,`${ge??""}°/s`)},[()=>(f(),we(()=>f().toFixed(0)))]),fe("click",be,x),fe("click",Ye,m),fe("pointerdown",I,Ne),oe(y,I)};Oe(ye,y=>{p()&&y(Ie)})}var J=A(ye,2),ae=N(J),B=N(ae),K=A(N(B));Qe(),z(B);var ie=A(B,2),Z=A(N(ie),2);ot(Z);var _e=A(Z,2);z(ie),z(ae);var ce=A(ae,2),qe=A(N(ce));z(ce);var xe=A(ce,2),tt=A(N(xe));z(xe);var zt=A(xe,2);{var Gt=y=>{var I=Kn(),H=A(N(I));z(I),Re((X,Q,be)=>Me(H,` x=${X??""}, y=${Q??""}, r=${be??""}`),[()=>(t(n),we(()=>Math.round(t(n).x))),()=>(t(n),we(()=>Math.round(t(n).y))),()=>(t(n),we(()=>Math.round(t(n).r)))]),oe(y,I)};Oe(zt,y=>{t(n)&&y(Gt)})}z(J),z(Le),Re((y,I)=>{Me(Te,b()?"Pause":"Play"),Ct(Ae,1,Sn(t(n)?"":"detect-btn-required"),"svelte-14nyow8"),Ae.disabled=t(a)||!s(),He.disabled=!t(i),_.disabled=t(T)||!d(),Me(C,t(T)?"Exporting...":"Save GIF"),$n(W,t(M)),Me(K,` ${y??""}°/s | `),Me(qe,` ${t(v)??0??""}`),Me(tt,` ${I??""}°/s`)},[()=>(f(),we(()=>f().toFixed(0))),()=>(t(i),we(()=>t(i)?t(i).toFixed(0):"—"))]),fe("click",ve,g),fe("click",Ue,S),fe("click",Ae,k),fe("click",He,O),fe("click",_,R),Lt(F,()=>t(V),y=>P(V,y)),fe("change",W,y=>gt.set(y.target.checked)),Lt(Z,()=>t($),y=>P($,y)),fe("click",_e,G),oe(e,Le),Be(),h()}var er=de("<option> </option>"),tr=de('<div class="selector svelte-ai08gq"><label for="samples" class="svelte-ai08gq">Sample Images:</label> <select id="samples" class="svelte-ai08gq"><option>-- Choose a sample --</option><!></select></div>');function nr(e,l){Xe(l,!1);const s="https://raw.githubusercontent.com/tclaret/phenakistoscope-simulator/main/images",f=[{name:"Woman Chopping Tree",file:"WomanChoppingTree.jpg"},{name:"Dancing",file:"Dancing.jpg"},{name:"Jongleur",file:"Jongleur.png"},{name:"a_cheval",file:"a_cheval.png"},{name:"McLean_1",file:"McLean_1.png"},{name:"Gernamy_1949",file:"Gernamy_1949_R_Balzer.png"},{name:"AEO175939",file:"AEO175939_PhenakistoscopeGiroux60.jpg"},{name:"AEO185553",file:"AEO185553_PhenakistiscopeDisc_ManInBlueAndRed.jpg"},{name:"medium_1990_5036_3369",file:"medium_1990_5036_3369.jpg"},{name:"medium_a001813b",file:"medium_a001813b.jpg"},{name:"tumblr_obd6fh",file:"tumblr_obd6fhGFSZ1r9jbwno1_500.png"},{name:"tumblr_oc1cz",file:"tumblr_oc1czn99ZM1r9jbwno1_500.png"},{name:"Phantasmascope Faces",file:"Phantasmascope_faces.png"},{name:"722a6790240569.5e126845d9b56",file:"722a6790240569.5e126845d9b56.png"},{name:"Fantascope Disc 1833",file:"fantascope-disc-1833.png"}];function p(d){const r=`${s}/${d}`;Fe.set(r),bt.set(r),We.set(!0)}_t(()=>{let d=!1;if(Fe.subscribe(h=>{h&&(d=!0)})(),!d){const h=f[Math.floor(Math.random()*f.length)];h&&p(h.file)}}),et();var o=tr(),c=A(N(o),2),u=N(c);u.value=u.__value="";var b=A(u);xn(b,1,()=>f,d=>d.file,(d,r)=>{var h=er(),n=N(h,!0);z(h);var v={};Re(()=>{Me(n,t(r).name),v!==(v=t(r).file)&&(h.value=(h.__value=t(r).file)??"")}),oe(d,h)}),z(c),z(o),fe("change",c,d=>d.target.value&&p(d.target.value)),oe(e,o),Be()}var rr=de('<div class="container svelte-1uha8ag"><h1 class="svelte-1uha8ag">Phenakistoscope Lab</h1> <p class="sub svelte-1uha8ag">Convert old phenakistoscope discs into animated GIFs</p> <!> <!> <!> <!> <!></div>');function ur(e){var l=rr(),s=A(N(l),4);Dn(s,{});var f=A(s,2);nr(f,{});var p=A(f,2);Rn(p,{});var o=A(p,2);Nn(o,{});var c=A(o,2);Qn(c,{}),z(l),oe(e,l)}export{ur as component};
