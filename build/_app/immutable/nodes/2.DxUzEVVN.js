import{f as fe,a as T,c as je,t as pe}from"../chunks/DidSmI2s.js";import"../chunks/BfDn8e9k.js";import{G as pa,v as Me,w as ma,g as t,av as ga,I as _a,J as wa,K as Ln,L as Fn,M as sn,D as zt,a3 as ya,aq as ba,aa as xa,x as He,C as pn,B as Hn,F as Ma,Q as ne,a1 as zn,ao as Yn,aI as Xn,aJ as ka,y as Vn,A as Sa,aK as Pa,aL as Ca,aM as on,ak as Ta,aN as Ea,aO as Ia,an as $a,z as Da,aP as Mn,N as qa,R as Aa,aQ as La,aR as Fa,aS as Bn,aT as za,aU as Ra,aV as Oa,P as Wa,aW as Na,aX as Ga,aG as Ua,b as qe,O as Jn,p as Ct,j as Tt,s as k,k as E,l as I,aY as Ae,aZ as kn,i as ze,U as P,t as Ce,a_ as te,a$ as ja,ab as ln}from"../chunks/CkcJ_p-v.js";import{e as ce,s as $e}from"../chunks/EstrOUTn.js";import{i as Nt}from"../chunks/BeJGQpUk.js";import{w as he,o as Sn,a as Ha,g as cn}from"../chunks/BzLubvRb.js";import{i as re,s as Pn,a as Z,b as Rn,d as Ya}from"../chunks/CgM4jgzu.js";function Xa(e,i,a){for(var c=[],h=i.length,s=0;s<h;s++)Ea(i[s].e,c,!0);Ia(c,()=>{var o=c.length===0&&a!==null;if(o){var v=a,x=v.parentNode;$a(x),x.append(v),e.items.clear(),De(e,i[0].prev,i[h-1].next)}for(var p=0;p<h;p++){var l=i[p];o||(e.items.delete(l.k),De(e,l.prev,l.next)),Da(l.e,!o)}e.first===i[0]&&(e.first=i[0].prev)})}function Va(e,i,a,c,h,s=null){var o=e,v=new Map,x=null;Me&&ma();var p=null,l=ga(()=>{var d=a();return Xn(d)?d:d==null?[]:Yn(d)}),g,m=!0;function y(){Ba(w,g,o,i,c),p!==null&&(g.length===0?(p.fragment?(o.before(p.fragment),p.fragment=null):Vn(p.effect),M.first=p.effect):Sa(p.effect,()=>{p=null}))}var M=pa(()=>{g=t(l);var d=g.length;let r=!1;if(Me){var f=_a(o)===wa;f!==(d===0)&&(o=Ln(),Fn(o),sn(!1),r=!0)}for(var n=new Set,$=He,S=null,j=Ma(),U=0;U<d;U+=1){Me&&zt.nodeType===ya&&zt.data===ba&&(o=zt,r=!0,sn(!1));var F=g[U],N=c(F,U),z=m?null:v.get(N);z?(xa(z.v,F),z.i=U,j&&$.skipped_effects.delete(z.e)):(z=Ja(m?o:null,S,F,N,U,h,i,a),m&&(z.o=!0,S===null?x=z:S.next=z,S=z),v.set(N,z)),n.add(N)}if(d===0&&s&&!p)if(m)p={fragment:null,effect:pn(()=>s(o))};else{var me=document.createDocumentFragment(),ge=Hn();me.append(ge),p={fragment:me,effect:pn(()=>s(ge))}}if(Me&&d>0&&Fn(Ln()),!m)if(j){for(const[A,q]of v)n.has(A)||$.skipped_effects.add(q.e);$.oncommit(y),$.ondiscard(()=>{})}else y();r&&sn(!0),t(l)}),w={effect:M,items:v,first:x};m=!1,Me&&(o=zt)}function Ba(e,i,a,c,h){var s=i.length,o=e.items,v=e.first,x,p=null,l=[],g=[],m,y,M,w;for(w=0;w<s;w+=1){if(m=i[w],y=h(m,w),M=o.get(y),e.first??=M,!M.o){M.o=!0;var d=p?p.next:v;De(e,p,M),De(e,M,d),fn(M,d,a),p=M,l=[],g=[],v=p.next;continue}if((M.e.f&on)!==0&&Vn(M.e),M!==v){if(x!==void 0&&x.has(M)){if(l.length<g.length){var r=g[0],f;p=r.prev;var n=l[0],$=l[l.length-1];for(f=0;f<l.length;f+=1)fn(l[f],r,a);for(f=0;f<g.length;f+=1)x.delete(g[f]);De(e,n.prev,$.next),De(e,p,n),De(e,$,r),v=r,p=$,w-=1,l=[],g=[]}else x.delete(M),fn(M,v,a),De(e,M.prev,M.next),De(e,M,p===null?e.first:p.next),De(e,p,M),p=M;continue}for(l=[],g=[];v!==null&&v.k!==y;)(v.e.f&on)===0&&(x??=new Set).add(v),g.push(v),v=v.next;if(v===null)continue;M=v}l.push(M),p=M,v=M.next}let S=o.size>s;if(v!==null||x!==void 0){for(var j=x===void 0?[]:Yn(x);v!==null;)(v.e.f&on)===0&&j.push(v),v=v.next;var U=j.length;if(S=o.size-U>s,U>0){var F=null;Xa(e,j,F)}}if(S)for(const N of o.values())N.o||(De(e,p,N),p=N);e.effect.last=p&&p.e}function Ja(e,i,a,c,h,s,o,v){var x=(o&Pa)!==0,p=(o&Ca)===0,l=x?p?ne(a,!1,!1):zn(a):a,g=(o&ka)===0?h:zn(h),m={i:g,v:l,k:c,a:null,e:null,o:!1,prev:i,next:null};try{if(e===null){var y=document.createDocumentFragment();y.append(e=Hn())}return m.e=pn(()=>s(e,l,g,v)),i!==null&&(i.next=m),m}finally{}}function fn(e,i,a){for(var c=e.next?e.next.e.nodes_start:a,h=i?i.e.nodes_start:a,s=e.e.nodes_start;s!==null&&s!==c;){var o=Ta(s);h.before(s),s=o}}function De(e,i,a){i===null?(e.first=a,e.effect.first=a&&a.e):(i.e.next&&(i.e.next.prev=null),i.next=a,i.e.next=a&&a.e),a!==null&&(a.e.prev&&(a.e.prev.next=null),a.prev=i,a.e.prev=i&&i.e)}function Zn(e){var i,a,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(i=0;i<h;i++)e[i]&&(a=Zn(e[i]))&&(c&&(c+=" "),c+=a)}else for(a in e)e[a]&&(c&&(c+=" "),c+=a);return c}function Za(){for(var e,i,a=0,c="",h=arguments.length;a<h;a++)(e=arguments[a])&&(i=Zn(e))&&(c&&(c+=" "),c+=i);return c}function On(e){return typeof e=="object"?Za(e):e??""}const Wn=[...` 	
\r\f¬†\v\uFEFF`];function Ka(e,i,a){var c=e==null?"":""+e;if(i&&(c=c?c+" "+i:i),a){for(var h in a)if(a[h])c=c?c+" "+h:h;else if(c.length)for(var s=h.length,o=0;(o=c.indexOf(h,o))>=0;){var v=o+s;(o===0||Wn.includes(c[o-1]))&&(v===c.length||Wn.includes(c[v]))?c=(o===0?"":c.substring(0,o))+c.substring(v+1):o=v}}return c===""?null:c}function Qa(e,i){return e==null?null:String(e)}function Ot(e,i,a,c,h,s){var o=e.__className;if(Me||o!==a||o===void 0){var v=Ka(a,c,s);(!Me||v!==e.getAttribute("class"))&&(v==null?e.removeAttribute("class"):e.className=v),e.__className=a}else if(s&&h!==s)for(var x in s){var p=!!s[x];(h==null||p!==!!h[x])&&e.classList.toggle(x,p)}return s}function ct(e,i,a,c){var h=e.__style;if(Me||h!==i){var s=Qa(i);(!Me||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=i}return c}function Kn(e,i,a=!1){if(e.multiple){if(i==null)return;if(!Xn(i))return La();for(var c of e.options)c.selected=i.includes(St(c));return}for(c of e.options){var h=St(c);if(Fa(h,i)){c.selected=!0;return}}(!a||i!==void 0)&&(e.selectedIndex=-1)}function er(e){var i=new MutationObserver(()=>{Kn(e,e.__value)});i.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Aa(()=>{i.disconnect()})}function tr(e,i,a=i){var c=new WeakSet,h=!0;Mn(e,"change",s=>{var o=s?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(o),St);else{var x=e.querySelector(o)??e.querySelector("option:not([disabled])");v=x&&St(x)}a(v),He!==null&&c.add(He)}),qa(()=>{var s=i();if(e===document.activeElement){var o=Bn??He;if(c.has(o))return}if(Kn(e,s,h),h&&s===void 0){var v=e.querySelector(":checked");v!==null&&(s=St(v),a(s))}e.__value=s,h=!1}),er(e)}function St(e){return"__value"in e?e.__value:e.value}const nr=Symbol("is custom element"),ar=Symbol("is html");function Mt(e){if(Me){var i=!1,a=()=>{if(!i){if(i=!0,e.hasAttribute("value")){var c=e.value;Wt(e,"value",null),e.value=c}if(e.hasAttribute("checked")){var h=e.checked;Wt(e,"checked",null),e.checked=h}}};e.__on_r=a,Wa(a),Na()}}function rr(e,i){var a=Cn(e);a.value===(a.value=i??void 0)||e.value===i&&(i!==0||e.nodeName!=="PROGRESS")||(e.value=i??"")}function ir(e,i){var a=Cn(e);a.checked!==(a.checked=i??void 0)&&(e.checked=i)}function Wt(e,i,a,c){var h=Cn(e);Me&&(h[i]=e.getAttribute(i),i==="src"||i==="srcset"||i==="href"&&e.nodeName==="LINK")||h[i]!==(h[i]=a)&&(i==="loading"&&(e[Ga]=a),a==null?e.removeAttribute(i):typeof a!="string"&&sr(e).includes(i)?e[i]=a:e.setAttribute(i,a))}function Cn(e){return e.__attributes??={[nr]:e.nodeName.includes("-"),[ar]:e.namespaceURI===za}}var Nn=new Map;function sr(e){var i=e.getAttribute("is")||e.nodeName,a=Nn.get(i);if(a)return a;Nn.set(i,a=[]);for(var c,h=e,s=Element.prototype;s!==h;){c=Oa(h);for(var o in c)c[o].set&&a.push(o);h=Ra(h)}return a}function Gn(e,i,a=i){var c=new WeakSet;Mn(e,"input",async h=>{var s=h?e.defaultValue:e.value;if(s=un(e)?dn(s):s,a(s),He!==null&&c.add(He),await Ua(),s!==(s=i())){var o=e.selectionStart,v=e.selectionEnd,x=e.value.length;if(e.value=s??"",v!==null){var p=e.value.length;o===v&&v===x&&p>x?(e.selectionStart=p,e.selectionEnd=p):(e.selectionStart=o,e.selectionEnd=Math.min(v,p))}}}),(Me&&e.defaultValue!==e.value||qe(i)==null&&e.value)&&(a(un(e)?dn(e.value):e.value),He!==null&&c.add(He)),Jn(()=>{var h=i();if(e===document.activeElement){var s=Bn??He;if(c.has(s))return}un(e)&&h===dn(e.value)||e.type==="date"&&!h&&!e.value||h!==e.value&&(e.value=h??"")})}function or(e,i,a=i){Mn(e,"change",c=>{var h=c?e.defaultChecked:e.checked;a(h)}),(Me&&e.defaultChecked!==e.checked||qe(i)==null)&&a(e.checked),Jn(()=>{var c=i();e.checked=!!c})}function un(e){var i=e.type;return i==="number"||i==="range"}function dn(e){return e===""?null:+e}const Tn=he(null),ut=he(null),rt=he(!1),Qe=he(360),mn=he(1),gn=he(null),Un=he(0),hn=he(1),Qn=he([]),_n=he(!1),ft=he(!1),Pt=he(!1),wn=he({translateX:0,translateY:0,scale:1}),kt=he({active:!1,progress:0,startTime:0}),yn=he(null),bn=he(!1),Ke=he(50),xn=he(!1);var lr=fe('<label>Choose image: <input type="file" accept="image/*"/></label>');function cr(e,i){Ct(i,!1);function a(s){const o=s.target.files[0];if(!o)return;const v=URL.createObjectURL(o);Tn.set(v),ut.set(v),rt.set(!0)}Nt();var c=lr(),h=k(E(c));I(c),ce("change",h,a),T(e,c),Tt()}var fr=fe('<div class="preview svelte-1th6cal"><img alt="Selected disc preview" class="svelte-1th6cal"/></div>');function ur(e,i){Ct(i,!1);const a=()=>Z(Tn,"$previewUrl",c),[c,h]=Pn(),s=ne();Ae(()=>a(),()=>{P(s,a())}),kn();var o=je(),v=ze(o);{var x=p=>{var l=fr(),g=E(l);I(l),Ce(()=>Wt(g,"src",t(s))),T(p,l)};re(v,p=>{t(s)&&p(x)})}T(e,o),Tt(),h()}var dr=fe('<div class="speed-hud svelte-byh4af"> </div>'),hr=fe('<div class="edit-mode-indicator svelte-byh4af">‚öôÔ∏è EDIT MODE - Drag to position ‚Ä¢ Scroll to zoom</div>'),vr=fe('<div><canvas class="svelte-byh4af"></canvas> <!> <!></div>');function pr(e,i){Ct(i,!1);const a=()=>Z(ft,"$editMode",w),c=()=>Z(rt,"$isPlaying",w),h=()=>Z(ut,"$imageUrl",w),s=()=>Z(xn,"$isMobile",w),o=()=>Z(Qe,"$rotationSpeed",w),v=()=>Z(kt,"$detectionAnimation",w),x=()=>Z(mn,"$rotationDirection",w),p=()=>Z(gn,"$detectedCircle",w),l=()=>Z(_n,"$overlayVisible",w),g=()=>Z(Qn,"$detectedPositions",w),m=()=>Z(Pt,"$confirmedDetection",w),y=()=>Z(bn,"$flickerEnabled",w),M=()=>Z(Ke,"$flickerFrequency",w),[w,d]=Pn();let r=ne(),f=ne(),n,$=0,S=ne(1);const j=1,U=4;let F=ne(0),N=ne(0);const z=new Map;let me=1,ge=0,A=0,q=ne(),ee=ne(0),ue=0,_e=1,de=ne(!1),ae,Te=0,L=0,Re=0,D=ne(null),Ee=ne(!1),Le;function Et(_){P(Ee,!1),P(D,new Image),te(D,t(D).crossOrigin="anonymous"),te(D,t(D).onload=()=>{console.log("Image loaded:",_,"Size:",t(D).width,"x",t(D).height),P(Ee,!0),dt(),Fe()}),te(D,t(D).onerror=C=>{console.error("Erreur chargement:",_,C),P(Ee,!1)}),te(D,t(D).src=_)}function dt(){if(!t(f)||!t(r))return;const _=t(r).getBoundingClientRect(),C=window.devicePixelRatio||1;if(t(D)&&t(D).width&&t(D).height){const H=t(D).width,K=t(D).height,Q=Math.min(1400,Math.max(150,Math.round(_.width*Math.sqrt(H*H+K*K)/H)));te(r,t(r).style.height=Q+"px");const Y=t(r).getBoundingClientRect();te(f,t(f).style.width=Y.width+"px"),te(f,t(f).style.height=Y.height+"px"),te(f,t(f).width=Math.round(Y.width*C)),te(f,t(f).height=Math.round(Y.height*C))}else te(f,t(f).style.width=_.width+"px"),te(f,t(f).style.height=_.height+"px"),te(f,t(f).width=Math.round(_.width*C)),te(f,t(f).height=Math.round(_.height*C));n&&n.setTransform(C,0,0,C,0,0),Fe()}Sn(()=>{const _=()=>{const H="ontouchstart"in window||navigator.maxTouchPoints>0||window.innerWidth<768;xn.set(H)};if(_(),window.addEventListener("resize",_),t(f)){if(yn.set(t(f)),n=t(f).getContext("2d"),t(r)){const C=()=>{s()?t(S)>1||a()?te(r,t(r).style.touchAction="none"):te(r,t(r).style.touchAction="pan-y"):te(r,t(r).style.touchAction="none")};C(),wn.subscribe(C),ft.subscribe(C)}t(r)&&t(r).addEventListener("wheel",mt,{passive:!1}),dt(),Le=new ResizeObserver(()=>dt()),t(r)&&Le.observe(t(r)),t(r)&&(t(r).addEventListener("pointerdown",ht),t(r).addEventListener("pointermove",it),t(r).addEventListener("pointerup",vt),t(r).addEventListener("pointerleave",pt))}return()=>{Le&&Le.disconnect(),window.removeEventListener("resize",_)}});function ht(_){if(!t(r))return;(a()||t(S)>1)&&(_.preventDefault(),_.stopPropagation()),t(r).setPointerCapture(_.pointerId),z.set(_.pointerId,{x:_.clientX,y:_.clientY});const C=Date.now(),H=_.clientX-L,K=_.clientY-Re,Q=Math.sqrt(H*H+K*K);if(C-Te<300&&Q<50&&!a()){rt.update(Y=>!Y),z.clear(),Te=0;return}if(Te=C,L=_.clientX,Re=_.clientY,z.size===1&&(ge=_.clientX,A=_.clientY,ue=_.clientY,_e=o()||1),z.size===2){const Y=Array.from(z.values());me=t(S),it.pinchStartDist=Math.hypot(Y[0].x-Y[1].x,Y[0].y-Y[1].y)}}function it(_){if(t(r)){if((a()||t(S)>1)&&z.has(_.pointerId)&&(_.preventDefault(),_.stopPropagation()),z.has(_.pointerId)&&z.set(_.pointerId,{x:_.clientX,y:_.clientY}),z.size===2){const C=Array.from(z.values()),H=C[0],K=C[1],Q=Math.hypot(H.x-K.x,H.y-K.y),Y=it.pinchStartDist||Q,Ye=Q/Y;let We=Math.max(j,Math.min(U,me*Ye));const Ie={x:(H.x+K.x)/2,y:(H.y+K.y)/2},Xe=t(f).clientWidth,R=t(f).clientHeight,J=t(r).getBoundingClientRect(),X=Ie.x-(J.left+Xe/2)-t(F),G=Ie.y-(J.top+R/2)-t(N),V=t(S),ve=We;P(F,t(F)-(ve/V-1)*X),P(N,t(N)-(ve/V-1)*G),P(S,We),P(de,!0),clearTimeout(ae);return}if(z.size===1){if(z.values().next().value,t(S)>1||a()){const C=_.clientX-ge,H=_.clientY-A;P(F,t(F)+C),P(N,t(N)+H),ge=_.clientX,A=_.clientY,Fe();return}else if(!s()){const C=ue-_.clientY,K=Math.round(C*8),Q=Math.max(10,Math.min(1e4,Math.round(_e+K)));Qe.set(Q),P(de,!0),clearTimeout(ae)}}}}function vt(_){if(t(r)){try{t(r).releasePointerCapture(_.pointerId)}catch{}clearTimeout(ae),P(de,!0),ae=setTimeout(()=>{P(de,!1)},4e3),z.delete(_.pointerId),z.size===0&&(clearTimeout(ae),P(de,!1))}}function pt(){clearTimeout(ae),P(de,!0),ae=setTimeout(()=>{P(de,!1)},4e3)}function mt(_){if(!t(r)||!_.ctrlKey&&!_.metaKey)return;_.preventDefault();const H=1+(-_.deltaY>0?.1:-.1),K=Math.max(j,Math.min(U,t(S)*H)),Q=t(r).getBoundingClientRect(),Y=_.clientX-(Q.left+t(f).clientWidth/2)-t(F),Ye=_.clientY-(Q.top+t(f).clientHeight/2)-t(N);P(F,t(F)-(K/t(S)-1)*Y),P(N,t(N)-(K/t(S)-1)*Ye),P(S,K),Fe()}Ha(()=>{t(q)&&cancelAnimationFrame(t(q)),Le&&Le.disconnect(),ae&&clearTimeout(ae),t(r)&&(t(r).removeEventListener("pointerdown",ht),t(r).removeEventListener("pointermove",it),t(r).removeEventListener("pointerup",vt),t(r).removeEventListener("pointerleave",pt),t(r)&&t(r).removeEventListener("wheel",mt)),yn.set(null)});function st(_){const C=c()||v().active||a();if(!C||!t(Ee)){P(ee,0),!C&&t(q)&&(cancelAnimationFrame(t(q)),P(q,null));return}t(ee)||P(ee,_);const H=_-t(ee);if(P(ee,_),c()&&!a()){const K=o()||0;$+=K*(x()||1)*(H/1e3)}Fe(),P(q,requestAnimationFrame(st))}function Fe(){if(!t(Ee)||!n||!t(D)||!t(f)){console.log("DrawFrame skipped:",{imageReady:t(Ee),ctx:!!n,htmlImg:!!t(D),canvas:!!t(f)});return}const _=t(f).clientWidth,C=t(f).clientHeight;n.clearRect(0,0,_,C),n.save();const H=t(D).width/t(D).height,K=_/C;let Q,Y;H>K?(Q=_,Y=_/H):(Y=C,Q=C*H);const Ye=Q*t(S),We=Y*t(S);let Ie=0,Xe=0;if(p()){const R=Q/t(D).width;Ie=(p().x-t(D).width/2)*R*t(S),Xe=(p().y-t(D).height/2)*R*t(S)}if(n.translate(_/2+t(F),C/2+t(N)),n.translate(Ie,Xe),n.rotate($*Math.PI/180),n.translate(-Ie,-Xe),n.drawImage(t(D),-Ye/2,-We/2,Ye,We),l()&&p())try{const R=p(),J=Q*t(S)/t(D).width,X=(R.x-t(D).width/2)*J,G=(R.y-t(D).height/2)*J,V=R.r*J;n.beginPath(),n.lineWidth=Math.max(2,2),n.strokeStyle="rgba(255,160,0,0.85)",n.arc(X,G,V,0,Math.PI*2),n.stroke(),n.strokeStyle="rgba(255,160,0,0.85)",n.lineWidth=Math.max(2,2);const ve=Math.max(15,V*.15);if(n.beginPath(),n.moveTo(X-ve,G),n.lineTo(X+ve,G),n.stroke(),n.beginPath(),n.moveTo(X,G-ve),n.lineTo(X,G+ve),n.stroke(),g()&&g().length){n.fillStyle="rgba(0,200,255,0.9)";for(const Ve of g()){const Ne=Ve.angle,tt=X+Math.cos(Ne)*V,Be=G+Math.sin(Ne)*V;n.beginPath(),n.arc(tt,Be,Math.max(2,Math.round(V*.03)),0,Math.PI*2),n.fill()}}}catch(R){console.warn("overlay draw failed",R)}if(a()&&!m())try{let R;if(a()){const J=v().startTime||0;R=(J>0?Date.now()-J:Date.now())%2e3/2e3}else R=Math.min(1,(Date.now()-v().startTime)/2e3);if(n.fillStyle=a()?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.3)",n.fillRect(-Q/2-100,-Y/2-100,Q+200,Y+200),p()){const J=p(),X=Q*t(S)/t(D).width,G=(J.x-t(D).width/2)*X,V=(J.y-t(D).height/2)*X,ve=J.r*X;n.strokeStyle=`rgba(100, 200, 255, ${.8*(1-R)})`,n.lineWidth=2;for(let Be=0;Be<3;Be++){const gt=ve*(.3+R*1.2+Be*.3);n.beginPath(),n.arc(G,V,gt,0,Math.PI*2),n.stroke()}n.strokeStyle="rgba(100, 200, 255, 0.9)",n.lineWidth=3;const Ve=R*Math.PI*6,Ne=ve*1.8;n.beginPath(),n.moveTo(G,V),n.lineTo(G+Math.cos(Ve)*Ne,V+Math.sin(Ve)*Ne),n.stroke();const tt=4+Math.sin(R*Math.PI*4)*2;n.fillStyle=`rgba(100, 200, 255, ${.9*Math.sin(R*Math.PI)})`,n.beginPath(),n.arc(G,V,tt,0,Math.PI*2),n.fill(),n.fillStyle=`rgba(100, 200, 255, ${Math.sin(R*Math.PI)})`,n.font="bold 14px sans-serif",n.textAlign="center",n.fillText("SCANNING...",G,V-ve-20)}else{const J=Math.max(Q,Y)/2;n.strokeStyle=`rgba(100, 200, 255, ${.6})`,n.lineWidth=2;for(let G=0;G<4;G++){const V=J*(R+G*.25)%1,ve=1-V;n.strokeStyle=`rgba(100, 200, 255, ${ve*.6})`,n.beginPath(),n.arc(0,0,V*J,0,Math.PI*2),n.stroke()}n.strokeStyle="rgba(100, 200, 255, 0.8)",n.lineWidth=3;const X=R*Math.PI*4;n.beginPath(),n.moveTo(0,0),n.lineTo(Math.cos(X)*J,Math.sin(X)*J),n.stroke(),n.fillStyle=`rgba(100, 200, 255, ${.8+.2*Math.sin(R*Math.PI*4)})`,n.font="bold 18px sans-serif",n.textAlign="center",a()?(n.fillText("‚öôÔ∏è EDIT MODE - ADJUST POSITION & ZOOM",0,-60),n.font="bold 16px sans-serif",n.fillStyle="rgba(255, 200, 100, 0.95)",n.fillText("üéØ Align crosshair with rotation center",0,-20),n.font="14px sans-serif",n.fillStyle="rgba(200, 255, 200, 0.9)",n.fillText("üëÜ Drag to move  ‚Ä¢  üîç Scroll/Pinch to zoom",0,20),n.font="bold 14px sans-serif",n.fillStyle="rgba(100, 255, 100, 0.9)",n.fillText('Click "Confirm Detection" when ready',0,60)):(n.fillText("ANALYZING IMAGE...",0,-20),n.font="12px sans-serif",n.fillText(`${Math.round(R*100)}%`,0,10))}}catch(R){console.warn("radar animation failed",R)}if(y()&&c()){const R=1e3/M(),J=t(ee)%R/R,X=Math.max(0,Math.min(1,(M()-40)/30));let G;if(X<.33?G=J>.5?.85:0:X<.67?G=Math.sin(J*Math.PI*2)*.5+.5>.6?.6:0:G=(Math.sin(J*Math.PI*2)*.5+.5)*.3,G>.05){const V=n.createRadialGradient(_/2,C/2,0,_/2,C/2,Math.max(_,C)*.8);V.addColorStop(0,`rgba(0, 0, 0, ${G*.7})`),V.addColorStop(.5,`rgba(0, 0, 0, ${G})`),V.addColorStop(1,`rgba(0, 0, 0, ${G*.9})`),n.fillStyle=V,n.fillRect(-_,-C,_*3,C*3),X<.5&&(n.fillStyle=`rgba(20, 20, 40, ${G*.15})`,n.fillRect(-_,-C,_*3,C*3))}}if(n.restore(),a()||m()){const R=Date.now()%1e3/1e3,J=.7+.3*Math.sin(R*Math.PI*2);n.save(),n.translate(_/2,C/2),n.strokeStyle=`rgba(255, 100, 0, ${J})`,n.lineWidth=4;const X=Math.min(_,C)*.1;n.beginPath(),n.arc(0,0,X*.7,0,Math.PI*2),n.stroke(),n.lineWidth=3,n.beginPath(),n.moveTo(-X,0),n.lineTo(X,0),n.stroke(),n.beginPath(),n.moveTo(0,-X),n.lineTo(0,X),n.stroke(),n.beginPath(),n.arc(0,0,10+3*Math.sin(R*Math.PI*2),0,Math.PI*2),n.fillStyle=`rgba(255, 100, 0, ${J})`,n.fill(),n.strokeStyle="rgba(255, 255, 255, 0.9)",n.lineWidth=2,n.stroke(),n.beginPath(),n.arc(0,0,3,0,Math.PI*2),n.fillStyle="rgba(255, 255, 255, 0.95)",n.fill(),n.restore()}}Ae(()=>a(),()=>{a()&&(P(F,0),P(N,0),P(S,1),Fe())}),Ae(()=>(t(F),t(N),t(S)),()=>{wn.set({translateX:t(F),translateY:t(N),scale:t(S)})}),Ae(()=>(c(),Pt),()=>{c()&&Pt.set(!1)}),Ae(()=>(h(),t(D)),()=>{h()?Et(h()):(t(D)&&P(D,null),P(Ee,!1),Fe())}),Ae(()=>(c(),v(),a(),t(q)),()=>{c()||v().active||a()?t(q)||P(q,requestAnimationFrame(st)):t(q)&&(cancelAnimationFrame(t(q)),P(q,null),P(ee,0))}),kn(),Nt();var et=vr(),ot=E(et);Rn(ot,_=>P(f,_),()=>t(f));var Oe=k(ot,2);{var It=_=>{var C=dr(),H=E(C);I(C),Ce(K=>$e(H,`Speed: ${K??""}¬∞/s`),[()=>(o(),qe(()=>o().toFixed(0)))]),T(_,C)};re(Oe,_=>{t(de)&&_(It)})}var Gt=k(Oe,2);{var $t=_=>{var C=hr();T(_,C)};re(Gt,_=>{a()&&_($t)})}I(et),Rn(et,_=>P(r,_),()=>t(r)),Ce(()=>Ot(et,1,`canvas-wrapper ${a()?"edit-mode":""}`,"svelte-byh4af")),T(e,et),Tt(),d()}async function mr(e,i,a={}){const{x:c,y:h,r:s}=i||{x:e.width/2,y:e.height/2,r:Math.min(e.width,e.height)/2},o=a.samples||720,v=a.innerOffset||-Math.max(2,Math.round(s*.06)),x=a.outerOffset||Math.max(2,Math.round(s*.06)),p=a.thresholdFactor||.6,l=document.createElement("canvas");l.width=e.width,l.height=e.height;const g=l.getContext("2d");g.drawImage(e,0,0);const m=g.getImageData(0,0,l.width,l.height).data,y=l.width,M=l.height;function w(A,q){const ee=Math.round(A),ue=Math.round(q);if(ee<0||ee>=y||ue<0||ue>=M)return 0;const _e=(ue*y+ee)*4,de=m[_e],ae=m[_e+1],Te=m[_e+2];return .2126*de+.7152*ae+.0722*Te}const d=new Array(o);for(let A=0;A<o;A++){const q=A/o*Math.PI*2,ee=[],ue=3;for(let de=0;de<ue;de++){const ae=de/(ue-1),Te=s+v+(x-v)*ae,L=c+Te*Math.cos(q),Re=h+Te*Math.sin(q);ee.push(w(L,Re))}const _e=ee.reduce((de,ae)=>de+ae,0)/ee.length;d[A]=_e}const r=d.reduce((A,q)=>A+q,0)/d.length,f=Math.sqrt(d.reduce((A,q)=>A+(q-r)**2,0)/d.length),n=r+f*p,$=d.map(A=>A>n);let S=0,j=!1,U=[],F=0;for(let A=0;A<$.length*2;A++){const q=A%$.length;if($[q]?(F++,j=!0):(j&&(U.push(F),F=0),j=!1),A>=$.length&&!j)break}j&&F>0&&U.push(F);const N=Math.max(2,Math.round(o/360*(a.minDegrees||5))),z=U.filter(A=>A>=N);S=z.length;const me=[];let ge=0;for(const A of U){const q=ge%o,ee=(ge+A-1)%o,ue=(q+Math.floor(A/2))%o;me.push({start:q,end:ee,mid:ue,angle:ue/o*2*Math.PI}),ge+=A+1}return{count:S,samples:d,mask:$,groups:z,positions:me,canvas:l}}function gr(e,i=24,a={}){const c=[],{width:h,height:s}=e,o=a.circle||{x:h/2,y:s/2,r:Math.min(h,s)/2},v=a.margin??1.05,x=Math.round(o.r*v),p=x*2,l=a.outputSize||Math.max(32,Math.round(p)),g=a.fps||24,m=typeof a.rotationSpeed=="number"?a.rotationSpeed:0,y=a.direction==null?1:a.direction,M=document.createElement("canvas");M.width=p,M.height=p;const w=M.getContext("2d"),d=Math.round(o.x-x),r=Math.round(o.y-x);try{w.drawImage(e,d,r,p,p,0,0,p,p)}catch{w.drawImage(e,0,0)}const n=m/g*Math.PI/180*y;Math.round(p*(a.zoom||1));for(let $=0;$<i;$++){const S=$*n,j=document.createElement("canvas");j.width=l,j.height=l;const U=j.getContext("2d");U.translate(l/2,l/2),U.rotate(S);const F=Math.round(p*(a.zoom||1)),N=F;U.drawImage(M,-F/2,-N/2,F,N),c.push(j)}return c}function _r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Rt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vn={exports:{}},jn;function wr(){return jn||(jn=1,(function(e,i){(function(a){e.exports=a()})(function(){return(function a(c,h,s){function o(p,l){if(!h[p]){if(!c[p]){var g=typeof Rt=="function"&&Rt;if(!l&&g)return g(p,!0);if(v)return v(p,!0);var m=new Error("Cannot find module '"+p+"'");throw m.code="MODULE_NOT_FOUND",m}var y=h[p]={exports:{}};c[p][0].call(y.exports,function(M){var w=c[p][1][M];return o(w||M)},y,y.exports,a,c,h,s)}return h[p].exports}for(var v=typeof Rt=="function"&&Rt,x=0;x<s.length;x++)o(s[x]);return o})({1:[function(a,c,h){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}c.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(l){if(!v(l)||l<0||isNaN(l))throw TypeError("n must be a positive number");return this._maxListeners=l,this},s.prototype.emit=function(l){var g,m,y,M,w,d;if(this._events||(this._events={}),l==="error"&&(!this._events.error||x(this._events.error)&&!this._events.error.length)){if(g=arguments[1],g instanceof Error)throw g;var r=new Error('Uncaught, unspecified "error" event. ('+g+")");throw r.context=g,r}if(m=this._events[l],p(m))return!1;if(o(m))switch(arguments.length){case 1:m.call(this);break;case 2:m.call(this,arguments[1]);break;case 3:m.call(this,arguments[1],arguments[2]);break;default:M=Array.prototype.slice.call(arguments,1),m.apply(this,M)}else if(x(m))for(M=Array.prototype.slice.call(arguments,1),d=m.slice(),y=d.length,w=0;w<y;w++)d[w].apply(this,M);return!0},s.prototype.addListener=function(l,g){var m;if(!o(g))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",l,o(g.listener)?g.listener:g),this._events[l]?x(this._events[l])?this._events[l].push(g):this._events[l]=[this._events[l],g]:this._events[l]=g,x(this._events[l])&&!this._events[l].warned&&(p(this._maxListeners)?m=s.defaultMaxListeners:m=this._maxListeners,m&&m>0&&this._events[l].length>m&&(this._events[l].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[l].length),typeof console.trace=="function"&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(l,g){if(!o(g))throw TypeError("listener must be a function");var m=!1;function y(){this.removeListener(l,y),m||(m=!0,g.apply(this,arguments))}return y.listener=g,this.on(l,y),this},s.prototype.removeListener=function(l,g){var m,y,M,w;if(!o(g))throw TypeError("listener must be a function");if(!this._events||!this._events[l])return this;if(m=this._events[l],M=m.length,y=-1,m===g||o(m.listener)&&m.listener===g)delete this._events[l],this._events.removeListener&&this.emit("removeListener",l,g);else if(x(m)){for(w=M;w-- >0;)if(m[w]===g||m[w].listener&&m[w].listener===g){y=w;break}if(y<0)return this;m.length===1?(m.length=0,delete this._events[l]):m.splice(y,1),this._events.removeListener&&this.emit("removeListener",l,g)}return this},s.prototype.removeAllListeners=function(l){var g,m;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[l]&&delete this._events[l],this;if(arguments.length===0){for(g in this._events)g!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events={},this}if(m=this._events[l],o(m))this.removeListener(l,m);else if(m)for(;m.length;)this.removeListener(l,m[m.length-1]);return delete this._events[l],this},s.prototype.listeners=function(l){var g;return!this._events||!this._events[l]?g=[]:o(this._events[l])?g=[this._events[l]]:g=this._events[l].slice(),g},s.prototype.listenerCount=function(l){if(this._events){var g=this._events[l];if(o(g))return 1;if(g)return g.length}return 0},s.listenerCount=function(l,g){return l.listenerCount(g)};function o(l){return typeof l=="function"}function v(l){return typeof l=="number"}function x(l){return typeof l=="object"&&l!==null}function p(l){return l===void 0}},{}],2:[function(a,c,h){var s,o,v,x,p;p=navigator.userAgent.toLowerCase(),x=navigator.platform.toLowerCase(),s=p.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],v=s[1]==="ie"&&document.documentMode,o={name:s[1]==="version"?s[3]:s[1],version:v||parseFloat(s[1]==="opera"&&s[4]?s[4]:s[2]),platform:{name:p.match(/ip(?:ad|od|hone)/)?"ios":(p.match(/(?:webos|android)/)||x.match(/mac|win|linux/)||["other"])[0]}},o[o.name]=!0,o[o.name+parseInt(o.version,10)]=!0,o.platform[o.platform.name]=!0,c.exports=o},{}],3:[function(a,c,h){var s,o,v,x=function(m,y){for(var M in y)p.call(y,M)&&(m[M]=y[M]);function w(){this.constructor=m}return w.prototype=y.prototype,m.prototype=new w,m.__super__=y.prototype,m},p={}.hasOwnProperty,l=[].indexOf||function(m){for(var y=0,M=this.length;y<M;y++)if(y in this&&this[y]===m)return y;return-1},g=[].slice;s=a("events").EventEmitter,v=a("./browser.coffee"),o=(function(m){var y,M;x(w,m),y={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},M={delay:500,copy:!1};function w(d){var r,f,n;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(d);for(f in y)n=y[f],(r=this.options)[f]==null&&(r[f]=n)}return w.prototype.setOption=function(d,r){if(this.options[d]=r,this._canvas!=null&&(d==="width"||d==="height"))return this._canvas[d]=r},w.prototype.setOptions=function(d){var r,f,n;f=[];for(r in d)p.call(d,r)&&(n=d[r],f.push(this.setOption(r,n)));return f},w.prototype.addFrame=function(d,r){var f,n;r==null&&(r={}),f={},f.transparent=this.options.transparent;for(n in M)f[n]=r[n]||M[n];if(this.options.width==null&&this.setOption("width",d.width),this.options.height==null&&this.setOption("height",d.height),typeof ImageData<"u"&&ImageData!==null&&d instanceof ImageData)f.data=d.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&d instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&d instanceof WebGLRenderingContext)r.copy?f.data=this.getContextData(d):f.context=d;else if(d.childNodes!=null)r.copy?f.data=this.getImageData(d):f.image=d;else throw new Error("Invalid image");return this.frames.push(f)},w.prototype.render=function(){var d,r,f;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var n,$,S;for(S=[],n=0,$=this.frames.length;0<=$?n<$:n>$;0<=$?++n:--n)S.push(null);return S}).call(this),r=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(d=0,f=r;0<=f?d<f:d>f;0<=f?++d:--d)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},w.prototype.abort=function(){for(var d;d=this.activeWorkers.shift(),d!=null;)this.log("killing active worker"),d.terminate();return this.running=!1,this.emit("abort")},w.prototype.spawnWorkers=function(){var d,r,f;return d=Math.min(this.options.workers,this.frames.length),(function(){f=[];for(var n=r=this.freeWorkers.length;r<=d?n<d:n>d;r<=d?n++:n--)f.push(n);return f}).apply(this).forEach((function(n){return function($){var S;return n.log("spawning worker "+$),S=new Worker(n.options.workerScript),S.onmessage=function(j){return n.activeWorkers.splice(n.activeWorkers.indexOf(S),1),n.freeWorkers.push(S),n.frameFinished(j.data)},n.freeWorkers.push(S)}})(this)),d},w.prototype.frameFinished=function(d){var r,f;if(this.log("frame "+d.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[d.index]=d,this.options.globalPalette===!0&&(this.options.globalPalette=d.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(r=1,f=this.freeWorkers.length;1<=f?r<f:r>f;1<=f?++r:--r)this.renderNextFrame();return l.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},w.prototype.finishRendering=function(){var d,r,f,n,$,S,j,U,F,N,z,me,ge,A,q,ee;for(U=0,A=this.imageParts,$=0,F=A.length;$<F;$++)r=A[$],U+=(r.data.length-1)*r.pageSize+r.cursor;for(U+=r.pageSize-r.cursor,this.log("rendering finished - filesize "+Math.round(U/1e3)+"kb"),d=new Uint8Array(U),me=0,q=this.imageParts,S=0,N=q.length;S<N;S++)for(r=q[S],ee=r.data,f=j=0,z=ee.length;j<z;f=++j)ge=ee[f],d.set(ge,me),f===r.data.length-1?me+=r.cursor:me+=r.pageSize;return n=new Blob([d],{type:"image/gif"}),this.emit("finished",n,d)},w.prototype.renderNextFrame=function(){var d,r,f;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return d=this.frames[this.nextFrame++],f=this.freeWorkers.shift(),r=this.getTask(d),this.log("starting frame "+(r.index+1)+" of "+this.frames.length),this.activeWorkers.push(f),f.postMessage(r)},w.prototype.getContextData=function(d){return d.getImageData(0,0,this.options.width,this.options.height).data},w.prototype.getImageData=function(d){var r;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),r=this._canvas.getContext("2d"),r.setFill=this.options.background,r.fillRect(0,0,this.options.width,this.options.height),r.drawImage(d,0,0),this.getContextData(r)},w.prototype.getTask=function(d){var r,f;if(r=this.frames.indexOf(d),f={index:r,last:r===this.frames.length-1,delay:d.delay,transparent:d.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:v.name==="chrome"},d.data!=null)f.data=d.data;else if(d.context!=null)f.data=this.getContextData(d.context);else if(d.image!=null)f.data=this.getImageData(d.image);else throw new Error("Invalid frame");return f},w.prototype.log=function(){var d;if(d=1<=arguments.length?g.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,d)},w})(s),c.exports=o},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(vn)),vn.exports}var yr=wr();const br=_r(yr),xr=""+new URL("../assets/gif.worker.CjkyQP34.js",import.meta.url).href;async function Mr(e,i=24){if(!e||e.length===0)throw new Error("No frames to export");const a=new br({workers:2,quality:10,width:e[0].width,height:e[0].height,workerScript:xr,repeat:0,background:null}),c=Math.round(1e3/i);for(const h of e){const s=h.width,o=h.height,v=document.createElement("canvas");v.width=s,v.height=o;const x=v.getContext("2d");x.fillStyle="#ffffff",x.fillRect(0,0,s,o),x.drawImage(h,0,0),a.addFrame(v,{delay:c,copy:!0})}return new Promise((h,s)=>{a.on("finished",function(o){const v=URL.createObjectURL(o);h(v)}),a.on("error",s),a.render()})}var kr=fe('<div class="export-overlay svelte-14nyow8" role="status" aria-live="polite"><div class="export-box svelte-14nyow8"><div class="spinner svelte-14nyow8" aria-hidden="true"></div> <div class="export-text svelte-14nyow8">Working‚Ä¶ Exporting GIF ‚Äî please wait</div></div></div>'),Sr=fe('<button class="confirm-btn svelte-14nyow8">Confirm Detection</button> <button class="svelte-14nyow8">Cancel</button>',1),Pr=fe("<button>Detect Circle & Count</button>"),Cr=fe('<span style="background: #4a9eff; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.75em; font-weight: bold; margin-left: 4px;" class="svelte-14nyow8"> </span>'),Tr=fe('<div style="margin-top: 16px; padding: 12px; background: rgba(74, 158, 255, 0.08); border-radius: 6px; border: 1px solid rgba(74, 158, 255, 0.2);" class="svelte-14nyow8"><div style="font-weight: 600; margin-bottom: 10px; color: #4a9eff; font-size: 0.95em;" class="svelte-14nyow8">‚ö° Flicker Fusion Threshold</div> <div style="margin-bottom: 12px;" class="svelte-14nyow8"><div style="font-size: 0.85em; color: #aaa; margin-bottom: 6px;" class="svelte-14nyow8">Quick Presets:</div> <div style="display: flex; gap: 6px; flex-wrap: wrap;" class="svelte-14nyow8"><button class="svelte-14nyow8">42 Hz</button> <button class="svelte-14nyow8">50 Hz</button> <button class="svelte-14nyow8">55 Hz</button> <button class="svelte-14nyow8">60 Hz</button> <button class="svelte-14nyow8">70 Hz</button></div></div> <div style="margin-top: 12px;" class="svelte-14nyow8"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;" class="svelte-14nyow8"><span style="font-size: 0.85em; color: #ccc;" class="svelte-14nyow8">Fine Tune:</span> <span style="font-size: 1.1em; font-weight: bold; color: #4a9eff;" class="svelte-14nyow8"> </span></div> <input type="range" min="40" max="70" step="0.5" style="width: 100%; cursor: pointer;" class="svelte-14nyow8"/> <div style="display: flex; justify-content: space-between; font-size: 0.7em; color: #666; margin-top: 4px;" class="svelte-14nyow8"><span class="svelte-14nyow8">40 Hz</span> <span style="color: #4a9eff; font-weight: 500;" class="svelte-14nyow8"><!></span> <span class="svelte-14nyow8">70 Hz</span></div></div> <div style="margin-top: 10px; padding: 8px; background: rgba(74, 158, 255, 0.12); border-radius: 4px; font-size: 0.8em;" class="svelte-14nyow8"><div style="font-weight: 500; color: #4a9eff; margin-bottom: 3px;" class="svelte-14nyow8"><!></div> <div style="color: #aaa; font-size: 0.9em;" class="svelte-14nyow8"><!></div></div></div>'),Er=fe('<div class="drag-handle svelte-14nyow8" title="Drag to move"></div>'),Ir=fe('<div><!> <div style="display:flex;gap:12px;align-items:center;" class="svelte-14nyow8"><button class="speed-btn svelte-14nyow8">‚àí</button> <div style="text-align:center;min-width:120px;" class="svelte-14nyow8"><div class="speed-display svelte-14nyow8"> </div> <div style="font-size:11px;opacity:0.6;margin-top:4px;" class="svelte-14nyow8">Rotation Speed</div></div> <button class="speed-btn svelte-14nyow8">+</button></div></div>'),$r=fe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Use +/‚àí buttons above to adjust speed)</em>'),Dr=fe('<em style="font-size:12px;opacity:0.7;" class="svelte-14nyow8">(Touch: drag up to speed up, down to slow down)</em>'),qr=fe('<div class="svelte-14nyow8"><strong class="svelte-14nyow8">Circle:</strong> </div>'),Ar=fe('<div class="panel svelte-14nyow8"><!> <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><button> </button> <button class="svelte-14nyow8">Reverse</button> <!> <button class="svelte-14nyow8">Apply Suggested Speed</button> <div class="gif-export-group svelte-14nyow8"><button class="svelte-14nyow8"> </button> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">Frames:</span> <input type="number" min="6" step="1" style="width:80px;padding:4px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <span style="font-size:11px;opacity:0.6;" title="Leave empty for auto-detection" class="svelte-14nyow8"><!></span></label> <label style="display:flex;align-items:center;gap:6px;" class="svelte-14nyow8"><span style="font-size:12px;opacity:0.8;" class="svelte-14nyow8">FPS:</span> <select style="padding:4px;border-radius:4px;border:1px solid #ccc;background:#333;color:white;" class="svelte-14nyow8"><option class="svelte-14nyow8">10 (Slow/Classic)</option><option class="svelte-14nyow8">15 (Natural)</option><option class="svelte-14nyow8">20 (Smooth)</option><option class="svelte-14nyow8">24 (Cinema)</option><option class="svelte-14nyow8">30 (Fast)</option></select></label></div> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Show Overlay</span></label> <label style="display:flex;align-items:center;gap:6px;margin-left:6px;" class="svelte-14nyow8"><input type="checkbox" class="svelte-14nyow8"/> <span class="svelte-14nyow8">Flicker Effect</span> <!></label></div> <!> <!> <div style="margin-top:12px;" class="svelte-14nyow8"><div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;" class="svelte-14nyow8"><div class="svelte-14nyow8"><strong class="svelte-14nyow8">Current Speed:</strong> <!></div> <div style="display:flex;gap:6px;align-items:center;" class="svelte-14nyow8"><label for="manual-speed-input" style="font-size:12px;" class="svelte-14nyow8">Type speed:</label> <input id="manual-speed-input" type="number" min="1" step="1" style="width:100px;padding:6px;border-radius:4px;border:1px solid #ccc;" class="svelte-14nyow8"/> <button class="svelte-14nyow8">Set</button></div></div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Detected count:</strong> </div> <div class="svelte-14nyow8"><strong class="svelte-14nyow8">Suggested speed:</strong> </div> <!></div></div>');function Lr(e,i){Ct(i,!1);const a=()=>Z(ut,"$imageUrl",w),c=()=>Z(wn,"$canvasTransform",w),h=()=>Z(rt,"$isPlaying",w),s=()=>Z(yn,"$playerCanvas",w),o=()=>Z(Qe,"$rotationSpeed",w),v=()=>Z(gn,"$detectedCircle",w),x=()=>Z(Un,"$detectedCount",w),p=()=>Z(hn,"$suggestedRotationSpeed",w),l=()=>Z(_n,"$overlayVisible",w),g=()=>Z(ft,"$editMode",w),m=()=>Z(bn,"$flickerEnabled",w),y=()=>Z(Ke,"$flickerFrequency",w),M=()=>Z(xn,"$isMobile",w),[w,d]=Pn(),r=ne(),f=ne(),n=ne(),$=ne();let S=ne(!1);async function j(){rt.update(u=>!u)}function U(){Qe.update(u=>Math.min(1e4,u+60))}function F(){Qe.update(u=>Math.max(10,u-60))}function N(){mn.update(u=>u*-1)}async function z(){if(!a())return;const b=Date.now();kt.set({active:!0,progress:0,startTime:b}),ft.set(!0)}async function me(){const u=a();if(!u)return;P(S,!0);const b=c();ft.set(!1);const W=Date.now();kt.set({active:!0,progress:0,startTime:W}),h()||requestAnimationFrame(()=>{});try{const O=await mt(u);let B=null;const ie=s();if(ie){const nt=ie.clientWidth,Ze=ie.clientHeight,lt=O.width/O.height,Dt=nt/Ze;let _t,qt;lt>Dt?(_t=nt,qt=nt/lt):(qt=Ze,_t=Ze*lt);const Jt=-b.translateX,At=-b.translateY,wt=Jt/b.scale,Zt=At/b.scale,Lt=O.width/_t,Kt=wt*Lt+O.width/2,Ft=Zt*Lt+O.height/2;B={x:Kt,y:Ft,r:Math.min(O.width,O.height)/2*.9}}B||(B={x:O.width/2,y:O.height/2,r:Math.min(O.width,O.height)/2*.9});const oe=await mr(O,B,{samples:720}),Ge=2e3-(Date.now()-W);Ge>0&&await new Promise(nt=>setTimeout(nt,Ge)),gn.set(B),Un.set(oe.count),Qn.set(oe.positions||[]);const Pe=(oe.count>0?360/oe.count:1)*30;hn.set(Pe),kt.set({active:!1,progress:1,startTime:W}),Pt.set(!0),rt.set(!1)}finally{P(S,!1)}}function ge(){hn.subscribe(u=>{u&&Qe.set(u)})()}function A(){ft.set(!1),Pt.set(!1),kt.set({active:!1,progress:0,startTime:0})}let q=ne(0);function ee(){const u=Number(t(q))||0;u<=0||Qe.set(u)}let ue=ne(!1),_e=ne(15);async function de(){const u=a()||cn(ut);if(!u)return alert("No image loaded to export.");if(!t(r))return alert("Please detect the circle before exporting the GIF.");const b=await mt(u),W=document.createElement("canvas");W.width=b.width,W.height=b.height,W.getContext("2d").drawImage(b,0,0,b.width,b.height),P(ue,!0);try{let B;t(ae)&&t(ae)!==t(f)*2?B=t(ae):t(f)&&t(f)>0?B=Math.max(12,t(f)*2):B=t(ae)||24;const ie=t(r),oe=Number(cn(Qe)||0),ke=Number(cn(mn)||1),Ge=360/B,Je=gr(W,B,{circle:ie,margin:1.1,zoom:1,fps:t(_e),rotationSpeed:Ge*t(_e),direction:ke}),Se=await Mr(Je,t(_e)),Pe=document.createElement("a");Pe.href=Se,Pe.download="phenaki-export.gif",document.body.appendChild(Pe),Pe.click(),Pe.remove()}catch(B){console.error("GIF export failed",B),alert("GIF export failed: "+(B&&B.message))}finally{P(ue,!1)}}let ae=ne(null);const Te="phenaki.speedControlPos";let L=ne({left:null,top:null}),Re=ne(!1),D=ne(!1),Ee={x:0,y:0},Le={left:0,top:0},Et=0;function dt(){try{const u=localStorage.getItem(Te);u&&P(L,JSON.parse(u))}catch{}}function ht(){try{localStorage.setItem(Te,JSON.stringify(t(L)))}catch{}}function it(u){const b=Date.now(),W=b-Et<300;if(Et=b,u.target&&u.target.closest&&u.target.closest("button"))return;const O=u.target&&u.target.closest&&u.target.closest(".drag-handle");if(!(!W&&!O)){P(Re,!0),P(D,!0),Ee={x:u.clientX,y:u.clientY},Le={left:t(L).left??Math.round((window.innerWidth-200)/2),top:t(L).top??Math.round((window.innerHeight-80)/2)};try{u.target.setPointerCapture(u.pointerId)}catch{}window.addEventListener("pointermove",vt),window.addEventListener("pointerup",pt)}}function vt(u){if(!t(D))return;const b=u.clientX-Ee.x,W=u.clientY-Ee.y;te(L,t(L).left=Math.round(Le.left+b)),te(L,t(L).top=Math.round(Le.top+W))}function pt(u){P(D,!1),P(Re,!1);try{u.target.releasePointerCapture&&u.target.releasePointerCapture(u.pointerId)}catch{}window.removeEventListener("pointermove",vt),window.removeEventListener("pointerup",pt),ht()}Sn(()=>{dt(),t(L).left==null&&te(L,t(L).left=Math.round((window.innerWidth-200)/2)),t(L).top==null&&te(L,t(L).top=Math.round((window.innerHeight-80)/2));function u(){const oe=Math.max(8,window.innerWidth-200-8),ke=Math.max(8,window.innerHeight-80-8);t(L).left==null&&te(L,t(L).left=oe),t(L).top==null&&te(L,t(L).top=ke),te(L,t(L).left=Math.min(Math.max(t(L).left,8),oe)),te(L,t(L).top=Math.min(Math.max(t(L).top,8),ke))}u();const b=()=>{u(),ht()};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)});function mt(u){return new Promise((b,W)=>{const O=new Image;O.crossOrigin="anonymous",O.onload=()=>b(O),O.onerror=W,O.src=u})}Ae(()=>o(),()=>{P(q,Number(o()||0))}),Ae(()=>v(),()=>{P(r,v())}),Ae(()=>x(),()=>{P(f,x())}),Ae(()=>p(),()=>{P(n,p())}),Ae(()=>l(),()=>{P($,l())}),kn(),Nt();var st=Ar(),Fe=E(st);{var et=u=>{var b=kr();T(u,b)};re(Fe,u=>{t(ue)&&u(et)})}var ot=k(Fe,2),Oe=E(ot);let It;var Gt=E(Oe,!0);I(Oe);var $t=k(Oe,2),_=k($t,2);{var C=u=>{var b=Sr(),W=ze(b),O=k(W,2);Ce(()=>W.disabled=t(S)),ce("click",W,me),ce("click",O,A),T(u,b)},H=u=>{var b=Pr();Ce(()=>{Ot(b,1,On(t(r)?"":"detect-btn-required"),"svelte-14nyow8"),b.disabled=t(S)||!a()}),ce("click",b,z),T(u,b)};re(_,u=>{g()?u(C):u(H,!1)})}var K=k(_,2),Q=k(K,2),Y=E(Q),Ye=E(Y,!0);I(Y);var We=k(Y,2),Ie=k(E(We),2);Mt(Ie);var Xe=k(Ie,2),R=E(Xe);{var J=u=>{var b=pe("Manual");T(u,b)},X=u=>{var b=je(),W=ze(b);{var O=ie=>{var oe=pe("Auto (x2)");T(ie,oe)},B=ie=>{var oe=pe("Auto");T(ie,oe)};re(W,ie=>{t(f)?ie(O):ie(B,!1)},!0)}T(u,b)};re(R,u=>{t(ae)?u(J):u(X,!1)})}I(Xe),I(We);var G=k(We,2),V=k(E(G),2);Ce(()=>{t(_e),ja(()=>{})});var ve=E(V);ve.value=ve.__value=10;var Ve=k(ve);Ve.value=Ve.__value=15;var Ne=k(Ve);Ne.value=Ne.__value=20;var tt=k(Ne);tt.value=tt.__value=24;var Be=k(tt);Be.value=Be.__value=30,I(V),I(G),I(Q);var gt=k(Q,2),Ut=E(gt);Mt(Ut),ln(2),I(gt);var En=k(gt,2),jt=E(En);Mt(jt);var ea=k(jt,4);{var ta=u=>{var b=Cr(),W=E(b);I(b),Ce(()=>$e(W,`${y()??""} Hz`)),T(u,b)};re(ea,u=>{m()&&u(ta)})}I(En),I(ot);var In=k(ot,2);{var na=u=>{var b=Tr(),W=k(E(b),2),O=k(E(W),2),B=E(O),ie=k(B,2),oe=k(ie,2),ke=k(oe,2),Ge=k(ke,2);I(O),I(W);var Je=k(W,2),Se=E(Je),Pe=k(E(Se),2),nt=E(Pe);I(Pe),I(Se);var Ze=k(Se,2);Mt(Ze);var lt=k(Ze,2),Dt=k(E(lt),2),_t=E(Dt);{var qt=se=>{var we=pe("üî¥ Visible");T(se,we)},Jt=se=>{var we=je(),yt=ze(we);{var bt=le=>{var ye=pe("üü° Fusion");T(le,ye)},xt=le=>{var ye=pe("üü¢ Smooth");T(le,ye)};re(yt,le=>{y()<58?le(bt):le(xt,!1)},!0)}T(se,we)};re(_t,se=>{y()<48?se(qt):se(Jt,!1)})}I(Dt),ln(2),I(lt),I(Je);var At=k(Je,2),wt=E(At),Zt=E(wt);{var Lt=se=>{var we=pe("‚ö° Strong Flicker");T(se,we)},Kt=se=>{var we=je(),yt=ze(we);{var bt=le=>{var ye=pe("üéØ Critical Threshold");T(le,ye)},xt=le=>{var ye=je(),Qt=ze(ye);{var en=be=>{var Ue=pe("‚ú® Near-Fusion");T(be,Ue)},tn=be=>{var Ue=je(),nn=ze(Ue);{var an=xe=>{var at=pe("üé¨ Cinema (60 Hz)");T(xe,at)},rn=xe=>{var at=pe("üåü Ultra Smooth");T(xe,at)};re(nn,xe=>{y()<62?xe(an):xe(rn,!1)},!0)}T(be,Ue)};re(Qt,be=>{y()<58?be(en):be(tn,!1)},!0)}T(le,ye)};re(yt,le=>{y()<52?le(bt):le(xt,!1)},!0)}T(se,we)};re(Zt,se=>{y()<48?se(Lt):se(Kt,!1)})}I(wt);var Ft=k(wt,2),da=E(Ft);{var ha=se=>{var we=pe("Noticeable flicker - classic phenakistoscope effect");T(se,we)},va=se=>{var we=je(),yt=ze(we);{var bt=le=>{var ye=pe("Flicker begins to fuse - critical threshold");T(le,ye)},xt=le=>{var ye=je(),Qt=ze(ye);{var en=be=>{var Ue=pe("Subtle pulsing - artistic sweet spot");T(be,Ue)},tn=be=>{var Ue=je(),nn=ze(Ue);{var an=xe=>{var at=pe("Standard cinema/TV rate - minimal flicker");T(xe,at)},rn=xe=>{var at=pe("Above fusion threshold - very smooth");T(xe,at)};re(nn,xe=>{y()<62?xe(an):xe(rn,!1)},!0)}T(be,Ue)};re(Qt,be=>{y()<58?be(en):be(tn,!1)},!0)}T(le,ye)};re(yt,le=>{y()<52?le(bt):le(xt,!1)},!0)}T(se,we)};re(da,se=>{y()<48?se(ha):se(va,!1)})}I(Ft),I(At),I(b),Ce(()=>{ct(B,`padding: 6px 10px; border: 1px solid ${y()===42?"#ff6b6b":"#555"}; background: ${y()===42?"#ff6b6b":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),ct(ie,`padding: 6px 10px; border: 1px solid ${y()===50?"#ffa500":"#555"}; background: ${y()===50?"#ffa500":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),ct(oe,`padding: 6px 10px; border: 1px solid ${y()===55?"#4a9eff":"#555"}; background: ${y()===55?"#4a9eff":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),ct(ke,`padding: 6px 10px; border: 1px solid ${y()===60?"#51cf66":"#555"}; background: ${y()===60?"#51cf66":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),ct(Ge,`padding: 6px 10px; border: 1px solid ${y()===70?"#845ef7":"#555"}; background: ${y()===70?"#845ef7":"#333"}; color: white; border-radius: 4px; cursor: pointer; font-size: 0.8em;`),$e(nt,`${y()??""} Hz`),rr(Ze,y())}),ce("click",B,()=>Ke.set(42)),ce("click",ie,()=>Ke.set(50)),ce("click",oe,()=>Ke.set(55)),ce("click",ke,()=>Ke.set(60)),ce("click",Ge,()=>Ke.set(70)),ce("input",Ze,se=>Ke.set(+se.target.value)),T(u,b)};re(In,u=>{m()&&u(na)})}var $n=k(In,2);{var aa=u=>{var b=Ir(),W=E(b);{var O=Se=>{var Pe=Er();T(Se,Pe)};re(W,Se=>{t(Re)&&Se(O)})}var B=k(W,2),ie=E(B),oe=k(ie,2),ke=E(oe),Ge=E(ke);I(ke),ln(2),I(oe);var Je=k(oe,2);I(B),I(b),Ce(Se=>{Ot(b,1,`speed-control ${t(Re)?"dragMode":""} ${t(D)?"dragging":""}`,"svelte-14nyow8"),ct(b,`left: ${t(L),qe(()=>t(L).left??16)??""}px; top: ${t(L),qe(()=>t(L).top??16)??""}px;`),$e(Ge,`${Se??""}¬∞/s`)},[()=>(o(),qe(()=>o().toFixed(0)))]),ce("click",ie,F),ce("click",Je,U),ce("pointerdown",b,it),T(u,b)};re($n,u=>{v()&&u(aa)})}var Dn=k($n,2),Ht=E(Dn),Yt=E(Ht),qn=k(E(Yt)),ra=k(qn);{var ia=u=>{var b=$r();T(u,b)},sa=u=>{var b=Dr();T(u,b)};re(ra,u=>{M()?u(ia):u(sa,!1)})}I(Yt);var An=k(Yt,2),Xt=k(E(An),2);Mt(Xt);var oa=k(Xt,2);I(An),I(Ht);var Vt=k(Ht,2),la=k(E(Vt));I(Vt);var Bt=k(Vt,2),ca=k(E(Bt));I(Bt);var fa=k(Bt,2);{var ua=u=>{var b=qr(),W=k(E(b));I(b),Ce((O,B,ie)=>$e(W,` x=${O??""}, y=${B??""}, r=${ie??""}`),[()=>(t(r),qe(()=>Math.round(t(r).x))),()=>(t(r),qe(()=>Math.round(t(r).y))),()=>(t(r),qe(()=>Math.round(t(r).r)))]),T(u,b)};re(fa,u=>{t(r)&&u(ua)})}I(Dn),I(st),Ce((u,b)=>{It=Ot(Oe,1,On(t(r)&&!h()?"play-highlight":""),"svelte-14nyow8",It,{"pause-subtle":h()&&!t(r)}),Oe.disabled=!a(),$e(Gt,h()?"Pause":"Play"),K.disabled=!t(n),Y.disabled=t(ue)||!s(),$e(Ye,t(ue)?"Exporting...":"Save GIF"),Wt(Ie,"placeholder",t(f)?`Auto (${t(f)*2})`:"Auto (24)"),ir(Ut,t($)),$e(qn,` ${u??""}¬∞/s | `),$e(la,` ${t(f)??0??""}`),$e(ca,` ${b??""}¬∞/s`)},[()=>(o(),qe(()=>o().toFixed(0))),()=>(t(n),qe(()=>t(n)?t(n).toFixed(0):"‚Äî"))]),ce("click",Oe,j),ce("click",$t,N),ce("click",K,ge),ce("click",Y,de),Gn(Ie,()=>t(ae),u=>P(ae,u)),tr(V,()=>t(_e),u=>P(_e,u)),ce("change",Ut,u=>_n.set(u.target.checked)),or(jt,m,u=>Ya(bn,u)),Gn(Xt,()=>t(q),u=>P(q,u)),ce("click",oa,ee),T(e,st),Tt(),d()}var Fr=fe("<option> </option>"),zr=fe('<div class="selector svelte-ai08gq"><label for="samples" class="svelte-ai08gq">Sample Images:</label> <select id="samples" class="svelte-ai08gq"><option>-- Choose a sample --</option><!></select></div>');function Rr(e,i){Ct(i,!1);const a="https://raw.githubusercontent.com/tclaret/phenakistoscope-simulator/main/images",c="https://raw.githubusercontent.com/tclaret/phenaki-lab/main/img",h=[{name:"Woman Chopping Tree",file:"WomanChoppingTree.jpg",repo:"old"},{name:"Dancing",file:"Dancing.jpg",repo:"old"},{name:"Jongleur",file:"Jongleur.png",repo:"old"},{name:"a_cheval",file:"a_cheval.png",repo:"old"},{name:"McLean_1",file:"McLean_1.png",repo:"old"},{name:"Gernamy_1949",file:"Gernamy_1949_R_Balzer.png",repo:"old"},{name:"AEO175939",file:"AEO175939_PhenakistoscopeGiroux60.jpg",repo:"old"},{name:"AEO185553",file:"AEO185553_PhenakistiscopeDisc_ManInBlueAndRed.jpg",repo:"old"},{name:"medium_1990_5036_3369",file:"medium_1990_5036_3369.jpg",repo:"old"},{name:"medium_a001813b",file:"medium_a001813b.jpg",repo:"old"},{name:"tumblr_obd6fh",file:"tumblr_obd6fhGFSZ1r9jbwno1_500.png",repo:"old"},{name:"tumblr_oc1cz",file:"tumblr_oc1czn99ZM1r9jbwno1_500.png",repo:"old"},{name:"Phantasmascope Faces",file:"Phantasmascope_faces.png",repo:"old"},{name:"722a6790240569.5e126845d9b56",file:"722a6790240569.5e126845d9b56.png",repo:"old"},{name:"Fantascope Disc 1833",file:"fantascope-disc-1833.png",repo:"old"},{name:"Face",file:"a_face__.jpg",repo:"new"},{name:"Culbute",file:"culbute.jpg",repo:"new"},{name:"Grenouille",file:"Grenouille__.jpg",repo:"new"},{name:"Oh Soccer",file:"oh_soccer.jpg",repo:"new"},{name:"Un Grand Un Petit",file:"un_grand_un_petit.jpg",repo:"new"},{name:"Autre Culbutte",file:"autre_culbutte.jpg",repo:"new"},{name:"Dancing 2",file:"dancing_.jpg",repo:"new"},{name:"Il Pompe de l'eau",file:"il_pompe_de_leau.jpg",repo:"new"},{name:"Porceline",file:"porceline.jpg",repo:"new"},{name:"Volants",file:"volants_.png",repo:"new"},{name:"Ce Qui",file:"ce_qui.jpg",repo:"new"},{name:"Des Anges",file:"des_anges.jpg",repo:"new"},{name:"Moulin",file:"moulin_.jpg",repo:"new"},{name:"Rats",file:"rats__.jpg",repo:"new"},{name:"Corde √† Danser",file:"corde_a_denser_.jpg",repo:"new"},{name:"Ecureuil",file:"ecureuil.jpg",repo:"new"},{name:"Noel Noel",file:"noel_noel.jpg",repo:"new"},{name:"Tirreur",file:"tirreur_.jpg",repo:"new"},{name:"C Pastel",file:"c_pastel.jpg",repo:"new"},{name:"G√©om√©trique",file:"geometrique.jpg",repo:"new"},{name:"Nuages en Scie",file:"nuages_en_scie.jpg",repo:"new"},{name:"Tons Pastels",file:"tons_pastels.jpg",repo:"new"},{name:"Des Ouiseaux",file:"DesOuaisaux.png",repo:"new"},{name:"Feels Like Flying",file:"feels_like_flying.png",repo:"new"},{name:"Gros Meusieur",file:"GrosMeusieur.png",repo:"new"},{name:"Jongle avec les Otaries",file:"Jongle_avec_les_otaries.png",repo:"new"},{name:"Cin√©math√®que 1",file:"cinemateque_francaise_1.png",repo:"new"},{name:"Cin√©math√®que 2",file:"cinemateque_francaise_2.png",repo:"new"},{name:"Cin√©math√®que 3",file:"cinemateque_francaise_3.png",repo:"new"},{name:"Cin√©math√®que 4",file:"cinemateque_francaise_4.png",repo:"new"},{name:"Cin√©math√®que 5",file:"cinemateque_francaise_5.png",repo:"new"},{name:"Cin√©math√®que 6",file:"cinemateque_francaise_6.png",repo:"new"},{name:"Cin√©math√®que 7",file:"cinemateque_francaise_7.png",repo:"new"},{name:"Cin√©math√®que 8",file:"cinemateque_francaise_8.png",repo:"new"},{name:"Cin√©math√®que 9",file:"cinemateque_francaise_9.png",repo:"new"},{name:"Cin√©math√®que 10",file:"cinemateque_francaise_10.png",repo:"new"},{name:"Cin√©math√®que 11",file:"cinemateque_francaise_11.png",repo:"new"},{name:"Cin√©math√®que 12",file:"cinemateque_francaise_12.png",repo:"new"},{name:"Cin√©math√®que 13",file:"cinemateque_francaise_13.png",repo:"new"},{name:"Cin√©math√®que 14",file:"cinemateque_francaise_14.png",repo:"new"},{name:"Cin√©math√®que 15",file:"cinemateque_francaise_15.png",repo:"new"},{name:"Cin√©math√®que 16",file:"cinemateque_francaise_16.png",repo:"new"},{name:"Cin√©math√®que 17",file:"cinemateque_francaise_17.png",repo:"new"},{name:"Cin√©math√®que 18",file:"cinemateque_francaise_18.png",repo:"new"},{name:"Cin√©math√®que 19",file:"cinemateque_francaise_19.png",repo:"new"},{name:"Cin√©math√®que 20",file:"cinemateque_francaise_20.png",repo:"new"},{name:"Cin√©math√®que 21",file:"cinemateque_francaise_21.png",repo:"new"},{name:"Cin√©math√®que 22",file:"cinemateque_francaise_22.png",repo:"new"},{name:"Cin√©math√®que 23",file:"cinemateque_francaise_23.png",repo:"new"},{name:"Cin√©math√®que 24",file:"cinemateque_francaise_24.png",repo:"new"},{name:"Cin√©math√®que 25",file:"cinemateque_francaise_25.png",repo:"new"}];function s(l){const m=`${l.repo==="new"?c:a}/${l.file}`;ut.set(m),Tn.set(m),rt.set(!0)}Sn(()=>{let l=!1;if(ut.subscribe(m=>{m&&(l=!0)})(),!l){const m=h[Math.floor(Math.random()*h.length)];m&&s(m)}}),Nt();var o=zr(),v=k(E(o),2),x=E(v);x.value=x.__value="";var p=k(x);Va(p,1,()=>h,l=>l.file,(l,g)=>{var m=Fr(),y=E(m,!0);I(m);var M={};Ce(()=>{$e(y,t(g).name),M!==(M=t(g).file)&&(m.value=(m.__value=t(g).file)??"")}),T(l,m)}),I(v),I(o),ce("change",v,l=>{const g=l.target.selectedIndex-1;g>=0&&s(h[g])}),T(e,o),Tt()}var Or=fe('<div class="container svelte-1uha8ag"><h1 class="svelte-1uha8ag">Phenakistoscope Lab</h1> <p class="sub svelte-1uha8ag">Convert old phenakistoscope discs into animated GIFs</p> <!> <!> <!> <!> <!></div>');function Xr(e){var i=Or(),a=k(E(i),4);cr(a,{});var c=k(a,2);Rr(c,{});var h=k(c,2);ur(h,{});var s=k(h,2);pr(s,{});var o=k(s,2);Lr(o,{}),I(i),T(e,i)}export{Xr as component};
